{"version":3,"file":"bundle.js","sources":["../../node_modules/prismjs/prism.js","../../src/config.ts","../../src/util/error.ts","../../src/util/string.ts","../../src/node-type.ts","../../src/node-iterator.ts","../../src/util/dom.ts","../../src/parser.ts","../../src/range-save-restore.ts","../../src/content.ts","../../src/block.ts","../../src/quotes.ts","../../src/clipboard.ts","../../src/feature-detection.ts","../../src/eventable.ts","../../src/util/viewport.ts","../../src/cursor.ts","../../src/highlight-text.ts","../../src/plugins/highlighting/text-search.ts","../../src/highlight-support.ts","../../src/selection.ts","../../src/range-container.ts","../../src/selection-watcher.ts","../../src/keyboard.ts","../../src/smartQuotes.ts","../../src/dispatcher.ts","../../src/util/merge.ts","../../src/plugins/highlighting/spellcheck-service.ts","../../src/plugins/highlighting/whitespace-highlighting.ts","../../src/plugins/highlighting/match-collection.ts","../../src/monitored-highlighting.ts","../../src/util/log.ts","../../src/create-default-behavior.ts","../../src/create-default-events.ts","../../src/util/element.ts","../../src/util/binary_search.ts","../../src/core.ts","../../node_modules/preact/dist/preact.module.js","../../node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../node_modules/prop-types/factoryWithThrowingShims.js","../../node_modules/prop-types/index.js","../events.jsx","../index.js"],"sourcesContent":["\n/* **********************************************\n     Begin prism-core.js\n********************************************** */\n\n/// <reference lib=\"WebWorker\"/>\n\nvar _self = (typeof window !== 'undefined')\n\t? window   // if in browser\n\t: (\n\t\t(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)\n\t\t\t? self // if in worker\n\t\t\t: {}   // if in node js\n\t);\n\n/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n *\n * @license MIT <https://opensource.org/licenses/MIT>\n * @author Lea Verou <https://lea.verou.me>\n * @namespace\n * @public\n */\nvar Prism = (function (_self) {\n\n\t// Private helper vars\n\tvar lang = /(?:^|\\s)lang(?:uage)?-([\\w-]+)(?=\\s|$)/i;\n\tvar uniqueId = 0;\n\n\t// The grammar object for plaintext\n\tvar plainTextGrammar = {};\n\n\n\tvar _ = {\n\t\t/**\n\t\t * By default, Prism will attempt to highlight all code elements (by calling {@link Prism.highlightAll}) on the\n\t\t * current page after the page finished loading. This might be a problem if e.g. you wanted to asynchronously load\n\t\t * additional languages or plugins yourself.\n\t\t *\n\t\t * By setting this value to `true`, Prism will not automatically highlight all code elements on the page.\n\t\t *\n\t\t * You obviously have to change this value before the automatic highlighting started. To do this, you can add an\n\t\t * empty Prism object into the global scope before loading the Prism script like this:\n\t\t *\n\t\t * ```js\n\t\t * window.Prism = window.Prism || {};\n\t\t * Prism.manual = true;\n\t\t * // add a new <script> to load Prism's script\n\t\t * ```\n\t\t *\n\t\t * @default false\n\t\t * @type {boolean}\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tmanual: _self.Prism && _self.Prism.manual,\n\t\t/**\n\t\t * By default, if Prism is in a web worker, it assumes that it is in a worker it created itself, so it uses\n\t\t * `addEventListener` to communicate with its parent instance. However, if you're using Prism manually in your\n\t\t * own worker, you don't want it to do this.\n\t\t *\n\t\t * By setting this value to `true`, Prism will not add its own listeners to the worker.\n\t\t *\n\t\t * You obviously have to change this value before Prism executes. To do this, you can add an\n\t\t * empty Prism object into the global scope before loading the Prism script like this:\n\t\t *\n\t\t * ```js\n\t\t * window.Prism = window.Prism || {};\n\t\t * Prism.disableWorkerMessageHandler = true;\n\t\t * // Load Prism's script\n\t\t * ```\n\t\t *\n\t\t * @default false\n\t\t * @type {boolean}\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tdisableWorkerMessageHandler: _self.Prism && _self.Prism.disableWorkerMessageHandler,\n\n\t\t/**\n\t\t * A namespace for utility methods.\n\t\t *\n\t\t * All function in this namespace that are not explicitly marked as _public_ are for __internal use only__ and may\n\t\t * change or disappear at any time.\n\t\t *\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t */\n\t\tutil: {\n\t\t\tencode: function encode(tokens) {\n\t\t\t\tif (tokens instanceof Token) {\n\t\t\t\t\treturn new Token(tokens.type, encode(tokens.content), tokens.alias);\n\t\t\t\t} else if (Array.isArray(tokens)) {\n\t\t\t\t\treturn tokens.map(encode);\n\t\t\t\t} else {\n\t\t\t\t\treturn tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the name of the type of the given value.\n\t\t\t *\n\t\t\t * @param {any} o\n\t\t\t * @returns {string}\n\t\t\t * @example\n\t\t\t * type(null)      === 'Null'\n\t\t\t * type(undefined) === 'Undefined'\n\t\t\t * type(123)       === 'Number'\n\t\t\t * type('foo')     === 'String'\n\t\t\t * type(true)      === 'Boolean'\n\t\t\t * type([1, 2])    === 'Array'\n\t\t\t * type({})        === 'Object'\n\t\t\t * type(String)    === 'Function'\n\t\t\t * type(/abc+/)    === 'RegExp'\n\t\t\t */\n\t\t\ttype: function (o) {\n\t\t\t\treturn Object.prototype.toString.call(o).slice(8, -1);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns a unique number for the given object. Later calls will still return the same number.\n\t\t\t *\n\t\t\t * @param {Object} obj\n\t\t\t * @returns {number}\n\t\t\t */\n\t\t\tobjId: function (obj) {\n\t\t\t\tif (!obj['__id']) {\n\t\t\t\t\tObject.defineProperty(obj, '__id', { value: ++uniqueId });\n\t\t\t\t}\n\t\t\t\treturn obj['__id'];\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Creates a deep clone of the given object.\n\t\t\t *\n\t\t\t * The main intended use of this function is to clone language definitions.\n\t\t\t *\n\t\t\t * @param {T} o\n\t\t\t * @param {Record<number, any>} [visited]\n\t\t\t * @returns {T}\n\t\t\t * @template T\n\t\t\t */\n\t\t\tclone: function deepClone(o, visited) {\n\t\t\t\tvisited = visited || {};\n\n\t\t\t\tvar clone; var id;\n\t\t\t\tswitch (_.util.type(o)) {\n\t\t\t\t\tcase 'Object':\n\t\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclone = /** @type {Record<string, any>} */ ({});\n\t\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\t\tfor (var key in o) {\n\t\t\t\t\t\t\tif (o.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tclone[key] = deepClone(o[key], visited);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn /** @type {any} */ (clone);\n\n\t\t\t\t\tcase 'Array':\n\t\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclone = [];\n\t\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\t\t(/** @type {Array} */(/** @type {any} */(o))).forEach(function (v, i) {\n\t\t\t\t\t\t\tclone[i] = deepClone(v, visited);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn /** @type {any} */ (clone);\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the Prism language of the given element set by a `language-xxxx` or `lang-xxxx` class.\n\t\t\t *\n\t\t\t * If no language is set for the element or the element is `null` or `undefined`, `none` will be returned.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @returns {string}\n\t\t\t */\n\t\t\tgetLanguage: function (element) {\n\t\t\t\twhile (element) {\n\t\t\t\t\tvar m = lang.exec(element.className);\n\t\t\t\t\tif (m) {\n\t\t\t\t\t\treturn m[1].toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t\telement = element.parentElement;\n\t\t\t\t}\n\t\t\t\treturn 'none';\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Sets the Prism `language-xxxx` class of the given element.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @param {string} language\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tsetLanguage: function (element, language) {\n\t\t\t\t// remove all `language-xxxx` classes\n\t\t\t\t// (this might leave behind a leading space)\n\t\t\t\telement.className = element.className.replace(RegExp(lang, 'gi'), '');\n\n\t\t\t\t// add the new `language-xxxx` class\n\t\t\t\t// (using `classList` will automatically clean up spaces for us)\n\t\t\t\telement.classList.add('language-' + language);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the script element that is currently executing.\n\t\t\t *\n\t\t\t * This does __not__ work for line script element.\n\t\t\t *\n\t\t\t * @returns {HTMLScriptElement | null}\n\t\t\t */\n\t\t\tcurrentScript: function () {\n\t\t\t\tif (typeof document === 'undefined') {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (document.currentScript && document.currentScript.tagName === 'SCRIPT' && 1 < 2 /* hack to trip TS' flow analysis */) {\n\t\t\t\t\treturn /** @type {any} */ (document.currentScript);\n\t\t\t\t}\n\n\t\t\t\t// IE11 workaround\n\t\t\t\t// we'll get the src of the current script by parsing IE11's error stack trace\n\t\t\t\t// this will not work for inline scripts\n\n\t\t\t\ttry {\n\t\t\t\t\tthrow new Error();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Get file src url from stack. Specifically works with the format of stack traces in IE.\n\t\t\t\t\t// A stack will look like this:\n\t\t\t\t\t//\n\t\t\t\t\t// Error\n\t\t\t\t\t//    at _.util.currentScript (http://localhost/components/prism-core.js:119:5)\n\t\t\t\t\t//    at Global code (http://localhost/components/prism-core.js:606:1)\n\n\t\t\t\t\tvar src = (/at [^(\\r\\n]*\\((.*):[^:]+:[^:]+\\)$/i.exec(err.stack) || [])[1];\n\t\t\t\t\tif (src) {\n\t\t\t\t\t\tvar scripts = document.getElementsByTagName('script');\n\t\t\t\t\t\tfor (var i in scripts) {\n\t\t\t\t\t\t\tif (scripts[i].src == src) {\n\t\t\t\t\t\t\t\treturn scripts[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns whether a given class is active for `element`.\n\t\t\t *\n\t\t\t * The class can be activated if `element` or one of its ancestors has the given class and it can be deactivated\n\t\t\t * if `element` or one of its ancestors has the negated version of the given class. The _negated version_ of the\n\t\t\t * given class is just the given class with a `no-` prefix.\n\t\t\t *\n\t\t\t * Whether the class is active is determined by the closest ancestor of `element` (where `element` itself is\n\t\t\t * closest ancestor) that has the given class or the negated version of it. If neither `element` nor any of its\n\t\t\t * ancestors have the given class or the negated version of it, then the default activation will be returned.\n\t\t\t *\n\t\t\t * In the paradoxical situation where the closest ancestor contains __both__ the given class and the negated\n\t\t\t * version of it, the class is considered active.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @param {string} className\n\t\t\t * @param {boolean} [defaultActivation=false]\n\t\t\t * @returns {boolean}\n\t\t\t */\n\t\t\tisActive: function (element, className, defaultActivation) {\n\t\t\t\tvar no = 'no-' + className;\n\n\t\t\t\twhile (element) {\n\t\t\t\t\tvar classList = element.classList;\n\t\t\t\t\tif (classList.contains(className)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (classList.contains(no)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telement = element.parentElement;\n\t\t\t\t}\n\t\t\t\treturn !!defaultActivation;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * This namespace contains all currently loaded languages and the some helper functions to create and modify languages.\n\t\t *\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tlanguages: {\n\t\t\t/**\n\t\t\t * The grammar for plain, unformatted text.\n\t\t\t */\n\t\t\tplain: plainTextGrammar,\n\t\t\tplaintext: plainTextGrammar,\n\t\t\ttext: plainTextGrammar,\n\t\t\ttxt: plainTextGrammar,\n\n\t\t\t/**\n\t\t\t * Creates a deep copy of the language with the given id and appends the given tokens.\n\t\t\t *\n\t\t\t * If a token in `redef` also appears in the copied language, then the existing token in the copied language\n\t\t\t * will be overwritten at its original position.\n\t\t\t *\n\t\t\t * ## Best practices\n\t\t\t *\n\t\t\t * Since the position of overwriting tokens (token in `redef` that overwrite tokens in the copied language)\n\t\t\t * doesn't matter, they can technically be in any order. However, this can be confusing to others that trying to\n\t\t\t * understand the language definition because, normally, the order of tokens matters in Prism grammars.\n\t\t\t *\n\t\t\t * Therefore, it is encouraged to order overwriting tokens according to the positions of the overwritten tokens.\n\t\t\t * Furthermore, all non-overwriting tokens should be placed after the overwriting ones.\n\t\t\t *\n\t\t\t * @param {string} id The id of the language to extend. This has to be a key in `Prism.languages`.\n\t\t\t * @param {Grammar} redef The new tokens to append.\n\t\t\t * @returns {Grammar} The new language created.\n\t\t\t * @public\n\t\t\t * @example\n\t\t\t * Prism.languages['css-with-colors'] = Prism.languages.extend('css', {\n\t\t\t *     // Prism.languages.css already has a 'comment' token, so this token will overwrite CSS' 'comment' token\n\t\t\t *     // at its original position\n\t\t\t *     'comment': { ... },\n\t\t\t *     // CSS doesn't have a 'color' token, so this token will be appended\n\t\t\t *     'color': /\\b(?:red|green|blue)\\b/\n\t\t\t * });\n\t\t\t */\n\t\t\textend: function (id, redef) {\n\t\t\t\tvar lang = _.util.clone(_.languages[id]);\n\n\t\t\t\tfor (var key in redef) {\n\t\t\t\t\tlang[key] = redef[key];\n\t\t\t\t}\n\n\t\t\t\treturn lang;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Inserts tokens _before_ another token in a language definition or any other grammar.\n\t\t\t *\n\t\t\t * ## Usage\n\t\t\t *\n\t\t\t * This helper method makes it easy to modify existing languages. For example, the CSS language definition\n\t\t\t * not only defines CSS highlighting for CSS documents, but also needs to define highlighting for CSS embedded\n\t\t\t * in HTML through `<style>` elements. To do this, it needs to modify `Prism.languages.markup` and add the\n\t\t\t * appropriate tokens. However, `Prism.languages.markup` is a regular JavaScript object literal, so if you do\n\t\t\t * this:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.markup.style = {\n\t\t\t *     // token\n\t\t\t * };\n\t\t\t * ```\n\t\t\t *\n\t\t\t * then the `style` token will be added (and processed) at the end. `insertBefore` allows you to insert tokens\n\t\t\t * before existing tokens. For the CSS example above, you would use it like this:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.insertBefore('markup', 'cdata', {\n\t\t\t *     'style': {\n\t\t\t *         // token\n\t\t\t *     }\n\t\t\t * });\n\t\t\t * ```\n\t\t\t *\n\t\t\t * ## Special cases\n\t\t\t *\n\t\t\t * If the grammars of `inside` and `insert` have tokens with the same name, the tokens in `inside`'s grammar\n\t\t\t * will be ignored.\n\t\t\t *\n\t\t\t * This behavior can be used to insert tokens after `before`:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.insertBefore('markup', 'comment', {\n\t\t\t *     'comment': Prism.languages.markup.comment,\n\t\t\t *     // tokens after 'comment'\n\t\t\t * });\n\t\t\t * ```\n\t\t\t *\n\t\t\t * ## Limitations\n\t\t\t *\n\t\t\t * The main problem `insertBefore` has to solve is iteration order. Since ES2015, the iteration order for object\n\t\t\t * properties is guaranteed to be the insertion order (except for integer keys) but some browsers behave\n\t\t\t * differently when keys are deleted and re-inserted. So `insertBefore` can't be implemented by temporarily\n\t\t\t * deleting properties which is necessary to insert at arbitrary positions.\n\t\t\t *\n\t\t\t * To solve this problem, `insertBefore` doesn't actually insert the given tokens into the target object.\n\t\t\t * Instead, it will create a new object and replace all references to the target object with the new one. This\n\t\t\t * can be done without temporarily deleting properties, so the iteration order is well-defined.\n\t\t\t *\n\t\t\t * However, only references that can be reached from `Prism.languages` or `insert` will be replaced. I.e. if\n\t\t\t * you hold the target object in a variable, then the value of the variable will not change.\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * var oldMarkup = Prism.languages.markup;\n\t\t\t * var newMarkup = Prism.languages.insertBefore('markup', 'comment', { ... });\n\t\t\t *\n\t\t\t * assert(oldMarkup !== Prism.languages.markup);\n\t\t\t * assert(newMarkup === Prism.languages.markup);\n\t\t\t * ```\n\t\t\t *\n\t\t\t * @param {string} inside The property of `root` (e.g. a language id in `Prism.languages`) that contains the\n\t\t\t * object to be modified.\n\t\t\t * @param {string} before The key to insert before.\n\t\t\t * @param {Grammar} insert An object containing the key-value pairs to be inserted.\n\t\t\t * @param {Object<string, any>} [root] The object containing `inside`, i.e. the object that contains the\n\t\t\t * object to be modified.\n\t\t\t *\n\t\t\t * Defaults to `Prism.languages`.\n\t\t\t * @returns {Grammar} The new grammar object.\n\t\t\t * @public\n\t\t\t */\n\t\t\tinsertBefore: function (inside, before, insert, root) {\n\t\t\t\troot = root || /** @type {any} */ (_.languages);\n\t\t\t\tvar grammar = root[inside];\n\t\t\t\t/** @type {Grammar} */\n\t\t\t\tvar ret = {};\n\n\t\t\t\tfor (var token in grammar) {\n\t\t\t\t\tif (grammar.hasOwnProperty(token)) {\n\n\t\t\t\t\t\tif (token == before) {\n\t\t\t\t\t\t\tfor (var newToken in insert) {\n\t\t\t\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\n\t\t\t\t\t\t\t\t\tret[newToken] = insert[newToken];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Do not insert token which also occur in insert. See #1525\n\t\t\t\t\t\tif (!insert.hasOwnProperty(token)) {\n\t\t\t\t\t\t\tret[token] = grammar[token];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar old = root[inside];\n\t\t\t\troot[inside] = ret;\n\n\t\t\t\t// Update references in other language definitions\n\t\t\t\t_.languages.DFS(_.languages, function (key, value) {\n\t\t\t\t\tif (value === old && key != inside) {\n\t\t\t\t\t\tthis[key] = ret;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn ret;\n\t\t\t},\n\n\t\t\t// Traverse a language definition with Depth First Search\n\t\t\tDFS: function DFS(o, callback, type, visited) {\n\t\t\t\tvisited = visited || {};\n\n\t\t\t\tvar objId = _.util.objId;\n\n\t\t\t\tfor (var i in o) {\n\t\t\t\t\tif (o.hasOwnProperty(i)) {\n\t\t\t\t\t\tcallback.call(o, i, o[i], type || i);\n\n\t\t\t\t\t\tvar property = o[i];\n\t\t\t\t\t\tvar propertyType = _.util.type(property);\n\n\t\t\t\t\t\tif (propertyType === 'Object' && !visited[objId(property)]) {\n\t\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\t\tDFS(property, callback, null, visited);\n\t\t\t\t\t\t} else if (propertyType === 'Array' && !visited[objId(property)]) {\n\t\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\t\tDFS(property, callback, i, visited);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tplugins: {},\n\n\t\t/**\n\t\t * This is the most high-level function in Prism’s API.\n\t\t * It fetches all the elements that have a `.language-xxxx` class and then calls {@link Prism.highlightElement} on\n\t\t * each one of them.\n\t\t *\n\t\t * This is equivalent to `Prism.highlightAllUnder(document, async, callback)`.\n\t\t *\n\t\t * @param {boolean} [async=false] Same as in {@link Prism.highlightAllUnder}.\n\t\t * @param {HighlightCallback} [callback] Same as in {@link Prism.highlightAllUnder}.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightAll: function (async, callback) {\n\t\t\t_.highlightAllUnder(document, async, callback);\n\t\t},\n\n\t\t/**\n\t\t * Fetches all the descendants of `container` that have a `.language-xxxx` class and then calls\n\t\t * {@link Prism.highlightElement} on each one of them.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-highlightall`\n\t\t * 2. `before-all-elements-highlight`\n\t\t * 3. All hooks of {@link Prism.highlightElement} for each element.\n\t\t *\n\t\t * @param {ParentNode} container The root element, whose descendants that have a `.language-xxxx` class will be highlighted.\n\t\t * @param {boolean} [async=false] Whether each element is to be highlighted asynchronously using Web Workers.\n\t\t * @param {HighlightCallback} [callback] An optional callback to be invoked on each element after its highlighting is done.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightAllUnder: function (container, async, callback) {\n\t\t\tvar env = {\n\t\t\t\tcallback: callback,\n\t\t\t\tcontainer: container,\n\t\t\t\tselector: 'code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code'\n\t\t\t};\n\n\t\t\t_.hooks.run('before-highlightall', env);\n\n\t\t\tenv.elements = Array.prototype.slice.apply(env.container.querySelectorAll(env.selector));\n\n\t\t\t_.hooks.run('before-all-elements-highlight', env);\n\n\t\t\tfor (var i = 0, element; (element = env.elements[i++]);) {\n\t\t\t\t_.highlightElement(element, async === true, env.callback);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Highlights the code inside a single element.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-sanity-check`\n\t\t * 2. `before-highlight`\n\t\t * 3. All hooks of {@link Prism.highlight}. These hooks will be run by an asynchronous worker if `async` is `true`.\n\t\t * 4. `before-insert`\n\t\t * 5. `after-highlight`\n\t\t * 6. `complete`\n\t\t *\n\t\t * Some the above hooks will be skipped if the element doesn't contain any text or there is no grammar loaded for\n\t\t * the element's language.\n\t\t *\n\t\t * @param {Element} element The element containing the code.\n\t\t * It must have a class of `language-xxxx` to be processed, where `xxxx` is a valid language identifier.\n\t\t * @param {boolean} [async=false] Whether the element is to be highlighted asynchronously using Web Workers\n\t\t * to improve performance and avoid blocking the UI when highlighting very large chunks of code. This option is\n\t\t * [disabled by default](https://prismjs.com/faq.html#why-is-asynchronous-highlighting-disabled-by-default).\n\t\t *\n\t\t * Note: All language definitions required to highlight the code must be included in the main `prism.js` file for\n\t\t * asynchronous highlighting to work. You can build your own bundle on the\n\t\t * [Download page](https://prismjs.com/download.html).\n\t\t * @param {HighlightCallback} [callback] An optional callback to be invoked after the highlighting is done.\n\t\t * Mostly useful when `async` is `true`, since in that case, the highlighting is done asynchronously.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightElement: function (element, async, callback) {\n\t\t\t// Find language\n\t\t\tvar language = _.util.getLanguage(element);\n\t\t\tvar grammar = _.languages[language];\n\n\t\t\t// Set language on the element, if not present\n\t\t\t_.util.setLanguage(element, language);\n\n\t\t\t// Set language on the parent, for styling\n\t\t\tvar parent = element.parentElement;\n\t\t\tif (parent && parent.nodeName.toLowerCase() === 'pre') {\n\t\t\t\t_.util.setLanguage(parent, language);\n\t\t\t}\n\n\t\t\tvar code = element.textContent;\n\n\t\t\tvar env = {\n\t\t\t\telement: element,\n\t\t\t\tlanguage: language,\n\t\t\t\tgrammar: grammar,\n\t\t\t\tcode: code\n\t\t\t};\n\n\t\t\tfunction insertHighlightedCode(highlightedCode) {\n\t\t\t\tenv.highlightedCode = highlightedCode;\n\n\t\t\t\t_.hooks.run('before-insert', env);\n\n\t\t\t\tenv.element.innerHTML = env.highlightedCode;\n\n\t\t\t\t_.hooks.run('after-highlight', env);\n\t\t\t\t_.hooks.run('complete', env);\n\t\t\t\tcallback && callback.call(env.element);\n\t\t\t}\n\n\t\t\t_.hooks.run('before-sanity-check', env);\n\n\t\t\t// plugins may change/add the parent/element\n\t\t\tparent = env.element.parentElement;\n\t\t\tif (parent && parent.nodeName.toLowerCase() === 'pre' && !parent.hasAttribute('tabindex')) {\n\t\t\t\tparent.setAttribute('tabindex', '0');\n\t\t\t}\n\n\t\t\tif (!env.code) {\n\t\t\t\t_.hooks.run('complete', env);\n\t\t\t\tcallback && callback.call(env.element);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_.hooks.run('before-highlight', env);\n\n\t\t\tif (!env.grammar) {\n\t\t\t\tinsertHighlightedCode(_.util.encode(env.code));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (async && _self.Worker) {\n\t\t\t\tvar worker = new Worker(_.filename);\n\n\t\t\t\tworker.onmessage = function (evt) {\n\t\t\t\t\tinsertHighlightedCode(evt.data);\n\t\t\t\t};\n\n\t\t\t\tworker.postMessage(JSON.stringify({\n\t\t\t\t\tlanguage: env.language,\n\t\t\t\t\tcode: env.code,\n\t\t\t\t\timmediateClose: true\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\tinsertHighlightedCode(_.highlight(env.code, env.grammar, env.language));\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Low-level function, only use if you know what you’re doing. It accepts a string of text as input\n\t\t * and the language definitions to use, and returns a string with the HTML produced.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-tokenize`\n\t\t * 2. `after-tokenize`\n\t\t * 3. `wrap`: On each {@link Token}.\n\t\t *\n\t\t * @param {string} text A string with the code to be highlighted.\n\t\t * @param {Grammar} grammar An object containing the tokens to use.\n\t\t *\n\t\t * Usually a language definition like `Prism.languages.markup`.\n\t\t * @param {string} language The name of the language definition passed to `grammar`.\n\t\t * @returns {string} The highlighted HTML.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t * @example\n\t\t * Prism.highlight('var foo = true;', Prism.languages.javascript, 'javascript');\n\t\t */\n\t\thighlight: function (text, grammar, language) {\n\t\t\tvar env = {\n\t\t\t\tcode: text,\n\t\t\t\tgrammar: grammar,\n\t\t\t\tlanguage: language\n\t\t\t};\n\t\t\t_.hooks.run('before-tokenize', env);\n\t\t\tif (!env.grammar) {\n\t\t\t\tthrow new Error('The language \"' + env.language + '\" has no grammar.');\n\t\t\t}\n\t\t\tenv.tokens = _.tokenize(env.code, env.grammar);\n\t\t\t_.hooks.run('after-tokenize', env);\n\t\t\treturn Token.stringify(_.util.encode(env.tokens), env.language);\n\t\t},\n\n\t\t/**\n\t\t * This is the heart of Prism, and the most low-level function you can use. It accepts a string of text as input\n\t\t * and the language definitions to use, and returns an array with the tokenized code.\n\t\t *\n\t\t * When the language definition includes nested tokens, the function is called recursively on each of these tokens.\n\t\t *\n\t\t * This method could be useful in other contexts as well, as a very crude parser.\n\t\t *\n\t\t * @param {string} text A string with the code to be highlighted.\n\t\t * @param {Grammar} grammar An object containing the tokens to use.\n\t\t *\n\t\t * Usually a language definition like `Prism.languages.markup`.\n\t\t * @returns {TokenStream} An array of strings and tokens, a token stream.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t * @example\n\t\t * let code = `var foo = 0;`;\n\t\t * let tokens = Prism.tokenize(code, Prism.languages.javascript);\n\t\t * tokens.forEach(token => {\n\t\t *     if (token instanceof Prism.Token && token.type === 'number') {\n\t\t *         console.log(`Found numeric literal: ${token.content}`);\n\t\t *     }\n\t\t * });\n\t\t */\n\t\ttokenize: function (text, grammar) {\n\t\t\tvar rest = grammar.rest;\n\t\t\tif (rest) {\n\t\t\t\tfor (var token in rest) {\n\t\t\t\t\tgrammar[token] = rest[token];\n\t\t\t\t}\n\n\t\t\t\tdelete grammar.rest;\n\t\t\t}\n\n\t\t\tvar tokenList = new LinkedList();\n\t\t\taddAfter(tokenList, tokenList.head, text);\n\n\t\t\tmatchGrammar(text, tokenList, grammar, tokenList.head, 0);\n\n\t\t\treturn toArray(tokenList);\n\t\t},\n\n\t\t/**\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thooks: {\n\t\t\tall: {},\n\n\t\t\t/**\n\t\t\t * Adds the given callback to the list of callbacks for the given hook.\n\t\t\t *\n\t\t\t * The callback will be invoked when the hook it is registered for is run.\n\t\t\t * Hooks are usually directly run by a highlight function but you can also run hooks yourself.\n\t\t\t *\n\t\t\t * One callback function can be registered to multiple hooks and the same hook multiple times.\n\t\t\t *\n\t\t\t * @param {string} name The name of the hook.\n\t\t\t * @param {HookCallback} callback The callback function which is given environment variables.\n\t\t\t * @public\n\t\t\t */\n\t\t\tadd: function (name, callback) {\n\t\t\t\tvar hooks = _.hooks.all;\n\n\t\t\t\thooks[name] = hooks[name] || [];\n\n\t\t\t\thooks[name].push(callback);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Runs a hook invoking all registered callbacks with the given environment variables.\n\t\t\t *\n\t\t\t * Callbacks will be invoked synchronously and in the order in which they were registered.\n\t\t\t *\n\t\t\t * @param {string} name The name of the hook.\n\t\t\t * @param {Object<string, any>} env The environment variables of the hook passed to all callbacks registered.\n\t\t\t * @public\n\t\t\t */\n\t\t\trun: function (name, env) {\n\t\t\t\tvar callbacks = _.hooks.all[name];\n\n\t\t\t\tif (!callbacks || !callbacks.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, callback; (callback = callbacks[i++]);) {\n\t\t\t\t\tcallback(env);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tToken: Token\n\t};\n\t_self.Prism = _;\n\n\n\t// Typescript note:\n\t// The following can be used to import the Token type in JSDoc:\n\t//\n\t//   @typedef {InstanceType<import(\"./prism-core\")[\"Token\"]>} Token\n\n\t/**\n\t * Creates a new token.\n\t *\n\t * @param {string} type See {@link Token#type type}\n\t * @param {string | TokenStream} content See {@link Token#content content}\n\t * @param {string|string[]} [alias] The alias(es) of the token.\n\t * @param {string} [matchedStr=\"\"] A copy of the full string this token was created from.\n\t * @class\n\t * @global\n\t * @public\n\t */\n\tfunction Token(type, content, alias, matchedStr) {\n\t\t/**\n\t\t * The type of the token.\n\t\t *\n\t\t * This is usually the key of a pattern in a {@link Grammar}.\n\t\t *\n\t\t * @type {string}\n\t\t * @see GrammarToken\n\t\t * @public\n\t\t */\n\t\tthis.type = type;\n\t\t/**\n\t\t * The strings or tokens contained by this token.\n\t\t *\n\t\t * This will be a token stream if the pattern matched also defined an `inside` grammar.\n\t\t *\n\t\t * @type {string | TokenStream}\n\t\t * @public\n\t\t */\n\t\tthis.content = content;\n\t\t/**\n\t\t * The alias(es) of the token.\n\t\t *\n\t\t * @type {string|string[]}\n\t\t * @see GrammarToken\n\t\t * @public\n\t\t */\n\t\tthis.alias = alias;\n\t\t// Copy of the full string this token was created from\n\t\tthis.length = (matchedStr || '').length | 0;\n\t}\n\n\t/**\n\t * A token stream is an array of strings and {@link Token Token} objects.\n\t *\n\t * Token streams have to fulfill a few properties that are assumed by most functions (mostly internal ones) that process\n\t * them.\n\t *\n\t * 1. No adjacent strings.\n\t * 2. No empty strings.\n\t *\n\t *    The only exception here is the token stream that only contains the empty string and nothing else.\n\t *\n\t * @typedef {Array<string | Token>} TokenStream\n\t * @global\n\t * @public\n\t */\n\n\t/**\n\t * Converts the given token or token stream to an HTML representation.\n\t *\n\t * The following hooks will be run:\n\t * 1. `wrap`: On each {@link Token}.\n\t *\n\t * @param {string | Token | TokenStream} o The token or token stream to be converted.\n\t * @param {string} language The name of current language.\n\t * @returns {string} The HTML representation of the token or token stream.\n\t * @memberof Token\n\t * @static\n\t */\n\tToken.stringify = function stringify(o, language) {\n\t\tif (typeof o == 'string') {\n\t\t\treturn o;\n\t\t}\n\t\tif (Array.isArray(o)) {\n\t\t\tvar s = '';\n\t\t\to.forEach(function (e) {\n\t\t\t\ts += stringify(e, language);\n\t\t\t});\n\t\t\treturn s;\n\t\t}\n\n\t\tvar env = {\n\t\t\ttype: o.type,\n\t\t\tcontent: stringify(o.content, language),\n\t\t\ttag: 'span',\n\t\t\tclasses: ['token', o.type],\n\t\t\tattributes: {},\n\t\t\tlanguage: language\n\t\t};\n\n\t\tvar aliases = o.alias;\n\t\tif (aliases) {\n\t\t\tif (Array.isArray(aliases)) {\n\t\t\t\tArray.prototype.push.apply(env.classes, aliases);\n\t\t\t} else {\n\t\t\t\tenv.classes.push(aliases);\n\t\t\t}\n\t\t}\n\n\t\t_.hooks.run('wrap', env);\n\n\t\tvar attributes = '';\n\t\tfor (var name in env.attributes) {\n\t\t\tattributes += ' ' + name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\n\t\t}\n\n\t\treturn '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + attributes + '>' + env.content + '</' + env.tag + '>';\n\t};\n\n\t/**\n\t * @param {RegExp} pattern\n\t * @param {number} pos\n\t * @param {string} text\n\t * @param {boolean} lookbehind\n\t * @returns {RegExpExecArray | null}\n\t */\n\tfunction matchPattern(pattern, pos, text, lookbehind) {\n\t\tpattern.lastIndex = pos;\n\t\tvar match = pattern.exec(text);\n\t\tif (match && lookbehind && match[1]) {\n\t\t\t// change the match to remove the text matched by the Prism lookbehind group\n\t\t\tvar lookbehindLength = match[1].length;\n\t\t\tmatch.index += lookbehindLength;\n\t\t\tmatch[0] = match[0].slice(lookbehindLength);\n\t\t}\n\t\treturn match;\n\t}\n\n\t/**\n\t * @param {string} text\n\t * @param {LinkedList<string | Token>} tokenList\n\t * @param {any} grammar\n\t * @param {LinkedListNode<string | Token>} startNode\n\t * @param {number} startPos\n\t * @param {RematchOptions} [rematch]\n\t * @returns {void}\n\t * @private\n\t *\n\t * @typedef RematchOptions\n\t * @property {string} cause\n\t * @property {number} reach\n\t */\n\tfunction matchGrammar(text, tokenList, grammar, startNode, startPos, rematch) {\n\t\tfor (var token in grammar) {\n\t\t\tif (!grammar.hasOwnProperty(token) || !grammar[token]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar patterns = grammar[token];\n\t\t\tpatterns = Array.isArray(patterns) ? patterns : [patterns];\n\n\t\t\tfor (var j = 0; j < patterns.length; ++j) {\n\t\t\t\tif (rematch && rematch.cause == token + ',' + j) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar patternObj = patterns[j];\n\t\t\t\tvar inside = patternObj.inside;\n\t\t\t\tvar lookbehind = !!patternObj.lookbehind;\n\t\t\t\tvar greedy = !!patternObj.greedy;\n\t\t\t\tvar alias = patternObj.alias;\n\n\t\t\t\tif (greedy && !patternObj.pattern.global) {\n\t\t\t\t\t// Without the global flag, lastIndex won't work\n\t\t\t\t\tvar flags = patternObj.pattern.toString().match(/[imsuy]*$/)[0];\n\t\t\t\t\tpatternObj.pattern = RegExp(patternObj.pattern.source, flags + 'g');\n\t\t\t\t}\n\n\t\t\t\t/** @type {RegExp} */\n\t\t\t\tvar pattern = patternObj.pattern || patternObj;\n\n\t\t\t\tfor ( // iterate the token list and keep track of the current token/string position\n\t\t\t\t\tvar currentNode = startNode.next, pos = startPos;\n\t\t\t\t\tcurrentNode !== tokenList.tail;\n\t\t\t\t\tpos += currentNode.value.length, currentNode = currentNode.next\n\t\t\t\t) {\n\n\t\t\t\t\tif (rematch && pos >= rematch.reach) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar str = currentNode.value;\n\n\t\t\t\t\tif (tokenList.length > text.length) {\n\t\t\t\t\t\t// Something went terribly wrong, ABORT, ABORT!\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (str instanceof Token) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar removeCount = 1; // this is the to parameter of removeBetween\n\t\t\t\t\tvar match;\n\n\t\t\t\t\tif (greedy) {\n\t\t\t\t\t\tmatch = matchPattern(pattern, pos, text, lookbehind);\n\t\t\t\t\t\tif (!match || match.index >= text.length) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar from = match.index;\n\t\t\t\t\t\tvar to = match.index + match[0].length;\n\t\t\t\t\t\tvar p = pos;\n\n\t\t\t\t\t\t// find the node that contains the match\n\t\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\t\twhile (from >= p) {\n\t\t\t\t\t\t\tcurrentNode = currentNode.next;\n\t\t\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// adjust pos (and p)\n\t\t\t\t\t\tp -= currentNode.value.length;\n\t\t\t\t\t\tpos = p;\n\n\t\t\t\t\t\t// the current node is a Token, then the match starts inside another Token, which is invalid\n\t\t\t\t\t\tif (currentNode.value instanceof Token) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// find the last node which is affected by this match\n\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\tvar k = currentNode;\n\t\t\t\t\t\t\tk !== tokenList.tail && (p < to || typeof k.value === 'string');\n\t\t\t\t\t\t\tk = k.next\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tremoveCount++;\n\t\t\t\t\t\t\tp += k.value.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoveCount--;\n\n\t\t\t\t\t\t// replace with the new match\n\t\t\t\t\t\tstr = text.slice(pos, p);\n\t\t\t\t\t\tmatch.index -= pos;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatch = matchPattern(pattern, 0, str, lookbehind);\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// eslint-disable-next-line no-redeclare\n\t\t\t\t\tvar from = match.index;\n\t\t\t\t\tvar matchStr = match[0];\n\t\t\t\t\tvar before = str.slice(0, from);\n\t\t\t\t\tvar after = str.slice(from + matchStr.length);\n\n\t\t\t\t\tvar reach = pos + str.length;\n\t\t\t\t\tif (rematch && reach > rematch.reach) {\n\t\t\t\t\t\trematch.reach = reach;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar removeFrom = currentNode.prev;\n\n\t\t\t\t\tif (before) {\n\t\t\t\t\t\tremoveFrom = addAfter(tokenList, removeFrom, before);\n\t\t\t\t\t\tpos += before.length;\n\t\t\t\t\t}\n\n\t\t\t\t\tremoveRange(tokenList, removeFrom, removeCount);\n\n\t\t\t\t\tvar wrapped = new Token(token, inside ? _.tokenize(matchStr, inside) : matchStr, alias, matchStr);\n\t\t\t\t\tcurrentNode = addAfter(tokenList, removeFrom, wrapped);\n\n\t\t\t\t\tif (after) {\n\t\t\t\t\t\taddAfter(tokenList, currentNode, after);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (removeCount > 1) {\n\t\t\t\t\t\t// at least one Token object was removed, so we have to do some rematching\n\t\t\t\t\t\t// this can only happen if the current pattern is greedy\n\n\t\t\t\t\t\t/** @type {RematchOptions} */\n\t\t\t\t\t\tvar nestedRematch = {\n\t\t\t\t\t\t\tcause: token + ',' + j,\n\t\t\t\t\t\t\treach: reach\n\t\t\t\t\t\t};\n\t\t\t\t\t\tmatchGrammar(text, tokenList, grammar, currentNode.prev, pos, nestedRematch);\n\n\t\t\t\t\t\t// the reach might have been extended because of the rematching\n\t\t\t\t\t\tif (rematch && nestedRematch.reach > rematch.reach) {\n\t\t\t\t\t\t\trematch.reach = nestedRematch.reach;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @typedef LinkedListNode\n\t * @property {T} value\n\t * @property {LinkedListNode<T> | null} prev The previous node.\n\t * @property {LinkedListNode<T> | null} next The next node.\n\t * @template T\n\t * @private\n\t */\n\n\t/**\n\t * @template T\n\t * @private\n\t */\n\tfunction LinkedList() {\n\t\t/** @type {LinkedListNode<T>} */\n\t\tvar head = { value: null, prev: null, next: null };\n\t\t/** @type {LinkedListNode<T>} */\n\t\tvar tail = { value: null, prev: head, next: null };\n\t\thead.next = tail;\n\n\t\t/** @type {LinkedListNode<T>} */\n\t\tthis.head = head;\n\t\t/** @type {LinkedListNode<T>} */\n\t\tthis.tail = tail;\n\t\tthis.length = 0;\n\t}\n\n\t/**\n\t * Adds a new node with the given value to the list.\n\t *\n\t * @param {LinkedList<T>} list\n\t * @param {LinkedListNode<T>} node\n\t * @param {T} value\n\t * @returns {LinkedListNode<T>} The added node.\n\t * @template T\n\t */\n\tfunction addAfter(list, node, value) {\n\t\t// assumes that node != list.tail && values.length >= 0\n\t\tvar next = node.next;\n\n\t\tvar newNode = { value: value, prev: node, next: next };\n\t\tnode.next = newNode;\n\t\tnext.prev = newNode;\n\t\tlist.length++;\n\n\t\treturn newNode;\n\t}\n\t/**\n\t * Removes `count` nodes after the given node. The given node will not be removed.\n\t *\n\t * @param {LinkedList<T>} list\n\t * @param {LinkedListNode<T>} node\n\t * @param {number} count\n\t * @template T\n\t */\n\tfunction removeRange(list, node, count) {\n\t\tvar next = node.next;\n\t\tfor (var i = 0; i < count && next !== list.tail; i++) {\n\t\t\tnext = next.next;\n\t\t}\n\t\tnode.next = next;\n\t\tnext.prev = node;\n\t\tlist.length -= i;\n\t}\n\t/**\n\t * @param {LinkedList<T>} list\n\t * @returns {T[]}\n\t * @template T\n\t */\n\tfunction toArray(list) {\n\t\tvar array = [];\n\t\tvar node = list.head.next;\n\t\twhile (node !== list.tail) {\n\t\t\tarray.push(node.value);\n\t\t\tnode = node.next;\n\t\t}\n\t\treturn array;\n\t}\n\n\n\tif (!_self.document) {\n\t\tif (!_self.addEventListener) {\n\t\t\t// in Node.js\n\t\t\treturn _;\n\t\t}\n\n\t\tif (!_.disableWorkerMessageHandler) {\n\t\t\t// In worker\n\t\t\t_self.addEventListener('message', function (evt) {\n\t\t\t\tvar message = JSON.parse(evt.data);\n\t\t\t\tvar lang = message.language;\n\t\t\t\tvar code = message.code;\n\t\t\t\tvar immediateClose = message.immediateClose;\n\n\t\t\t\t_self.postMessage(_.highlight(code, _.languages[lang], lang));\n\t\t\t\tif (immediateClose) {\n\t\t\t\t\t_self.close();\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\n\t\treturn _;\n\t}\n\n\t// Get current script and highlight\n\tvar script = _.util.currentScript();\n\n\tif (script) {\n\t\t_.filename = script.src;\n\n\t\tif (script.hasAttribute('data-manual')) {\n\t\t\t_.manual = true;\n\t\t}\n\t}\n\n\tfunction highlightAutomaticallyCallback() {\n\t\tif (!_.manual) {\n\t\t\t_.highlightAll();\n\t\t}\n\t}\n\n\tif (!_.manual) {\n\t\t// If the document state is \"loading\", then we'll use DOMContentLoaded.\n\t\t// If the document state is \"interactive\" and the prism.js script is deferred, then we'll also use the\n\t\t// DOMContentLoaded event because there might be some plugins or languages which have also been deferred and they\n\t\t// might take longer one animation frame to execute which can create a race condition where only some plugins have\n\t\t// been loaded when Prism.highlightAll() is executed, depending on how fast resources are loaded.\n\t\t// See https://github.com/PrismJS/prism/issues/2102\n\t\tvar readyState = document.readyState;\n\t\tif (readyState === 'loading' || readyState === 'interactive' && script && script.defer) {\n\t\t\tdocument.addEventListener('DOMContentLoaded', highlightAutomaticallyCallback);\n\t\t} else {\n\t\t\tif (window.requestAnimationFrame) {\n\t\t\t\twindow.requestAnimationFrame(highlightAutomaticallyCallback);\n\t\t\t} else {\n\t\t\t\twindow.setTimeout(highlightAutomaticallyCallback, 16);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn _;\n\n}(_self));\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = Prism;\n}\n\n// hack for components to work correctly in node.js\nif (typeof global !== 'undefined') {\n\tglobal.Prism = Prism;\n}\n\n// some additional documentation/types\n\n/**\n * The expansion of a simple `RegExp` literal to support additional properties.\n *\n * @typedef GrammarToken\n * @property {RegExp} pattern The regular expression of the token.\n * @property {boolean} [lookbehind=false] If `true`, then the first capturing group of `pattern` will (effectively)\n * behave as a lookbehind group meaning that the captured text will not be part of the matched text of the new token.\n * @property {boolean} [greedy=false] Whether the token is greedy.\n * @property {string|string[]} [alias] An optional alias or list of aliases.\n * @property {Grammar} [inside] The nested grammar of this token.\n *\n * The `inside` grammar will be used to tokenize the text value of each token of this kind.\n *\n * This can be used to make nested and even recursive language definitions.\n *\n * Note: This can cause infinite recursion. Be careful when you embed different languages or even the same language into\n * each another.\n * @global\n * @public\n */\n\n/**\n * @typedef Grammar\n * @type {Object<string, RegExp | GrammarToken | Array<RegExp | GrammarToken>>}\n * @property {Grammar} [rest] An optional grammar object that will be appended to this grammar.\n * @global\n * @public\n */\n\n/**\n * A function which will invoked after an element was successfully highlighted.\n *\n * @callback HighlightCallback\n * @param {Element} element The element successfully highlighted.\n * @returns {void}\n * @global\n * @public\n */\n\n/**\n * @callback HookCallback\n * @param {Object<string, any>} env The environment variables of the hook.\n * @returns {void}\n * @global\n * @public\n */\n\n\n/* **********************************************\n     Begin prism-markup.js\n********************************************** */\n\nPrism.languages.markup = {\n\t'comment': {\n\t\tpattern: /<!--(?:(?!<!--)[\\s\\S])*?-->/,\n\t\tgreedy: true\n\t},\n\t'prolog': {\n\t\tpattern: /<\\?[\\s\\S]+?\\?>/,\n\t\tgreedy: true\n\t},\n\t'doctype': {\n\t\t// https://www.w3.org/TR/xml/#NT-doctypedecl\n\t\tpattern: /<!DOCTYPE(?:[^>\"'[\\]]|\"[^\"]*\"|'[^']*')+(?:\\[(?:[^<\"'\\]]|\"[^\"]*\"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\\]\\s*)?>/i,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'internal-subset': {\n\t\t\t\tpattern: /(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: null // see below\n\t\t\t},\n\t\t\t'string': {\n\t\t\t\tpattern: /\"[^\"]*\"|'[^']*'/,\n\t\t\t\tgreedy: true\n\t\t\t},\n\t\t\t'punctuation': /^<!|>$|[[\\]]/,\n\t\t\t'doctype-tag': /^DOCTYPE/i,\n\t\t\t'name': /[^\\s<>'\"]+/\n\t\t}\n\t},\n\t'cdata': {\n\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\tgreedy: true\n\t},\n\t'tag': {\n\t\tpattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s(?:\\s*[^\\s>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'tag': {\n\t\t\t\tpattern: /^<\\/?[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /^<\\/?/,\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t},\n\t\t\t'special-attr': [],\n\t\t\t'attr-value': {\n\t\t\t\tpattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /^=/,\n\t\t\t\t\t\t\talias: 'attr-equals'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /^(\\s*)[\"']|[\"']$/,\n\t\t\t\t\t\t\tlookbehind: true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\t'punctuation': /\\/?>/,\n\t\t\t'attr-name': {\n\t\t\t\tpattern: /[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\t'entity': [\n\t\t{\n\t\t\tpattern: /&[\\da-z]{1,8};/i,\n\t\t\talias: 'named-entity'\n\t\t},\n\t\t/&#x?[\\da-f]{1,8};/i\n\t]\n};\n\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] =\n\tPrism.languages.markup['entity'];\nPrism.languages.markup['doctype'].inside['internal-subset'].inside = Prism.languages.markup;\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function (env) {\n\n\tif (env.type === 'entity') {\n\t\tenv.attributes['title'] = env.content.replace(/&amp;/, '&');\n\t}\n});\n\nObject.defineProperty(Prism.languages.markup.tag, 'addInlined', {\n\t/**\n\t * Adds an inlined language to markup.\n\t *\n\t * An example of an inlined language is CSS with `<style>` tags.\n\t *\n\t * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as\n\t * case insensitive.\n\t * @param {string} lang The language key.\n\t * @example\n\t * addInlined('style', 'css');\n\t */\n\tvalue: function addInlined(tagName, lang) {\n\t\tvar includedCdataInside = {};\n\t\tincludedCdataInside['language-' + lang] = {\n\t\t\tpattern: /(^<!\\[CDATA\\[)[\\s\\S]+?(?=\\]\\]>$)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\t\tincludedCdataInside['cdata'] = /^<!\\[CDATA\\[|\\]\\]>$/i;\n\n\t\tvar inside = {\n\t\t\t'included-cdata': {\n\t\t\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\t\t\tinside: includedCdataInside\n\t\t\t}\n\t\t};\n\t\tinside['language-' + lang] = {\n\t\t\tpattern: /[\\s\\S]+/,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\n\t\tvar def = {};\n\t\tdef[tagName] = {\n\t\t\tpattern: RegExp(/(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[\\s\\S])*?(?=<\\/__>)/.source.replace(/__/g, function () { return tagName; }), 'i'),\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true,\n\t\t\tinside: inside\n\t\t};\n\n\t\tPrism.languages.insertBefore('markup', 'cdata', def);\n\t}\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addAttribute', {\n\t/**\n\t * Adds an pattern to highlight languages embedded in HTML attributes.\n\t *\n\t * An example of an inlined language is CSS with `style` attributes.\n\t *\n\t * @param {string} attrName The name of the tag that contains the inlined language. This name will be treated as\n\t * case insensitive.\n\t * @param {string} lang The language key.\n\t * @example\n\t * addAttribute('style', 'css');\n\t */\n\tvalue: function (attrName, lang) {\n\t\tPrism.languages.markup.tag.inside['special-attr'].push({\n\t\t\tpattern: RegExp(\n\t\t\t\t/(^|[\"'\\s])/.source + '(?:' + attrName + ')' + /\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))/.source,\n\t\t\t\t'i'\n\t\t\t),\n\t\t\tlookbehind: true,\n\t\t\tinside: {\n\t\t\t\t'attr-name': /^[^\\s=]+/,\n\t\t\t\t'attr-value': {\n\t\t\t\t\tpattern: /=[\\s\\S]+/,\n\t\t\t\t\tinside: {\n\t\t\t\t\t\t'value': {\n\t\t\t\t\t\t\tpattern: /(^=\\s*([\"']|(?![\"'])))\\S[\\s\\S]*(?=\\2$)/,\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\talias: [lang, 'language-' + lang],\n\t\t\t\t\t\t\tinside: Prism.languages[lang]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpattern: /^=/,\n\t\t\t\t\t\t\t\talias: 'attr-equals'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/\"|'/\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n});\n\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\n\nPrism.languages.xml = Prism.languages.extend('markup', {});\nPrism.languages.ssml = Prism.languages.xml;\nPrism.languages.atom = Prism.languages.xml;\nPrism.languages.rss = Prism.languages.xml;\n\n\n/* **********************************************\n     Begin prism-css.js\n********************************************** */\n\n(function (Prism) {\n\n\tvar string = /(?:\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n])*')/;\n\n\tPrism.languages.css = {\n\t\t'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n\t\t'atrule': {\n\t\t\tpattern: RegExp('@[\\\\w-](?:' + /[^;{\\s\"']|\\s+(?!\\s)/.source + '|' + string.source + ')*?' + /(?:;|(?=\\s*\\{))/.source),\n\t\t\tinside: {\n\t\t\t\t'rule': /^@[\\w-]+/,\n\t\t\t\t'selector-function-argument': {\n\t\t\t\t\tpattern: /(\\bselector\\s*\\(\\s*(?![\\s)]))(?:[^()\\s]|\\s+(?![\\s)])|\\((?:[^()]|\\([^()]*\\))*\\))+(?=\\s*\\))/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'selector'\n\t\t\t\t},\n\t\t\t\t'keyword': {\n\t\t\t\t\tpattern: /(^|[^\\w-])(?:and|not|only|or)(?![\\w-])/,\n\t\t\t\t\tlookbehind: true\n\t\t\t\t}\n\t\t\t\t// See rest below\n\t\t\t}\n\t\t},\n\t\t'url': {\n\t\t\t// https://drafts.csswg.org/css-values-3/#urls\n\t\t\tpattern: RegExp('\\\\burl\\\\((?:' + string.source + '|' + /(?:[^\\\\\\r\\n()\"']|\\\\[\\s\\S])*/.source + ')\\\\)', 'i'),\n\t\t\tgreedy: true,\n\t\t\tinside: {\n\t\t\t\t'function': /^url/i,\n\t\t\t\t'punctuation': /^\\(|\\)$/,\n\t\t\t\t'string': {\n\t\t\t\t\tpattern: RegExp('^' + string.source + '$'),\n\t\t\t\t\talias: 'url'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t'selector': {\n\t\t\tpattern: RegExp('(^|[{}\\\\s])[^{}\\\\s](?:[^{};\"\\'\\\\s]|\\\\s+(?![\\\\s{])|' + string.source + ')*(?=\\\\s*\\\\{)'),\n\t\t\tlookbehind: true\n\t\t},\n\t\t'string': {\n\t\t\tpattern: string,\n\t\t\tgreedy: true\n\t\t},\n\t\t'property': {\n\t\t\tpattern: /(^|[^-\\w\\xA0-\\uFFFF])(?!\\s)[-_a-z\\xA0-\\uFFFF](?:(?!\\s)[-\\w\\xA0-\\uFFFF])*(?=\\s*:)/i,\n\t\t\tlookbehind: true\n\t\t},\n\t\t'important': /!important\\b/i,\n\t\t'function': {\n\t\t\tpattern: /(^|[^-a-z0-9])[-a-z0-9]+(?=\\()/i,\n\t\t\tlookbehind: true\n\t\t},\n\t\t'punctuation': /[(){};:,]/\n\t};\n\n\tPrism.languages.css['atrule'].inside.rest = Prism.languages.css;\n\n\tvar markup = Prism.languages.markup;\n\tif (markup) {\n\t\tmarkup.tag.addInlined('style', 'css');\n\t\tmarkup.tag.addAttribute('style', 'css');\n\t}\n\n}(Prism));\n\n\n/* **********************************************\n     Begin prism-clike.js\n********************************************** */\n\nPrism.languages.clike = {\n\t'comment': [\n\t\t{\n\t\t\tpattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^\\\\:])\\/\\/.*/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t}\n\t],\n\t'string': {\n\t\tpattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n\t\tgreedy: true\n\t},\n\t'class-name': {\n\t\tpattern: /(\\b(?:class|extends|implements|instanceof|interface|new|trait)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+/i,\n\t\tlookbehind: true,\n\t\tinside: {\n\t\t\t'punctuation': /[.\\\\]/\n\t\t}\n\t},\n\t'keyword': /\\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\\b/,\n\t'boolean': /\\b(?:false|true)\\b/,\n\t'function': /\\b\\w+(?=\\()/,\n\t'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n\t'operator': /[<>]=?|[!=]=?=?|--?|\\+\\+?|&&?|\\|\\|?|[?*/~^%]/,\n\t'punctuation': /[{}[\\];(),.:]/\n};\n\n\n/* **********************************************\n     Begin prism-javascript.js\n********************************************** */\n\nPrism.languages.javascript = Prism.languages.extend('clike', {\n\t'class-name': [\n\t\tPrism.languages.clike['class-name'],\n\t\t{\n\t\t\tpattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,\n\t\t\tlookbehind: true\n\t\t}\n\t],\n\t'keyword': [\n\t\t{\n\t\t\tpattern: /((?:^|\\})\\s*)catch\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\\s*(?:\\{|$))|for|from(?=\\s*(?:['\"]|$))|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t],\n\t// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n\t'function': /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n\t'number': {\n\t\tpattern: RegExp(\n\t\t\t/(^|[^\\w$])/.source +\n\t\t\t'(?:' +\n\t\t\t(\n\t\t\t\t// constant\n\t\t\t\t/NaN|Infinity/.source +\n\t\t\t\t'|' +\n\t\t\t\t// binary integer\n\t\t\t\t/0[bB][01]+(?:_[01]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// octal integer\n\t\t\t\t/0[oO][0-7]+(?:_[0-7]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// hexadecimal integer\n\t\t\t\t/0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// decimal bigint\n\t\t\t\t/\\d+(?:_\\d+)*n/.source +\n\t\t\t\t'|' +\n\t\t\t\t// decimal number (integer or float) but no bigint\n\t\t\t\t/(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?/.source\n\t\t\t) +\n\t\t\t')' +\n\t\t\t/(?![\\w$])/.source\n\t\t),\n\t\tlookbehind: true\n\t},\n\t'operator': /--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/\n});\n\nPrism.languages.javascript['class-name'][0].pattern = /(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/;\n\nPrism.languages.insertBefore('javascript', 'keyword', {\n\t'regex': {\n\t\tpattern: RegExp(\n\t\t\t// lookbehind\n\t\t\t// eslint-disable-next-line regexp/no-dupe-characters-character-class\n\t\t\t/((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source +\n\t\t\t// Regex pattern:\n\t\t\t// There are 2 regex patterns here. The RegExp set notation proposal added support for nested character\n\t\t\t// classes if the `v` flag is present. Unfortunately, nested CCs are both context-free and incompatible\n\t\t\t// with the only syntax, so we have to define 2 different regex patterns.\n\t\t\t/\\//.source +\n\t\t\t'(?:' +\n\t\t\t/(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/.source +\n\t\t\t'|' +\n\t\t\t// `v` flag syntax. This supports 3 levels of nested character classes.\n\t\t\t/(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source +\n\t\t\t')' +\n\t\t\t// lookahead\n\t\t\t/(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/.source\n\t\t),\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'regex-source': {\n\t\t\t\tpattern: /^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\talias: 'language-regex',\n\t\t\t\tinside: Prism.languages.regex\n\t\t\t},\n\t\t\t'regex-delimiter': /^\\/|\\/$/,\n\t\t\t'regex-flags': /^[a-z]+$/,\n\t\t}\n\t},\n\t// This must be declared before keyword because we use \"function\" inside the look-forward\n\t'function-variable': {\n\t\tpattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,\n\t\talias: 'function'\n\t},\n\t'parameter': [\n\t\t{\n\t\t\tpattern: /(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t}\n\t],\n\t'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/\n});\n\nPrism.languages.insertBefore('javascript', 'string', {\n\t'hashbang': {\n\t\tpattern: /^#!.*/,\n\t\tgreedy: true,\n\t\talias: 'comment'\n\t},\n\t'template-string': {\n\t\tpattern: /`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'template-punctuation': {\n\t\t\t\tpattern: /^`|`$/,\n\t\t\t\talias: 'string'\n\t\t\t},\n\t\t\t'interpolation': {\n\t\t\t\tpattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'interpolation-punctuation': {\n\t\t\t\t\t\tpattern: /^\\$\\{|\\}$/,\n\t\t\t\t\t\talias: 'punctuation'\n\t\t\t\t\t},\n\t\t\t\t\trest: Prism.languages.javascript\n\t\t\t\t}\n\t\t\t},\n\t\t\t'string': /[\\s\\S]+/\n\t\t}\n\t},\n\t'string-property': {\n\t\tpattern: /((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\talias: 'property'\n\t}\n});\n\nPrism.languages.insertBefore('javascript', 'operator', {\n\t'literal-property': {\n\t\tpattern: /((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,\n\t\tlookbehind: true,\n\t\talias: 'property'\n\t},\n});\n\nif (Prism.languages.markup) {\n\tPrism.languages.markup.tag.addInlined('script', 'javascript');\n\n\t// add attribute support for all DOM events.\n\t// https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events\n\tPrism.languages.markup.tag.addAttribute(\n\t\t/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,\n\t\t'javascript'\n\t);\n}\n\nPrism.languages.js = Prism.languages.javascript;\n\n\n/* **********************************************\n     Begin prism-file-highlight.js\n********************************************** */\n\n(function () {\n\n\tif (typeof Prism === 'undefined' || typeof document === 'undefined') {\n\t\treturn;\n\t}\n\n\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n\tif (!Element.prototype.matches) {\n\t\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\t}\n\n\tvar LOADING_MESSAGE = 'Loading…';\n\tvar FAILURE_MESSAGE = function (status, message) {\n\t\treturn '✖ Error ' + status + ' while fetching file: ' + message;\n\t};\n\tvar FAILURE_EMPTY_MESSAGE = '✖ Error: File does not exist or is empty';\n\n\tvar EXTENSIONS = {\n\t\t'js': 'javascript',\n\t\t'py': 'python',\n\t\t'rb': 'ruby',\n\t\t'ps1': 'powershell',\n\t\t'psm1': 'powershell',\n\t\t'sh': 'bash',\n\t\t'bat': 'batch',\n\t\t'h': 'c',\n\t\t'tex': 'latex'\n\t};\n\n\tvar STATUS_ATTR = 'data-src-status';\n\tvar STATUS_LOADING = 'loading';\n\tvar STATUS_LOADED = 'loaded';\n\tvar STATUS_FAILED = 'failed';\n\n\tvar SELECTOR = 'pre[data-src]:not([' + STATUS_ATTR + '=\"' + STATUS_LOADED + '\"])'\n\t\t+ ':not([' + STATUS_ATTR + '=\"' + STATUS_LOADING + '\"])';\n\n\t/**\n\t * Loads the given file.\n\t *\n\t * @param {string} src The URL or path of the source file to load.\n\t * @param {(result: string) => void} success\n\t * @param {(reason: string) => void} error\n\t */\n\tfunction loadFile(src, success, error) {\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open('GET', src, true);\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (xhr.readyState == 4) {\n\t\t\t\tif (xhr.status < 400 && xhr.responseText) {\n\t\t\t\t\tsuccess(xhr.responseText);\n\t\t\t\t} else {\n\t\t\t\t\tif (xhr.status >= 400) {\n\t\t\t\t\t\terror(FAILURE_MESSAGE(xhr.status, xhr.statusText));\n\t\t\t\t\t} else {\n\t\t\t\t\t\terror(FAILURE_EMPTY_MESSAGE);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\txhr.send(null);\n\t}\n\n\t/**\n\t * Parses the given range.\n\t *\n\t * This returns a range with inclusive ends.\n\t *\n\t * @param {string | null | undefined} range\n\t * @returns {[number, number | undefined] | undefined}\n\t */\n\tfunction parseRange(range) {\n\t\tvar m = /^\\s*(\\d+)\\s*(?:(,)\\s*(?:(\\d+)\\s*)?)?$/.exec(range || '');\n\t\tif (m) {\n\t\t\tvar start = Number(m[1]);\n\t\t\tvar comma = m[2];\n\t\t\tvar end = m[3];\n\n\t\t\tif (!comma) {\n\t\t\t\treturn [start, start];\n\t\t\t}\n\t\t\tif (!end) {\n\t\t\t\treturn [start, undefined];\n\t\t\t}\n\t\t\treturn [start, Number(end)];\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tPrism.hooks.add('before-highlightall', function (env) {\n\t\tenv.selector += ', ' + SELECTOR;\n\t});\n\n\tPrism.hooks.add('before-sanity-check', function (env) {\n\t\tvar pre = /** @type {HTMLPreElement} */ (env.element);\n\t\tif (pre.matches(SELECTOR)) {\n\t\t\tenv.code = ''; // fast-path the whole thing and go to complete\n\n\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_LOADING); // mark as loading\n\n\t\t\t// add code element with loading message\n\t\t\tvar code = pre.appendChild(document.createElement('CODE'));\n\t\t\tcode.textContent = LOADING_MESSAGE;\n\n\t\t\tvar src = pre.getAttribute('data-src');\n\n\t\t\tvar language = env.language;\n\t\t\tif (language === 'none') {\n\t\t\t\t// the language might be 'none' because there is no language set;\n\t\t\t\t// in this case, we want to use the extension as the language\n\t\t\t\tvar extension = (/\\.(\\w+)$/.exec(src) || [, 'none'])[1];\n\t\t\t\tlanguage = EXTENSIONS[extension] || extension;\n\t\t\t}\n\n\t\t\t// set language classes\n\t\t\tPrism.util.setLanguage(code, language);\n\t\t\tPrism.util.setLanguage(pre, language);\n\n\t\t\t// preload the language\n\t\t\tvar autoloader = Prism.plugins.autoloader;\n\t\t\tif (autoloader) {\n\t\t\t\tautoloader.loadLanguages(language);\n\t\t\t}\n\n\t\t\t// load file\n\t\t\tloadFile(\n\t\t\t\tsrc,\n\t\t\t\tfunction (text) {\n\t\t\t\t\t// mark as loaded\n\t\t\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_LOADED);\n\n\t\t\t\t\t// handle data-range\n\t\t\t\t\tvar range = parseRange(pre.getAttribute('data-range'));\n\t\t\t\t\tif (range) {\n\t\t\t\t\t\tvar lines = text.split(/\\r\\n?|\\n/g);\n\n\t\t\t\t\t\t// the range is one-based and inclusive on both ends\n\t\t\t\t\t\tvar start = range[0];\n\t\t\t\t\t\tvar end = range[1] == null ? lines.length : range[1];\n\n\t\t\t\t\t\tif (start < 0) { start += lines.length; }\n\t\t\t\t\t\tstart = Math.max(0, Math.min(start - 1, lines.length));\n\t\t\t\t\t\tif (end < 0) { end += lines.length; }\n\t\t\t\t\t\tend = Math.max(0, Math.min(end, lines.length));\n\n\t\t\t\t\t\ttext = lines.slice(start, end).join('\\n');\n\n\t\t\t\t\t\t// add data-start for line numbers\n\t\t\t\t\t\tif (!pre.hasAttribute('data-start')) {\n\t\t\t\t\t\t\tpre.setAttribute('data-start', String(start + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// highlight code\n\t\t\t\t\tcode.textContent = text;\n\t\t\t\t\tPrism.highlightElement(code);\n\t\t\t\t},\n\t\t\t\tfunction (error) {\n\t\t\t\t\t// mark as failed\n\t\t\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_FAILED);\n\n\t\t\t\t\tcode.textContent = error;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t});\n\n\tPrism.plugins.fileHighlight = {\n\t\t/**\n\t\t * Executes the File Highlight plugin for all matching `pre` elements under the given container.\n\t\t *\n\t\t * Note: Elements which are already loaded or currently loading will not be touched by this method.\n\t\t *\n\t\t * @param {ParentNode} [container=document]\n\t\t */\n\t\thighlight: function highlight(container) {\n\t\t\tvar elements = (container || document).querySelectorAll(SELECTOR);\n\n\t\t\tfor (var i = 0, element; (element = elements[i++]);) {\n\t\t\t\tPrism.highlightElement(element);\n\t\t\t}\n\t\t}\n\t};\n\n\tvar logged = false;\n\t/** @deprecated Use `Prism.plugins.fileHighlight.highlight` instead. */\n\tPrism.fileHighlight = function () {\n\t\tif (!logged) {\n\t\t\tconsole.warn('Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead.');\n\t\t\tlogged = true;\n\t\t}\n\t\tPrism.plugins.fileHighlight.highlight.apply(this, arguments);\n\t};\n\n}());\n","export interface MarkupConfig {\n  type: 'tag'\n  name: string\n  attribs: Record<string, any>\n  trim: boolean\n}\n\nexport interface PastedHtmlRules {\n  allowedElements: Record<string, Record<string, boolean>>\n  allowedPlainTextElements: Record<string, Record<string, boolean>>\n  requiredAttributes: Record<string, string[]>\n  transformElements: Record<string, string>\n  splitIntoBlocks: string[]\n  blockLevelElements: string[]\n  blacklistedElements: string[]\n  keepInternalRelativeLinks: boolean\n  replaceQuotes: {\n    quotes?: string[]\n    singleQuotes?: string[]\n    apostrophe?: string\n  }\n}\n\nexport interface Config {\n  log: boolean\n  logErrors: boolean\n  editableClass: string\n  editableDisabledClass: string\n  pastingAttribute: string\n  trimLeadingAndTrailingWhitespaces: boolean\n  boldMarkup: MarkupConfig\n  italicMarkup: MarkupConfig\n  underlineMarkup: MarkupConfig\n  linkMarkup: MarkupConfig\n  pastedHtmlRules: PastedHtmlRules\n}\n\nconst config: Config = {\n  log: false,\n  logErrors: true,\n  editableClass: 'js-editable',\n  editableDisabledClass: 'js-editable-disabled',\n  pastingAttribute: 'data-editable-is-pasting',\n  trimLeadingAndTrailingWhitespaces: true,\n  boldMarkup: {\n    type: 'tag',\n    name: 'strong',\n    attribs: {},\n    trim: true\n  },\n  italicMarkup: {\n    type: 'tag',\n    name: 'em',\n    attribs: {},\n    trim: true\n  },\n  underlineMarkup: {\n    type: 'tag',\n    name: 'u',\n    attribs: {},\n    trim: false\n  },\n  linkMarkup: {\n    type: 'tag',\n    name: 'a',\n    attribs: {},\n    trim: true\n  },\n  pastedHtmlRules: {\n    allowedElements: {\n      'a': {\n        'href': true,\n        'rel': true,\n        'target': true\n      },\n      'strong': {},\n      'em': {},\n      'br': {}\n    },\n    allowedPlainTextElements: {\n      'br': {}\n    },\n    requiredAttributes: {\n      'a': ['href']\n    },\n    transformElements: {\n      'b': 'strong',\n      'i': 'em'\n    },\n    splitIntoBlocks: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'blockquote'],\n    blockLevelElements: [\n      'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'div', 'p', 'pre', 'hr', 'blockquote',\n      'article', 'figure', 'header', 'footer', 'ul', 'ol', 'li', 'section', 'table', 'video'\n    ],\n    blacklistedElements: ['style', 'script'],\n    keepInternalRelativeLinks: false,\n    replaceQuotes: {}\n  }\n}\n\nexport default config\n\n","import config from '../config.js'\n\n// Allows for safe error logging\n// Falls back to console.log if console.error is not available\nexport default function error(...args: any[]): void {\n  if (config.logErrors === false) return\n\n  const errorArgs = args.length === 1 ? args[0] : args\n\n  if (!global.console) return\n\n  if (typeof console.error === 'function') {\n    console.error(errorArgs)\n    return\n  }\n\n  console.log(errorArgs)\n}\n\n","const toString = Object.prototype.toString\nconst htmlCharacters: Record<string, string> = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n}\n\n// TODO: replace with lodash methods\nexport function trimRight(text: string): string {\n  return text.replace(/\\s+$/, '')\n}\n\nexport function trimLeft(text: string): string {\n  return text.replace(/^\\s+/, '')\n}\n\nexport function trim(text: string): string {\n  return text.replace(/^\\s+|\\s+$/g, '')\n}\n\nexport function isString(obj: any): obj is string {\n  return toString.call(obj) === '[object String]'\n}\n\n/**\n * Turn any string into a regular expression.\n * This can be used to search or replace a string conveniently.\n */\nexport function regexp(str: string, flags?: string): RegExp {\n  if (!flags) flags = 'g'\n  const escapedStr = str.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n  return new RegExp(escapedStr, flags)\n}\n\n/**\n * Escape HTML characters <, > and &\n * Usage: escapeHtml('<div>')\n *\n * @param { String }\n * @param { Boolean } Optional. If true \" and ' will also be escaped.\n * @return { String } Escaped Html you can assign to innerHTML of an element.\n */\n\n// TODO: replace with npm.im/he\nexport function escapeHtml(s: string, forAttribute?: boolean): string {\n  return s.replace(forAttribute ? /[&<>'\"]/g : /[&<>]/g, function (c: string) {\n    return htmlCharacters[c] || c\n  })\n}\n\n/**\n * Escape a string the browser way.\n */\nexport function browserEscapeHtml(str: string): string {\n  const div = document.createElement('div')\n  div.appendChild(document.createTextNode(str))\n  return div.innerHTML\n}\n\nexport function replaceLast(text: string | null | undefined, searchValue: string | null | undefined, replaceValue: string | null | undefined): string {\n  if (!text) return ''\n  text = `${text}`\n  if (!searchValue || replaceValue == null) return text\n  const lastOccurrenceIndex = text.lastIndexOf(searchValue)\n  if (lastOccurrenceIndex === -1) return text\n  return `${\n    text.slice(0, lastOccurrenceIndex)\n  }${\n    replaceValue\n  }${\n    text.slice(lastOccurrenceIndex + searchValue.length)\n  }`\n}\n\nexport function endsWithSingleSpace(text: string): boolean {\n  return /\\S+\\s{1}$/.test(text)\n}\n\n","// DOM node types\n// https://developer.mozilla.org/en-US/docs/Web/API/Node.nodeType\n\nexport const elementNode = 1\nexport const attributeNode = 2\nexport const textNode = 3\nexport const cdataSectionNode = 4\nexport const entityReferenceNode = 5\nexport const entityNode = 6\nexport const processingInstructionNode = 7\nexport const commentNode = 8\nexport const documentNode = 9\nexport const documentTypeNode = 10\nexport const documentFragmentNode = 11\nexport const notationNode = 12\n\n","import {textNode} from './node-type.js'\n\n// A DOM node iterator.\n//\n// Has the ability to replace nodes on the fly and continue\n// the iteration.\nexport default class NodeIterator {\n  public current: Node | undefined\n  public previous: Node | undefined\n  public nextNode: Node | undefined\n  public root: Node\n  private iteratorFunc: () => Node | undefined\n\n  constructor(root: Node, method?: string) {\n    this.current = this.previous = this.nextNode = this.root = root\n    this.iteratorFunc = (this as any)[method || 'getNext']\n  }\n\n  [Symbol.iterator](): this {\n    return this\n  }\n\n  getNextTextNode(): Text | undefined {\n    let next: Node | undefined\n    while ((next = this.getNext())) {\n      if (next.nodeType === textNode && (next as Text).data !== '') return next as Text\n    }\n    return undefined\n  }\n\n  getPreviousTextNode(): Text | undefined {\n    let prev: Node | undefined\n    while ((prev = this.getPrevious())) {\n      if (prev.nodeType === textNode && (prev as Text).data !== '') return prev as Text\n    }\n    return undefined\n  }\n\n  next(): IteratorResult<Node | undefined, any> {\n    const value = this.iteratorFunc()\n    return value ? {value} : {done: true, value: undefined}\n  }\n\n  getNext(): Node | undefined {\n    let n = this.current = this.nextNode\n    let child: Node | null\n    this.nextNode = undefined\n    if (this.current) {\n      child = (n as Element).firstChild\n\n      // Skip the children of elements with the attribute data-editable=\"remove\"\n      // This prevents text nodes that are not part of the content to be included.\n      if (child && (n as Element).getAttribute?.('data-editable') !== 'remove') {\n        this.nextNode = child\n      } else {\n        while ((n !== this.root) && n) {\n          const nextSibling = n.nextSibling\n          if (nextSibling) {\n            this.nextNode = nextSibling\n            break\n          }\n          n = n.parentNode as Node\n        }\n      }\n    }\n    return this.current\n  }\n\n  getPrevious(): Node | undefined {\n    let n = this.current = this.previous\n    let child: Node | null\n    this.previous = undefined\n    if (this.current) {\n      child = (n as Element).lastChild\n\n      // Skip the children of elements with the attribute data-editable=\"remove\"\n      // This prevents text nodes that are not part of the content to be included.\n      if (child && (n as Element).getAttribute?.('data-editable') !== 'remove') {\n        this.previous = child\n      } else {\n        while ((n !== this.root) && n) {\n          const prevSibling = n.previousSibling\n          if (prevSibling) {\n            this.previous = prevSibling\n            break\n          }\n          n = n.parentNode as Node\n        }\n      }\n    }\n    return this.current\n  }\n\n  replaceCurrent(replacement: Node): void {\n    this.current = replacement\n    this.nextNode = undefined\n    this.previous = undefined\n    let n = this.current\n    while ((n !== this.root) && n) {\n      const nextSibling = n.nextSibling\n      if (nextSibling) {\n        this.nextNode = nextSibling\n        break\n      }\n      n = n.parentNode as Node\n    }\n  }\n}\n\n","import NodeIterator from '../node-iterator.js'\nimport {textNode} from '../node-type.js'\n\nexport const domArray = (target: HTMLElement | HTMLElement[] | string | NodeList, documentOrHost: Document | HTMLElement, host?: HTMLElement): HTMLElement[] => {\n  if (typeof target === 'string') {\n    const doc = (documentOrHost as Document).querySelectorAll ? documentOrHost as Document : (documentOrHost as HTMLElement).ownerDocument!\n    const container = host || documentOrHost as HTMLElement\n    return Array.from(container.querySelectorAll ? container.querySelectorAll(target) : doc.querySelectorAll(target)) as HTMLElement[]\n  }\n  if ((target as HTMLElement).tagName) return [target as HTMLElement]\n  if (Array.isArray(target)) return target\n  // Support NodeList and jQuery arrays\n  return Array.from(target as NodeList) as HTMLElement[]\n}\n\nexport const domSelector = (target: HTMLElement | string | NodeList | HTMLElement[], document: Document): HTMLElement | null => {\n  if (typeof target === 'string') return document.querySelector(target)\n  if ((target as HTMLElement).tagName) return target as HTMLElement\n  // Support NodeList and jQuery arrays\n  if ((target as any)[0]) return (target as any)[0]\n  return target as HTMLElement\n}\n\nexport const createElement = (html: string, win: Window = window): HTMLElement | null => {\n  const el = win.document.createElement('div')\n  el.innerHTML = html\n  return el.firstElementChild as HTMLElement | null\n}\n\nexport const closest = (elem: Node | null | undefined, selector: string): HTMLElement | undefined => {\n  if (!elem) return undefined\n  // For text nodes or other nodes without closest, traverse to parent element\n  let currentNode: Node | null = elem\n  while (currentNode && !(currentNode as any).closest) {\n    currentNode = currentNode.parentNode\n  }\n  if (currentNode && (currentNode as any).closest) {\n    return (currentNode as any).closest(selector)\n  }\n  return undefined\n}\n\nexport const createRange = (win: Window = window): Range => {\n  return win.document.createRange()\n}\n\nexport const getSelection = (win: Window = window): Selection | null => {\n  const docSelection = win.document.getSelection ? win.document.getSelection() : null\n  if (docSelection) return docSelection\n  return win.getSelection ? win.getSelection() : null\n}\n\nexport const getNodes = (range: Range, nodeTypes: number[], filterFunc?: ((node: Node) => boolean) | null, win: Window = window): Node[] => {\n  const nodes: Node[] = []\n\n  const nodeIterator = win.document.createNodeIterator(\n    range.commonAncestorContainer,\n    NodeFilter.SHOW_ALL,\n    {\n      acceptNode(node: Node): number {\n        if (\n          range.intersectsNode(node) &&\n          nodeTypes.includes(node.nodeType) &&\n          node !== range.commonAncestorContainer // Exclude the common ancestor container\n        ) {\n          if (typeof filterFunc === 'function') {\n            return filterFunc(node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP\n          }\n          return NodeFilter.FILTER_ACCEPT\n        }\n        return NodeFilter.FILTER_SKIP\n      }\n    }\n  )\n\n  let currentNode: Node | null\n  while ((currentNode = nodeIterator.nextNode())) {\n    nodes.push(currentNode)\n  }\n\n  return nodes\n}\n\nexport const normalizeBoundaries = (range: Range): void => {\n  if (range.startContainer.compareDocumentPosition(range.endContainer) === Node.DOCUMENT_POSITION_FOLLOWING) {\n    range.setStartBefore(range.endContainer)\n  }\n\n  if (range.endContainer.compareDocumentPosition(range.startContainer) === Node.DOCUMENT_POSITION_PRECEDING) {\n    range.setEndAfter(range.startContainer)\n  }\n}\n\nexport const containsRange = (containerRange: Range, testRange: Range): boolean => {\n  return (\n    containerRange.compareBoundaryPoints(Range.START_TO_START, testRange) <= 0 &&\n    containerRange.compareBoundaryPoints(Range.END_TO_END, testRange) >= 0\n  )\n}\n\nexport const containsNodeText = (range: Range, node: Node): boolean => {\n  const nodeRange = document.createRange()\n  nodeRange.selectNodeContents(node)\n  const comparisonStart = range.compareBoundaryPoints(Range.START_TO_START, nodeRange)\n  const comparisonEnd = range.compareBoundaryPoints(Range.END_TO_END, nodeRange)\n  return comparisonStart <= 0 && comparisonEnd >= 0\n}\n\nexport const nodeContainsRange = (node: Node, range: Range): boolean => {\n  const nodeRange = document.createRange()\n  nodeRange.selectNodeContents(node)\n  const comparisonStart = range.compareBoundaryPoints(Range.START_TO_START, nodeRange)\n  const comparisonEnd = range.compareBoundaryPoints(Range.END_TO_END, nodeRange)\n  return comparisonStart >= 0 && comparisonEnd <= 0\n}\n\nconst isCharacterDataNode = (node: Node): boolean => {\n  return node && (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.COMMENT_NODE)\n}\n\nconst splitDataNode = (node: Node, offset: number): Text => {\n  return (node as Text).splitText(offset)\n}\n\nexport const splitBoundaries = (range: Range): void => {\n  const startContainer = range.startContainer\n  const startOffset = range.startOffset\n  const endContainer = range.endContainer\n  const endOffset = range.endOffset\n\n  if (isCharacterDataNode(endContainer) && endOffset > 0 && endOffset < (endContainer as Text).length) {\n    splitDataNode(endContainer, endOffset)\n  }\n\n  if (isCharacterDataNode(startContainer) && startOffset > 0 && startOffset < (startContainer as Text).length) {\n    const newStartContainer = splitDataNode(startContainer, startOffset)\n    range.setStart(newStartContainer, 0)\n  }\n}\n\nexport interface CharacterRange {\n  start: number\n  end: number\n  text: string\n}\n\nexport const toCharacterRange = (range: Range, container: Node): CharacterRange => {\n  const startRange = range.cloneRange()\n  startRange.setStart(container, 0)\n  startRange.setEnd(range.startContainer, range.startOffset)\n\n  const rangeText = range.toString()\n  const start = startRange.toString().length\n  const end = start + rangeText.length\n\n  return {start, end, text: rangeText}\n}\n\nexport const rangesAreEqual = (range1: Range, range2: Range): boolean => {\n  return (\n    range1.startContainer === range2.startContainer &&\n    range1.startOffset === range2.startOffset &&\n    range1.endContainer === range2.endContainer &&\n    range1.endOffset === range2.endOffset\n  )\n}\n\nexport const rangeToHtml = (range: Range, win: Window = window): string => {\n  const div = win.document.createElement('div')\n  div.appendChild(range.cloneContents())\n  return div.innerHTML\n}\n\nexport interface Coordinates {\n  top: number\n  left: number\n  bottom: number\n  right: number\n  width: number\n  height: number\n}\n\nexport const getSelectionCoordinates = (selection: Selection): Coordinates[] => {\n  const range = selection.getRangeAt(0) // Assuming you want coordinates of the first range\n\n  const rects = range.getClientRects()\n  const coordinates: Coordinates[] = []\n\n  for (let i = 0; i < rects.length; i++) {\n    const rect = rects[i]\n    coordinates.push({\n      top: rect.top,\n      left: rect.left,\n      bottom: rect.bottom,\n      right: rect.right,\n      width: rect.width,\n      height: rect.height\n    })\n  }\n\n  return coordinates\n}\n\nexport const createRangeFromCharacterRange = (element: Node, actualStartIndex: number, actualEndIndex: number): Range => {\n  const walker = document.createTreeWalker(element, NodeFilter.SHOW_TEXT, null)\n  let currentIndex = 0\n  let startNode: Text | null = null\n  let endNode: Text | null = null\n  let startOffset = 0\n  let endOffset = 0\n\n  while (walker.nextNode()) {\n    const node = walker.currentNode as Text\n    const nodeLength = node.nodeValue?.length || 0\n\n    if (currentIndex + nodeLength <= actualStartIndex) {\n      currentIndex += nodeLength\n      continue\n    }\n\n    if (!startNode) {\n      startNode = node\n      startOffset = actualStartIndex - currentIndex\n    }\n\n    if (currentIndex + nodeLength >= actualEndIndex) {\n      endNode = node\n      endOffset = actualEndIndex - currentIndex\n      break\n    }\n\n    currentIndex += nodeLength\n  }\n\n  if (startNode && endNode) {\n    const range = createRange()\n    range.setStart(startNode, startOffset)\n    range.setEnd(endNode, endOffset)\n    return range\n  } else {\n    throw new Error('Invalid character offsets.')\n  }\n}\n\nexport function findStartExcludingWhitespace({root, startContainer, startOffset, whitespacesOnTheLeft}: {\n  root: Node\n  startContainer: Node\n  startOffset: number\n  whitespacesOnTheLeft: number\n}): [Text, number] {\n  const isTextNode = startContainer.nodeType === textNode\n  if (!isTextNode) {\n    return findStartExcludingWhitespace({\n      root,\n      startContainer: startContainer.childNodes[startOffset],\n      startOffset: 0,\n      whitespacesOnTheLeft\n    })\n  }\n\n  const offsetAfterWhitespace = startOffset + whitespacesOnTheLeft\n  if ((startContainer as Text).length > offsetAfterWhitespace) {\n    return [startContainer as Text, offsetAfterWhitespace]\n  }\n\n  // Pass the root so that the iterator can traverse to siblings\n  const iterator = new NodeIterator(root)\n  // Set the position to the node which is selected\n  iterator.nextNode = startContainer as Text\n  // Iterate once to avoid returning self\n  iterator.getNextTextNode()\n\n  const container = iterator.getNextTextNode()\n  if (!container) {\n    // No more text nodes - use the end of the last text node\n    const previousTextNode = iterator.getPreviousTextNode()\n    if (!previousTextNode) throw new Error('No previous text node found')\n    return [previousTextNode, previousTextNode.length]\n  }\n\n  return findStartExcludingWhitespace({\n    root,\n    startContainer: container,\n    startOffset: 0,\n    whitespacesOnTheLeft: offsetAfterWhitespace - (startContainer as Text).length\n  })\n}\n\nexport function findEndExcludingWhitespace({root, endContainer, endOffset, whitespacesOnTheRight}: {\n  root: Node\n  endContainer: Node\n  endOffset: number\n  whitespacesOnTheRight: number\n}): [Text, number] {\n  const isTextNode = endContainer.nodeType === textNode\n  if (!isTextNode) {\n    const isFirstNode = !endContainer.childNodes[endOffset - 1]\n    const container = isFirstNode\n      ? endContainer.childNodes[endOffset]\n      : endContainer.childNodes[endOffset - 1]\n    let offset = 0\n    if (!isFirstNode) {\n      offset = container.nodeType === textNode\n        ? (container as Text).length\n        : container.childNodes.length\n    }\n    return findEndExcludingWhitespace({\n      root,\n      endContainer: container,\n      endOffset: offset,\n      whitespacesOnTheRight\n    })\n  }\n\n  const offsetBeforeWhitespace = endOffset - whitespacesOnTheRight\n  if (offsetBeforeWhitespace > 0) {\n    return [endContainer as Text, offsetBeforeWhitespace]\n  }\n\n  // Pass the root so that the iterator can traverse to siblings\n  const iterator = new NodeIterator(root)\n  // Set the position to the node which is selected\n  iterator.previous = endContainer as Text\n  // Iterate once to avoid returning self\n  iterator.getPreviousTextNode()\n\n  const container = iterator.getPreviousTextNode()\n  if (!container) {\n    // No more text nodes - use the start of the first text node\n    const nextNode = iterator.getNextTextNode()\n    if (!nextNode) throw new Error('No next text node found')\n    return [nextNode, 0]\n  }\n\n  return findEndExcludingWhitespace({\n    root,\n    endContainer: container,\n    endOffset: container.length,\n    whitespacesOnTheRight: whitespacesOnTheRight - endOffset\n  })\n}\n\n","import * as string from './util/string.js'\nimport * as nodeType from './node-type.js'\nimport config from './config.js'\nimport {closest} from './util/dom.js'\n\n/**\n * The parser module provides helper methods to parse html-chunks\n * manipulations and helpers for common tasks.\n * Provides DOM lookup helpers\n *\n * @module core\n * @submodule parser\n */\n\n/**\n * Get the editableJS host block of a node.\n *\n * @method getHost\n * @param {DOM Node}\n * @return {DOM Node}\n */\nexport function getHost (node: Node | any): HTMLElement | null {\n  node = (node.jquery ? node[0] : node)\n  // Check if the node itself is an editable element\n  if (node && (node as Element).classList && (node as Element).classList.contains(config.editableClass)) {\n    return node as HTMLElement\n  }\n  const result = closest(node, `.${config.editableClass}`)\n  if (result) return result\n  const contentEditableHost = closest(node, '[contenteditable=\"true\"]')\n  return contentEditableHost || null\n}\n\n/**\n * Get the index of a node so that\n * parent.childNodes[ getNodeIndex(node) ] would return the node again.\n *\n * @method getNodeIndex\n * @param {HTMLElement}\n */\nexport function getNodeIndex (node: Node): number {\n  let index = 0\n  let currentNode: Node | null = node.previousSibling\n  while (currentNode !== null) {\n    index++\n    currentNode = currentNode.previousSibling\n  }\n  return index\n}\n\n/**\n * Check if node contains text or element nodes\n * whitespace counts too!\n *\n * @method isVoid\n * @param {HTMLElement}\n */\nexport function isVoid (node: Node): boolean {\n  const childNodes = Array.from(node.childNodes)\n  for (const child of childNodes) {\n    if (child.nodeType === nodeType.textNode && !isVoidTextNode(child)) {\n      return false\n    }\n    if (child.nodeType === nodeType.elementNode) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * Check if node is a text node and completely empty without any whitespace\n *\n * @method isVoidTextNode\n * @param {HTMLElement}\n */\nexport function isVoidTextNode (node: Node): boolean {\n  return node.nodeType === nodeType.textNode && !node.nodeValue\n}\n\n/**\n * Check if node is a text node and contains nothing but whitespace\n *\n * @method isWhitespaceOnly\n * @param {HTMLElement}\n */\nexport function isWhitespaceOnly (node: Node): boolean {\n  return node.nodeType === nodeType.textNode && lastOffsetWithContent(node) === 0\n}\n\nexport function isLinebreak (node: Node): boolean {\n  return node.nodeType === nodeType.elementNode && (node as Element).tagName === 'BR'\n}\n\n/**\n * Returns the last offset where the cursor can be positioned to\n * be at the visible end of its container.\n * Currently works only for empty text nodes (not empty tags)\n *\n * @method isWhitespaceOnly\n * @param {HTMLElement}\n */\nexport function lastOffsetWithContent (elem: Node): number {\n  if (elem.nodeType === nodeType.textNode) {\n    const nodeValue = elem.nodeValue\n    if (!nodeValue) return 0\n    return string.trimRight(nodeValue).length\n  }\n\n  let lastOffset = 0\n  Array.from(elem.childNodes).reverse().every((node, index, nodes) => {\n    if (isWhitespaceOnly(node) || isLinebreak(node)) return true\n\n    lastOffset = nodes.length - index\n    return false\n  })\n  return lastOffset\n}\n\nexport function isBeginningOfHost (host: Node, container: Node, offset: number): boolean {\n  if (container === host) return isStartOffset(container, offset)\n\n  if (isStartOffset(container, offset)) {\n    // The index of the element simulates a range offset\n    // right before the element.\n    const offsetInParent = getNodeIndex(container)\n    const parentNode = container.parentNode\n    if (!parentNode) return false\n    return isBeginningOfHost(host, parentNode, offsetInParent)\n  }\n\n  return false\n}\n\nexport function isEndOfHost (host: Node, container: Node, offset: number): boolean {\n  if (container === host) return isEndOffset(container, offset)\n\n  if (isEndOffset(container, offset)) {\n    // The index of the element plus one simulates a range offset\n    // right after the element.\n    const offsetInParent = getNodeIndex(container) + 1\n    const parentNode = container.parentNode\n    if (!parentNode) return false\n    return isEndOfHost(host, parentNode, offsetInParent)\n  }\n\n  return false\n}\n\nexport function isStartOffset (container: Node, offset: number): boolean {\n  if (container.nodeType === nodeType.textNode) return offset === 0\n\n  if (container.childNodes.length === 0) return true\n\n  const firstChild = container.firstChild\n  if (\n    container.childNodes.length === 1 &&\n    firstChild &&\n    firstChild.nodeType === nodeType.elementNode &&\n    (firstChild as Element).getAttribute('data-editable') === 'remove'\n  ) return true\n\n  return container.childNodes[offset] === container.firstChild\n}\n\nexport function isEndOffset (container: Node, offset: number): boolean {\n  if (container.nodeType === nodeType.textNode) return offset === (container as Text).length\n\n  if (container.childNodes.length === 0) return true\n\n  if (offset > 0) return container.childNodes[offset - 1] === container.lastChild\n\n  return false\n}\n\nexport function isTextEndOfHost (host: Node, container: Node, offset: number): boolean {\n  if (container === host) return isTextEndOffset(container, offset)\n\n  if (isTextEndOffset(container, offset)) {\n    // The index of the element plus one simulates a range offset\n    // right after the element.\n    const offsetInParent = getNodeIndex(container) + 1\n    const parentNode = container.parentNode\n    if (!parentNode) return false\n    return isTextEndOfHost(host, parentNode, offsetInParent)\n  }\n\n  return false\n}\n\nexport function isTextEndOffset (container: Node, offset: number): boolean {\n  if (container.nodeType === nodeType.textNode) {\n    const nodeValue = container.nodeValue\n    if (!nodeValue) return offset === 0\n    const text = string.trimRight(nodeValue)\n    return offset >= text.length\n  }\n\n  if (container.childNodes.length === 0) return true\n\n  return offset >= lastOffsetWithContent(container)\n}\n\nexport function isSameNode (target: Node, source: Node): boolean {\n  let i, len, attr\n\n  if (target.nodeType !== source.nodeType) return false\n\n  if (target.nodeName !== source.nodeName) return false\n\n  if (target.nodeType !== 1 || source.nodeType !== 1) return true\n\n  const targetElem = target as Element\n  const sourceElem = source as Element\n\n  for (i = 0, len = targetElem.attributes.length; i < len; i++) {\n    attr = targetElem.attributes[i]\n    if (sourceElem.getAttribute(attr.name) !== attr.value) return false\n  }\n\n  return true\n}\n\n/**\n * Return the deepest last child of a node.\n *\n * @method  lastChild\n * @param  {HTMLElement} container The container to iterate on.\n * @return {HTMLElement}           The deepest last child in the container.\n */\nexport function lastChild (container: Node): Node {\n  return container.lastChild\n    ? lastChild(container.lastChild)\n    : container\n}\n\n/**\n * Obsolete version of {{#crossLink \"lastChild\"}}{{/crossLink}}.\n */\nexport function latestChild (container: Node): Node {\n  console.warn('Editable.js: Using obsolete function parser.latestCild(), use lastChild() instead')\n  return lastChild(container)\n}\n\n/**\n * Checks if a documentFragment has no children.\n * Fragments without children can cause errors if inserted into ranges.\n *\n * @method  isDocumentFragmentWithoutChildren\n * @param  {HTMLElement} DOM node.\n * @return {Boolean}\n */\nexport function isDocumentFragmentWithoutChildren (fragment: Node | null | undefined): boolean {\n  return !!(fragment &&\n    fragment.nodeType === nodeType.documentFragmentNode &&\n    fragment.childNodes.length === 0)\n}\n\n/**\n * Determine if an element behaves like an inline element.\n */\nexport function isInlineElement (window: Window, element: HTMLElement): boolean {\n  const styles = (element as any).currentStyle || window.getComputedStyle(element, '')\n  const display = styles.display\n  switch (display) {\n    case 'inline':\n    case 'inline-block':\n      return true\n    default:\n      return false\n  }\n}\n","import error from './util/error.js'\nimport * as nodeType from './node-type.js'\nimport {createRange, normalizeBoundaries} from './util/dom.js'\n\n/**\n * Inspired by the Selection save and restore module for Rangy by Tim Down\n * Saves and restores ranges using invisible marker elements in the DOM.\n */\nlet boundaryMarkerId = 0\n\n// (U+FEFF) zero width no-break space\nconst markerTextChar = '\\ufeff'\n\nfunction isSecondChildOfCommonAncestor (range: Range, rangeContainer: Node): boolean {\n  const parent = range.commonAncestorContainer\n  if (parent.nodeType === 3) return false // if we are on the text node it can't be a parent\n  const possibleChild = rangeContainer.parentElement\n  return possibleChild?.parentElement === parent\n}\n\nexport function insertRangeBoundaryMarker (range: Range, atStart: boolean): HTMLElement {\n  const container = range.commonAncestorContainer\n\n  // If ownerDocument is null the commonAncestorContainer is window.document\n  if (!container.ownerDocument) {\n    error('Cannot save range: range is empty')\n    throw new Error('Cannot save range: range is empty')\n  }\n\n  const ownerDoc = container.ownerDocument\n  if (!ownerDoc.defaultView) {\n    error('Cannot save range: document has no defaultView')\n    throw new Error('Cannot save range: document has no defaultView')\n  }\n\n  // Create the marker element containing a single\n  // invisible character using DOM methods and insert it\n  const doc = ownerDoc.defaultView.document\n  const markerEl = doc.createElement('span')\n  markerEl.id = `editable-range-boundary-${++boundaryMarkerId}`\n  markerEl.setAttribute('data-editable', 'remove')\n  markerEl.style.lineHeight = '0'\n  markerEl.style.display = 'none'\n  markerEl.appendChild(doc.createTextNode(markerTextChar))\n\n  // This logic can expand the selection by inserting the marker before the element\n  // of the start or end container. In some cases this prevents breaking up existing tags.\n  // The solution is not perfect, but has been here a while.\n  // And it is somewhat inconsistent as it check if the container is a second grade child\n  // of the common ancestor.\n  // It can help to prevent the nuking of e.g. comments when formatting like bold\n  // is applied.\n  const directlyBeforeFormatTag = atStart && isSecondChildOfCommonAncestor(range, range.startContainer)\n  const directlyAfterFormatTag = !atStart && isSecondChildOfCommonAncestor(range, range.endContainer)\n  if (directlyBeforeFormatTag) {\n    const startParentElem = range.startContainer.parentElement\n    if (startParentElem && startParentElem.parentElement) {\n      startParentElem.parentElement.insertBefore(markerEl, startParentElem)\n    }\n  } else if (directlyAfterFormatTag) {\n    const endParentElem = range.endContainer.parentElement\n    if (endParentElem && endParentElem.parentElement) {\n      endParentElem.parentElement.insertBefore(markerEl, endParentElem.nextSibling)\n    }\n  } else {\n    // Clone the Range and collapse to the appropriate boundary point\n    const boundaryRange = range.cloneRange()\n    boundaryRange.collapse(atStart)\n    boundaryRange.insertNode(markerEl)\n  }\n\n  return markerEl\n}\n\nexport function setRangeBoundary (host: HTMLElement, range: Range, markerId: string, atStart: boolean): void {\n  const markerEl = getMarker(host, markerId)\n  if (!markerEl) return console.log('Marker element has been removed. Cannot restore selection.')\n  range[atStart ? 'setStartBefore' : 'setEndBefore'](markerEl)\n  markerEl.remove()\n}\n\nexport interface RangeInfo {\n  markerId?: string\n  startMarkerId?: string\n  endMarkerId?: string\n  collapsed: boolean\n  host?: HTMLElement\n  restored?: boolean\n}\n\nexport function save (range: Range): RangeInfo {\n  let rangeInfo: RangeInfo\n  let startEl: HTMLElement | undefined\n  let endEl: HTMLElement\n\n  // insert markers\n  if (range.collapsed) {\n    endEl = insertRangeBoundaryMarker(range, false)\n    rangeInfo = {\n      markerId: endEl.id,\n      collapsed: true\n    }\n  } else {\n    endEl = insertRangeBoundaryMarker(range, false)\n    startEl = insertRangeBoundaryMarker(range, true)\n\n    rangeInfo = {\n      startMarkerId: startEl.id,\n      endMarkerId: endEl.id,\n      collapsed: false\n    }\n  }\n\n  // Adjust each range's boundaries to lie between its markers\n  if (range.collapsed) {\n    range.setStartBefore(endEl)\n    range.collapse(true)\n  } else {\n    range.setEndBefore(endEl)\n    if (startEl) {\n      range.setStartAfter(startEl)\n    }\n  }\n\n  return rangeInfo\n}\n\nexport function restore (host: HTMLElement, rangeInfo: RangeInfo): Range | undefined {\n  if (rangeInfo.restored) return\n\n  const range = createRange()\n  if (rangeInfo.collapsed) {\n    if (!rangeInfo.markerId) {\n      console.log('Marker ID is missing. Cannot restore selection.')\n      return undefined\n    }\n    const markerEl = getMarker(host, rangeInfo.markerId)\n    if (markerEl) {\n      markerEl.style.display = 'inline'\n      const previousNode = markerEl.previousSibling\n\n      // Workaround for rangy issue 17\n      if (previousNode && previousNode.nodeType === nodeType.textNode) {\n        markerEl.remove()\n        range.setStart(previousNode, (previousNode as Text).length)\n      } else {\n        range.setStartBefore(markerEl)\n        range.collapse(true)\n        markerEl.remove()\n      }\n    } else {\n      console.log('Marker element has been removed. Cannot restore selection.')\n    }\n  } else {\n    if (rangeInfo.startMarkerId && rangeInfo.endMarkerId) {\n      setRangeBoundary(host, range, rangeInfo.startMarkerId, true)\n      setRangeBoundary(host, range, rangeInfo.endMarkerId, false)\n    } else {\n      console.log('Marker IDs are missing. Cannot restore selection.')\n      return undefined\n    }\n  }\n\n  normalizeBoundaries(range)\n  return range\n}\n\nfunction getMarker (host: HTMLElement, id: string): HTMLElement | null {\n  return host.querySelector(`#${id}`)\n}\n","import * as nodeType from './node-type.js'\nimport * as rangeSaveRestore from './range-save-restore.js'\nimport * as parser from './parser.js'\nimport * as string from './util/string.js'\nimport {createElement, createRange, getNodes, normalizeBoundaries, splitBoundaries, containsNodeText} from './util/dom.js'\nimport config from './config.js'\n\nfunction restoreRange (host: HTMLElement, range: Range, func: () => void): Range | undefined {\n  const savedRange = rangeSaveRestore.save(range)\n  func()\n  return rangeSaveRestore.restore(host, savedRange)\n}\n\nconst zeroWidthSpace = /\\u200B/g\nconst zeroWidthNonBreakingSpace = /\\uFEFF/g\nconst whitespaceExceptSpace = /[^\\S ]/g\n\nconst everythingWhitespace = /^\\s+$/\nconst leadingWhitespace = /^\\s+/\nconst trailingWhitespace = /\\s+$/\n\n// Clean up the Html.\nexport function tidyHtml (element: HTMLElement): void {\n  // if (element.normalize) element.normalize()\n  normalizeTags(element)\n}\n\n// Remove empty tags and merge consecutive tags (they must have the same\n// attributes).\n//\n// @method normalizeTags\n// @param  {HTMLElement} element The element to process.\nexport function normalizeTags (element: HTMLElement): void {\n  const fragment = document.createDocumentFragment()\n\n  // Remove line breaks at the beginning of a content block\n  removeWhitespaces(element, 'firstChild')\n\n  // Remove line breaks at the end of a content block\n  removeWhitespaces(element, 'lastChild')\n\n  const nodesToProcess = Array.from(element.childNodes)\n  const processedIndices = new Set<number>()\n\n  for (let i = 0; i < nodesToProcess.length; i++) {\n    if (processedIndices.has(i)) continue\n    \n    const node = nodesToProcess[i]\n    \n    // skip empty tags, so they'll get removed\n    if (node.nodeName !== 'BR' && !node.textContent) continue\n\n    if (node.nodeType === nodeType.elementNode && node.nodeName !== 'BR') {\n      // Create a merged node starting with this node\n      const mergedNode = node.cloneNode(false) as HTMLElement\n      \n      // Copy children from the first node\n      for (const child of Array.from(node.childNodes)) {\n        mergedNode.appendChild(child.cloneNode(true))\n      }\n      \n      // Merge consecutive same tags\n      let j = i + 1\n      while (j < nodesToProcess.length) {\n        const sibling = nodesToProcess[j]\n        if (!parser.isSameNode(sibling, node)) break\n        \n        // Copy children from the consecutive sibling\n        for (const siblingChild of Array.from(sibling.childNodes)) {\n          mergedNode.appendChild(siblingChild.cloneNode(true))\n        }\n        \n        processedIndices.add(j)\n        sibling.remove()\n        j++\n      }\n      \n      // Recursively normalize the merged node\n      normalizeTags(mergedNode)\n      \n      fragment.appendChild(mergedNode)\n    } else {\n      fragment.appendChild(node.cloneNode(true))\n    }\n  }\n\n  while (element.firstChild) element.removeChild(element.firstChild)\n\n  element.appendChild(fragment)\n}\n\nexport function normalizeWhitespace (text: string): string {\n  return text.replace(whitespaceExceptSpace, ' ')\n}\n\n// Clean the element from character, tags, etc... added by the plugin logic.\n//\n// @method cleanInternals\n// @param  {HTMLElement} element The element to process.\nexport function cleanInternals (element: HTMLElement): void {\n  // Uses extract content for simplicity. A custom method\n  // that does not clone the element could be faster if needed.\n  element.innerHTML = extractContent(element, true)\n}\n\n// Extracts the content from a host element.\n// Does not touch or change the host. Just returns\n// the content and removes elements marked for removal by editable.\n//\n// @param {DOM node or document fragment} Element where to clean out the innerHTML.\n// If you pass a document fragment it will be empty after this call.\n// @param {Boolean} Flag whether to keep ui elements like spellchecking highlights.\n// @returns {String} The cleaned innerHTML of the passed element or document fragment.\nexport function extractContent (element: HTMLElement | DocumentFragment | null | undefined, keepUiElements?: boolean): string {\n  if (!element) return ''\n  const innerHtml = (element.nodeType === nodeType.documentFragmentNode\n    ? getInnerHtmlOfFragment(element as DocumentFragment)\n    : (element as HTMLElement).innerHTML\n  )\n    .replace(zeroWidthNonBreakingSpace, '') // Used for forcing inline elements to have a height\n    .replace(zeroWidthSpace, '<br>') // Used for cross-browser newlines\n\n  const clone = document.createElement('div')\n  clone.innerHTML = innerHtml\n  unwrapInternalNodes(clone, keepUiElements)\n\n  // Remove line breaks at the beginning of a content block\n  removeWhitespaces(clone, 'firstChild')\n\n  // Remove line breaks at the end of a content block\n  removeWhitespaces(clone, 'lastChild')\n\n  return clone.innerHTML\n}\n\nexport function getInnerHtmlOfFragment (documentFragment: DocumentFragment | null | undefined): string {\n  if (!documentFragment || !documentFragment.childNodes) {\n    return ''\n  }\n  const div = document.createElement('div')\n  // JSDOM doesn't support appendChild with DocumentFragment directly\n  // Clone and append each child instead\n  const children = Array.from(documentFragment.childNodes)\n  for (const child of children) {\n    div.appendChild(child.cloneNode(true))\n  }\n  return div.innerHTML\n}\n\n// Create a document fragment from an html string\n// @param {String} e.g. 'some html <span>text</span>.'\nexport function createFragmentFromString (htmlString: string): DocumentFragment {\n  const wrapper = document.createElement('div')\n  wrapper.innerHTML = htmlString\n\n  const fragment = document.createDocumentFragment()\n  while (wrapper.firstChild) fragment.appendChild(wrapper.firstChild)\n  return fragment\n}\n\nexport function adoptElement (node: Node | string, doc: Document): HTMLElement {\n  if (typeof node === 'string') {\n    // If node is a string (selector), query for it\n    const element = doc.querySelector(node)\n    if (!element) throw new Error(`Element not found: ${node}`)\n    return element as HTMLElement\n  }\n  if (node.ownerDocument !== doc) {\n    return doc.adoptNode(node) as HTMLElement\n  }\n  return node as HTMLElement\n}\n\n// It will return a fragment with the cloned contents of the range\n// without the commonAncestorElement.\n//\n// @param {Range}\n// @return {DocumentFragment}\nexport function cloneRangeContents (range: Range): DocumentFragment {\n  const rangeFragment = range.cloneContents()\n  const parent = rangeFragment.childNodes[0]\n  const fragment = document.createDocumentFragment()\n  while (parent.childNodes.length) fragment.appendChild(parent.childNodes[0])\n  return fragment\n}\n\nfunction removeWhitespaces (node: HTMLElement, type: 'firstChild' | 'lastChild', firstCall = true): void {\n  let elem\n  // loop through all children:\n  // from left to right if type = 'firstChild',\n  // from right to left if type = 'lastChild'\n  while ((elem = node[type])) {\n    if (elem.nodeType === nodeType.textNode) {\n      // Just remove text nodes if they consist only of whitespace\n      if (elem.textContent && everythingWhitespace.test(elem.textContent)) node.removeChild(elem)\n      else break\n    } else if (elem.nodeName === 'BR') {\n      elem.remove()\n    } else {\n      // For element nodes (e.g. <strong> tags), we repeat the logic recursively\n      // to remove empty text nodes or <br> tags.\n      if ((elem as HTMLElement)[type]) removeWhitespaces(elem as HTMLElement, type, false)\n      break\n    }\n  }\n\n  // Text nodes with leading/trailing whitespace can be trimmed if config allows.\n  // We only do it to the outermost text node. Once a text was wrapped in\n  // another element, we preserve the whitespace.\n  if (!firstCall) return\n  elem = node[type]\n  if (elem?.nodeType !== nodeType.textNode) return\n  // Remove whitespaces at the end or start of a block with content\n  //   e.g. '  Hello world' > 'Hello World'\n  if (config.trimLeadingAndTrailingWhitespaces && elem.textContent) {\n    elem.textContent = elem.textContent.replace(type.startsWith('last') ? trailingWhitespace : leadingWhitespace, '')\n  }\n}\n\n// Remove elements that were inserted for internal or user interface purposes\n//\n// @param {DOM node}\n// @param {Boolean} whether to keep ui elements like spellchecking highlights\n// Currently:\n// - Saved ranges\nexport function unwrapInternalNodes (sibling: Node | null, keepUiElements?: boolean): void {\n  while (sibling) {\n    const nextSibling = sibling.nextSibling\n\n    if (sibling.nodeType !== nodeType.elementNode) {\n      sibling = nextSibling\n      continue\n    }\n\n    const elem = sibling as Element\n    const attr = elem.getAttribute('data-editable')\n\n    if (elem.firstChild) unwrapInternalNodes(elem.firstChild, keepUiElements)\n\n    if (attr === 'remove' || (attr === 'ui-remove' && !keepUiElements)) {\n      elem.remove()\n    } else if (attr === 'unwrap' || (attr === 'ui-unwrap' && !keepUiElements)) {\n      unwrap(elem as HTMLElement)\n    }\n\n    sibling = nextSibling\n  }\n}\n\n// Get all tags that start or end inside the range\nexport function getTags (host: HTMLElement, range: Range, filterFunc?: ((node: Node) => boolean) | null): Node[] {\n  const innerTags = getInnerTags(range, filterFunc)\n  const ancestorTags = getAncestorTags(host, range, filterFunc)\n  return innerTags.concat(ancestorTags)\n}\n\n// Get all ancestor tags that start or end inside the range\nexport function getAncestorTags (host: HTMLElement, range: Range, filterFunc?: ((node: Node) => boolean) | null): Node[] {\n  const tags: Node[] = []\n  let node: Node | null = range.commonAncestorContainer\n  while (node && node !== host) {\n    if (!filterFunc || filterFunc(node)) tags.push(node)\n    node = node.parentNode\n  }\n\n  return tags\n}\n\nexport function getTagsByName (host: HTMLElement, range: Range, tagName: string): Node[] {\n  return getTags(host, range, (node) => {\n    return node.nodeName.toUpperCase() === tagName.toUpperCase()\n  })\n}\n\nexport function getTagsByNameAndAttributes (host: HTMLElement, range: Range, elem: HTMLElement): Node[] {\n  return getTags(host, range, (node) => {\n    return node.nodeName.toUpperCase() === elem.nodeName.toUpperCase() &&\n      node.nodeType === nodeType.elementNode &&\n      areSameAttributes((node as Element).attributes, elem.attributes)\n  })\n}\n\nexport function areSameAttributes (attrs1: NamedNodeMap, attrs2: NamedNodeMap): boolean {\n  if (attrs1.length !== attrs2.length) return false\n\n  for (let i = 0; i < attrs1.length; i++) {\n    const attr1 = attrs1[i]\n    const attr2 = attrs2.getNamedItem(attr1.name)\n    if (!attr2 || attr2.value !== attr1.value) return false\n  }\n\n  return true\n}\n\n// Get all tags that start or end inside the range\nexport function getInnerTags (range: Range, filterFunc?: ((node: Node) => boolean) | null): Node[] {\n  return getNodes(range, [nodeType.elementNode], filterFunc)\n}\n\n// Get all tags whose text is completely within the current selection.\nexport function getContainedTags (range: Range, filterFunc?: ((node: Node) => boolean) | null): Node[] {\n  return getNodes(range, [nodeType.elementNode], filterFunc)\n    .filter(elem => containsNodeText(range, elem))\n}\n\n// Transform an array of elements into an array\n// of tagnames in uppercase\n//\n// @return example: ['STRONG', 'B']\nexport function getTagNames (elements: Node[] = []): string[] {\n  return elements.map((element: Node) => element.nodeName)\n}\n\nexport function isAffectedBy (host: HTMLElement, range: Range, tagName: string): boolean {\n  return getTags(host, range, null)\n    .some((elem) => elem.nodeName === tagName.toUpperCase())\n}\n\n// select a whole element\nexport function selectNodeContents (element: HTMLElement): Range {\n  const range = createRange()\n  range.selectNodeContents(element)\n  return range\n}\n\nfunction intersectsRange (range1: Range, range2: Range): boolean {\n  return range1.compareBoundaryPoints(Range.END_TO_START, range2) === -1 &&\n    range2.compareBoundaryPoints(Range.END_TO_START, range1) === -1\n}\n\n// Check if the range selects all of the elements contents,\n// not less or more.\n//\n// @param visible: Only compare visible text. That way it does not\n//   matter if the user selects an additional whitespace or not.\nexport function isExactSelection (range: Range, elem: HTMLElement | any, visible?: boolean): boolean {\n  const elemRange = createRange()\n  elemRange.selectNodeContents(elem)\n\n  if (!intersectsRange(range, elemRange)) return false\n\n  let rangeText = range.toString()\n  let elemText = (elem.jquery ? elem[0] : elem).textContent\n\n  if (visible) {\n    rangeText = string.trim(rangeText)\n    elemText = string.trim(elemText)\n  }\n\n  return rangeText !== '' && rangeText === elemText\n}\n\nexport function expandTo (host: HTMLElement, range: Range, elem: HTMLElement): Range {\n  range.selectNodeContents(elem)\n  return range\n}\n\nexport function toggleTag (host: HTMLElement, range: Range, elem: HTMLElement): Range {\n  const elems = getTagsByNameAndAttributes(host, range, elem)\n\n  if (elems.length === 1 &&\n    elems[0].nodeType === nodeType.elementNode &&\n    isExactSelection(range, elems[0] as HTMLElement, true)) {\n    const result = removeFormattingElem(host, range, elem)\n    if (!result) return range\n    return result\n  }\n\n  return forceWrap(host, range, elem)\n}\n\nexport function isWrappable (range: Range): boolean {\n  return canSurroundContents(range)\n}\n\nexport function forceWrap (host: HTMLElement, range: Range, elem: HTMLElement): Range {\n  let restoredRange = restoreRange(host, range, () => {\n    nukeElem(host, range, elem)\n  })\n\n  // remove all tags if the range is not wrappable\n  if (!restoredRange || !isWrappable(restoredRange)) {\n    if (!restoredRange) return range\n    restoredRange = restoreRange(host, restoredRange, () => {\n      nuke(host, restoredRange!, null)\n    })\n    if (!restoredRange) return range\n  }\n\n  wrap(restoredRange, elem)\n  return restoredRange\n}\n\nexport function wrap (range: Range, elem: HTMLElement | string): void {\n  if (!isWrappable(range)) {\n    console.log('content.wrap(): can not surround range')\n    return\n  }\n\n  let element: HTMLElement | null\n  if (typeof elem === 'string') {\n    element = createElement(elem)\n    if (!element) {\n      console.log('content.wrap(): could not create element')\n      return\n    }\n  } else {\n    element = elem\n  }\n  range.surroundContents(element)\n}\n\nexport function unwrap (elem: HTMLElement | any): void {\n  elem = (elem as any).jquery ? (elem as any)[0] : elem\n  const parent = elem.parentNode\n  if (!parent) return\n  while (elem.firstChild) parent.insertBefore(elem.firstChild, elem)\n  parent.removeChild(elem)\n}\n\nexport function removeFormattingElem (host: HTMLElement, range: Range, elem: HTMLElement): Range | undefined {\n  return restoreRange(host, range, () => {\n    nukeElem(host, range, elem)\n  })\n}\n\nexport function removeFormatting (host: HTMLElement, range: Range, selector: string | null): Range | undefined {\n  return restoreRange(host, range, () => {\n    nuke(host, range, selector)\n  })\n}\n\n// Unwrap all tags this range is affected by.\n// Can also affect content outside of the range.\nexport function nuke (host: HTMLElement, range: Range, selector: string | null): void {\n  getTags(host, range, null).forEach((elem) => {\n    if (elem.nodeName.toUpperCase() !== 'BR' && (!selector || (elem as Element).matches(selector))) {\n      unwrap(elem as HTMLElement)\n    }\n  })\n}\n\n// Unwrap all tags this range is affected by.\n// Can also affect content outside of the range.\nexport function nukeElem (host: HTMLElement, range: Range, node: HTMLElement | null): void {\n  getTags(host, range, null).forEach((elem) => {\n    if (elem.nodeName.toUpperCase() !== 'BR' && (!node ||\n        (elem.nodeName.toUpperCase() === node.nodeName.toUpperCase() &&\n          areSameAttributes((elem as Element).attributes, node.attributes)))) {\n      unwrap(elem as HTMLElement)\n    }\n  })\n}\n\n// Insert a single character (or string) before or after\n// the range.\nexport function insertCharacter (range: Range, character: string, atStart: boolean): void {\n  const insertEl = document.createTextNode(character)\n  const boundaryRange = range.cloneRange()\n  boundaryRange.collapse(atStart)\n  boundaryRange.insertNode(insertEl)\n  range[atStart ? 'setStartBefore' : 'setEndAfter'](insertEl)\n  normalizeBoundaries(range)\n}\n\n// Surround the range with characters like start and end quotes.\n//\n// @method surround\nexport function surround (host: HTMLElement, range: Range, startCharacter: string, endCharacter?: string): Range {\n  insertCharacter(range, endCharacter || startCharacter, false)\n  insertCharacter(range, startCharacter, true)\n  return range\n}\n\n// Removes a character from the text within a range.\n//\n// @method deleteCharacter\nexport function deleteCharacter (host: HTMLElement, range: Range, character: string): Range {\n  if (!containsString(range, character)) return range\n\n  // check for selection.rangeCount > 0 ?\n  const selection = window.getSelection()\n  if (selection && selection.rangeCount > 0) splitBoundaries(range)\n  const restoredRange = restoreRange(host, range, () => {\n    getNodes(range, [nodeType.textNode], (node: Node) => {\n      return (node as Text).nodeValue !== null && (node as Text).nodeValue!.indexOf(character) >= 0\n    })\n      .forEach((node) => {\n        const textNode = node as Text\n        if (textNode.nodeValue) {\n          // Use replace with global regex instead of replaceAll for better compatibility\n          textNode.nodeValue = textNode.nodeValue.replace(new RegExp(character.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'g'), '')\n        }\n      })\n  })\n\n  if (restoredRange) {\n    normalizeBoundaries(restoredRange)\n    return restoredRange\n  }\n  return range\n}\n\nexport function containsString (range: Range, str: string): boolean {\n  return range.toString().indexOf(str) >= 0\n}\n\n// Unwrap all tags this range is affected by.\n// Can also affect content outside of the range.\nexport function nukeTag (host: HTMLElement, range: Range, tagName: string): void {\n  getTags(host, range, null).forEach((elem) => {\n    if (elem.nodeName.toUpperCase() === tagName.toUpperCase()) unwrap(elem as HTMLElement)\n  })\n}\n\nfunction createNodeIterator (root: Node, filter: ((node: Node) => boolean) | null): {next: () => Node | null} {\n  let currentNode: Node | null = root\n  let previousNode: Node | null = null\n\n  function nextNode () {\n    if (!currentNode) {\n      return null\n    }\n\n    if (currentNode.firstChild && previousNode !== currentNode.firstChild) {\n      previousNode = currentNode\n      currentNode = currentNode.firstChild\n    } else if (currentNode.nextSibling) {\n      previousNode = currentNode\n      currentNode = currentNode.nextSibling\n    } else {\n      let parent = currentNode.parentNode\n      while (parent && parent !== root) {\n        if (parent.nextSibling) {\n          previousNode = currentNode = parent.nextSibling\n          break\n        }\n        parent = parent.parentNode\n      }\n      if (!parent || parent === root) {\n        previousNode = currentNode = null\n      }\n    }\n\n    return currentNode\n  }\n\n  return {\n    next: nextNode\n  }\n}\n\nfunction isNodeFullyContained (node: Node, range: Range): boolean {\n  const nodeRange = document.createRange()\n  nodeRange.selectNodeContents(node)\n  return range.compareBoundaryPoints(Range.START_TO_START, nodeRange) <= 0 &&\n         range.compareBoundaryPoints(Range.END_TO_END, nodeRange) >= 0\n}\n\nfunction canSurroundContents (range: Range): boolean {\n  if (!range || !range.startContainer || !range.endContainer) {\n    return false\n  }\n\n  if (range.startContainer === range.endContainer) return true\n\n  // Create a custom node iterator for the common ancestor container\n  const iterator = createNodeIterator(range.commonAncestorContainer, function (node) {\n    return range.isPointInRange(node, 0)\n  })\n\n  let currentNode\n  let boundariesInvalid = false\n\n  while ((currentNode = iterator.next())) {\n    if (currentNode.nodeType === Node.ELEMENT_NODE) {\n      if (!isNodeFullyContained(currentNode, range)) {\n        boundariesInvalid = true\n        break\n      }\n    }\n  }\n\n  return !boundariesInvalid\n}\n","import config from './config.js'\nimport * as content from './content.js'\n\nlet nextBlockId = 1\nconst state: Record<string, any> = {}\n\nexport const next = getSibling('nextElementSibling')\nexport const previous = getSibling('previousElementSibling')\n\nexport function init (elem: HTMLElement, {normalize, plainText, shouldSpellcheck}: {normalize?: boolean, plainText?: boolean, shouldSpellcheck?: boolean} = {}) {\n  setBlockId(elem)\n\n  elem.setAttribute('contenteditable', 'true')\n  elem.setAttribute('spellcheck', String(Boolean(shouldSpellcheck)))\n  elem.setAttribute('data-plaintext', String(Boolean(plainText)))\n\n  elem.classList.remove(config.editableDisabledClass)\n  elem.classList.add(config.editableClass)\n\n  if (normalize) content.tidyHtml(elem)\n}\n\n\nexport function disable (elem: HTMLElement): void {\n  elem.removeAttribute('contenteditable')\n  elem.removeAttribute('spellcheck')\n  elem.removeAttribute('data-plaintext')\n\n  setState(elem, undefined)\n\n  elem.classList.remove(config.editableClass)\n  elem.classList.add(config.editableDisabledClass)\n}\n\nexport function isPlainTextBlock (elem: HTMLElement): boolean {\n  return elem.getAttribute('data-plaintext') === 'true'\n}\n\nexport function setBlockId (elem: HTMLElement): void {\n  if (!elem.hasAttribute('data-editable')) {\n    elem.setAttribute('data-editable', `id-${nextBlockId}`)\n    nextBlockId += 1\n  }\n}\n\n\nexport function getState (elem: HTMLElement): any {\n  if (elem.hasAttribute('data-editable')) {\n    const id = elem.getAttribute('data-editable')\n    if (id) return state[id]\n  }\n}\n\n\nexport function setState (elem: HTMLElement, data: any): void {\n  if (elem.hasAttribute('data-editable')) {\n    const id = elem.getAttribute('data-editable')\n    if (id) state[id] = data\n  }\n}\n\n\n// Helpers\n// -------\n\nfunction getSibling (type: 'nextElementSibling' | 'previousElementSibling') {\n  return function (element: HTMLElement): HTMLElement | null {\n    const sibling = element[type] as HTMLElement | null\n    return sibling && sibling.getAttribute('contenteditable')\n      ? sibling\n      : null\n  }\n}\n","const doubleQuotePairs = [\n  ['«', '»'], // ch german, french\n  ['»', '«'], // danish\n  ['\"', '\"'], // danish, not specified\n  ['“', '”'], // english US\n  ['”', '”'], // swedish\n  ['“', '“'], // chinese simplified\n  ['„', '“'] // german\n]\nconst singleQuotePairs = [\n  ['‘', '’'], // english UK\n  ['‹', '›'], // ch german, french\n  ['‚', '‘'], // german\n  ['’', '’'], // swedish\n  ['›', '‹'], // danish\n  [`'`, `'`], // danish, not specified\n  [`‘`, `’`] // chinese simplified\n]\n\nconst apostrophe = [\n  '’', // german\n  `'` // default\n]\nconst quotesRegex = /([‘’‹›‚'«»\"“”„])(?![^<]*?>)/g\n// whitespace end of tag, or any dash (normal, en or em-dash)\n// or any opening double quote\nconst beforeOpeningQuote = /\\s|[>\\-–—«»”\"“„]/\n\n// whitespace begin of tag, or any dash (normal, en or em-dash)\n// or any closing quote, or any punctuation\nconst afterClosingQuote = /\\s|[<\\-–—«»”\"“‘’‹›'.;?:,]/\n\ninterface QuoteMatch {\n  char: string\n  before: string\n  after: string\n  replace?: string\n}\n\ninterface Replacements {\n  quotes?: string[]\n  singleQuotes?: string[]\n  apostrophe?: string\n}\n\nlet replacements: Replacements\n\nexport function replaceAllQuotes (str: string, replaceQuotesRules?: Replacements): string {\n  replacements = replaceQuotesRules || {}\n  replacements.quotes = replacements.quotes || [undefined as any, undefined as any]\n  replacements.singleQuotes = replacements.singleQuotes || [undefined as any, undefined as any]\n\n  const matches = getAllQuotes(str)\n  if (matches.length > 0) {\n    replaceMatchedQuotes(matches, 0)\n    return replaceExistingQuotes(str, matches)\n  }\n\n  return str\n}\n\nfunction replaceMatchedQuotes (matches: QuoteMatch[], position: number): void {\n  while (position < matches.length) {\n    const closingTag = findClosingQuote(matches, position)\n\n    if (closingTag) {\n      matches[position].replace = closingTag.type === 'double'\n        ? replacements.quotes?.[0]\n        : replacements.singleQuotes?.[0]\n\n      matches[closingTag.position].replace = closingTag.type === 'double'\n        ? replacements.quotes?.[1]\n        : replacements.singleQuotes?.[1]\n\n      if (closingTag.position !== position + 1) {\n        const nestedMatches = matches.slice(position + 1, closingTag.position)\n        if (nestedMatches && nestedMatches.length > 0) {\n          replaceMatchedQuotes(nestedMatches, 0)\n        }\n      }\n\n      position = closingTag.position + 1\n    } else {\n      matches[position].replace = replaceApostrophe(matches[position].char)\n      position += 1\n    }\n  }\n}\n\nfunction findClosingQuote (matches: QuoteMatch[], position: number): {position: number, type: 'single' | 'double'} | undefined {\n  if (position === matches.length - 1) return undefined\n  const current = matches[position]\n  const openingQuote = current.char\n\n  if (current.before && !beforeOpeningQuote.test(current.before)) return undefined\n\n  const possibleClosingSingleQuotes = getPossibleClosingQuotes(openingQuote, singleQuotePairs)\n  const possibleClosingDoubleQuotes = getPossibleClosingQuotes(openingQuote, doubleQuotePairs)\n  // Also allow straight quotes as potential closers when we have quote pairs (they can be converted)\n  // But only for the same quote type (straight double quote for double quotes, straight single quote for single quotes)\n  let allPossibleDoubleClosers = possibleClosingDoubleQuotes\n  let allPossibleSingleClosers = possibleClosingSingleQuotes\n  const hasStraightQuoteFallback = (possibleClosingDoubleQuotes.length > 0 && !possibleClosingDoubleQuotes.includes('\"')) ||\n    (possibleClosingSingleQuotes.length > 0 && !possibleClosingSingleQuotes.includes(\"'\"))\n  // Only add straight double quote if this is a double quote type (has double quote pairs defined)\n  if (possibleClosingDoubleQuotes.length > 0 && !possibleClosingDoubleQuotes.includes('\"')) {\n    allPossibleDoubleClosers = [...possibleClosingDoubleQuotes, '\"']\n  }\n  // Only add straight single quote if this is a single quote type (has single quote pairs defined)\n  if (possibleClosingSingleQuotes.length > 0 && !possibleClosingSingleQuotes.includes(\"'\")) {\n    allPossibleSingleClosers = [...possibleClosingSingleQuotes, \"'\"]\n  }\n  \n  // Check if opening quote is itself a straight quote - if so, prefer outermost match\n  const isStraightQuote = openingQuote === '\"' || openingQuote === \"'\"\n  \n  // Prefer exact pair matches over straight quote fallbacks\n  // For straight quote fallbacks or straight quotes themselves, prefer outermost match to avoid incorrect nested matching\n  let bestStraightQuoteMatch: {position: number, type: 'single' | 'double'} | undefined\n  \n  for (let i = position + 1; i < matches.length; i++) {\n    const candidateChar = matches[i].char\n    const candidateAfter = matches[i].after\n    const passesAfterCheck = (candidateAfter && afterClosingQuote.test(candidateAfter)) || !candidateAfter\n    \n    if (passesAfterCheck) {\n      if (allPossibleSingleClosers.includes(candidateChar)) {\n        // Check if this is an exact pair match (not a straight quote fallback)\n        const isExactMatch = possibleClosingSingleQuotes.includes(candidateChar)\n        // For straight quotes themselves, always prefer outermost match\n        if (isExactMatch && !isStraightQuote) {\n          // Return immediately for exact pair matches (except for straight quotes)\n          return {position: i, type: 'single'}\n        }\n        // For straight quote fallbacks or straight quotes themselves, continue searching for the outermost match\n        if (hasStraightQuoteFallback || isStraightQuote) {\n          if (!bestStraightQuoteMatch || (bestStraightQuoteMatch.type === 'single' && i > bestStraightQuoteMatch.position)) {\n            bestStraightQuoteMatch = {position: i, type: 'single'}\n          }\n        } else {\n          return {position: i, type: 'single'}\n        }\n      }\n      if (allPossibleDoubleClosers.includes(candidateChar)) {\n        // Check if this is an exact pair match (not a straight quote fallback)\n        const isExactMatch = possibleClosingDoubleQuotes.includes(candidateChar)\n        // For straight quotes themselves, always prefer outermost match\n        if (isExactMatch && !isStraightQuote) {\n          // Return immediately for exact pair matches (except for straight quotes)\n          return {position: i, type: 'double'}\n        }\n        // For straight quote fallbacks or straight quotes themselves, continue searching for the outermost match\n        if (hasStraightQuoteFallback || isStraightQuote) {\n          if (!bestStraightQuoteMatch || (bestStraightQuoteMatch.type === 'double' && i > bestStraightQuoteMatch.position)) {\n            bestStraightQuoteMatch = {position: i, type: 'double'}\n          }\n        } else {\n          return {position: i, type: 'double'}\n        }\n      }\n    }\n  }\n  // Return the outermost straight quote match if we found one\n  if (bestStraightQuoteMatch) {\n    return bestStraightQuoteMatch\n  }\n  return undefined\n}\n\nfunction getPossibleClosingQuotes (openingQuote: string, pairs: string[][]): string[] {\n  return pairs.filter((quotePair: string[]) => quotePair[0] === openingQuote).map((quotePair: string[]) => quotePair[1])\n}\n\n\nfunction replaceApostrophe (quote: string): string | undefined {\n  if (apostrophe.includes(quote)) {\n    return replacements.apostrophe\n  }\n  return undefined\n}\n\nfunction getAllQuotes (str: string): QuoteMatch[] {\n  return [...str.matchAll(quotesRegex)].map((match) => {\n    const index = match.index!\n    return {\n      char: match[1],\n      before: index > 0 ? str[index - 1] : '',\n      after: (index + 1) < str.length ? str[index + 1] : ''\n    }\n  })\n}\n\nfunction replaceExistingQuotes (str: string, matches: QuoteMatch[]): string {\n  let index = 0\n  return str.replace(quotesRegex, (match: string) => {\n    const replacement = matches[index].replace || matches[index].char\n    index += 1\n    return replacement\n  })\n}\n","import config from './config.js'\nimport type {Config} from './config.js'\nimport * as string from './util/string.js'\nimport * as nodeType from './node-type.js'\nimport * as quotes from './quotes.js'\nimport {isPlainTextBlock} from './block.js'\nimport type Cursor from './cursor.js'\nimport type Selection from './selection.js'\n\nlet allowedElements: Record<string, Record<string, boolean>>\nlet allowedPlainTextElements: Record<string, Record<string, boolean>>\nlet requiredAttributes: Record<string, string[]>\nlet transformElements: Record<string, string>\nlet blockLevelElements: Record<string, boolean>\nlet replaceQuotes: {quotes?: string[], singleQuotes?: string[], apostrophe?: string}\nlet splitIntoBlocks: Record<string, boolean>\nlet blacklistedElements: string[]\nconst whitespaceOnly = /^\\s*$/\nconst blockPlaceholder = '<!-- BLOCK -->'\nlet keepInternalRelativeLinks: boolean\n\ninterface FilterOptions {\n  allowedElements: Record<string, Record<string, boolean>>\n  keepInternalRelativeLinks: boolean\n}\n\nupdateConfig(config)\nexport function updateConfig (conf: Config): void {\n  const rules = conf.pastedHtmlRules\n  allowedElements = rules.allowedElements || {}\n  allowedPlainTextElements = rules.allowedPlainTextElements || {}\n  requiredAttributes = rules.requiredAttributes || {}\n  transformElements = rules.transformElements || {}\n  blacklistedElements = rules.blacklistedElements || []\n  keepInternalRelativeLinks = rules.keepInternalRelativeLinks || false\n  replaceQuotes = rules.replaceQuotes || {}\n\n  blockLevelElements = {}\n  rules.blockLevelElements.forEach((name: string) => { blockLevelElements[name] = true })\n  splitIntoBlocks = {}\n  rules.splitIntoBlocks.forEach((name: string) => { splitIntoBlocks[name] = true })\n}\n\nexport function paste (block: HTMLElement, cursor: Cursor | Selection, clipboardContent: string): {blocks: string[], cursor: Cursor | Selection} {\n  const document = block.ownerDocument\n  block.setAttribute(config.pastingAttribute, 'true')\n\n  if (cursor.isSelection) {\n    const selection = cursor as Selection\n    cursor = selection.deleteExactSurroundingTags()\n      .deleteContainedTags()\n      .deleteContent()\n  }\n\n  // Create a placeholder to help parse HTML\n  const pasteHolder = document.createElement('div')\n  pasteHolder.innerHTML = clipboardContent\n\n  const isPlainText = isPlainTextBlock(block)\n  const blocks = parseContent(pasteHolder, {plainText: isPlainText})\n\n  block.removeAttribute(config.pastingAttribute)\n  return {blocks, cursor}\n}\n\n/**\n * - Parse pasted content\n * - Split it up into blocks\n * - clean and normalize every block\n * - optionally strip the host location an anchorTag-href\n *   www.livindocs.io/internalLink -> /internalLink\n *\n * @param {DOM node} A container where the pasted content is located.\n * @returns {Array of Strings} An array of cleaned innerHTML like strings.\n */\nexport function parseContent (element: HTMLElement, {plainText = false}: {plainText?: boolean} = {}): string[] {\n  const options: FilterOptions = {\n    allowedElements: plainText ? allowedPlainTextElements : allowedElements,\n    keepInternalRelativeLinks: plainText ? false : keepInternalRelativeLinks\n  }\n\n  // Filter pasted content\n  return filterHtmlElements(element, options)\n  // Handle Blocks\n    .split(blockPlaceholder)\n    .map((entry: string) => string.trim(cleanWhitespace(replaceAllQuotes(entry))))\n    .filter((entry: string) => !whitespaceOnly.test(entry))\n}\n\nfunction filterHtmlElements (elem: HTMLElement, options: FilterOptions): string {\n  return Array.from(elem.childNodes).reduce<string>((content: string, child: Node) => {\n    if (blacklistedElements.indexOf(child.nodeName.toLowerCase()) !== -1) {\n      return ''\n    }\n\n    const childElement = child as Element\n\n    // Keep internal relative links relative (on paste).\n    if (options.keepInternalRelativeLinks && childElement.nodeName === 'A' && (childElement as HTMLAnchorElement).href) {\n      const hrefAttr = childElement.getAttribute('href')\n      if (hrefAttr) {\n        const stripInternalHost = hrefAttr.replace(window.location.origin, '')\n        childElement.setAttribute('href', stripInternalHost)\n      }\n    }\n\n    if (child.nodeType === nodeType.elementNode) {\n      const childContent = filterHtmlElements(childElement as HTMLElement, options)\n      return content + conditionalNodeWrap(childElement as HTMLElement, childContent, options)\n    }\n\n    // Escape HTML characters <, > and &\n    if (child.nodeType === nodeType.textNode) {\n      return content + string.escapeHtml((child as Text).nodeValue || '')\n    }\n    return content\n  }, '')\n}\n\nfunction conditionalNodeWrap (child: HTMLElement, content: string, options: FilterOptions): string {\n  let nodeName = child.nodeName.toLowerCase()\n  nodeName = transformNodeName(nodeName)\n\n  if (shouldKeepNode(nodeName, child, options)) {\n    const attributes = filterAttributes(nodeName, child)\n\n    if (nodeName === 'br') return `<${nodeName + attributes}>`\n\n    if (!whitespaceOnly.test(content)) {\n      return `<${nodeName + attributes}>${content}</${nodeName}>`\n    }\n\n    return content\n  }\n\n  if (splitIntoBlocks[nodeName]) {\n    return blockPlaceholder + content + blockPlaceholder\n  }\n\n  // prevent missing whitespace between text when block-level\n  // elements are removed.\n  if (blockLevelElements[nodeName]) return `${content} `\n\n  return content\n}\n\n// returns string of concatenated attributes e.g. 'target=\"_blank\" rel=\"nofollow\" href=\"/test.com\"'\nfunction filterAttributes (nodeName: string, node: Element): string {\n  return Array.from(node.attributes).reduce<string>((attributes: string, attr: Attr) => {\n    const name = attr.name\n    const value = attr.value\n    if (allowedElements[nodeName]?.[name] && value) {\n      return `${attributes} ${name}=\"${value}\"`\n    }\n    return attributes\n  }, '')\n}\n\nfunction transformNodeName (nodeName: string): string {\n  return transformElements[nodeName] || nodeName\n}\n\nfunction hasRequiredAttributes (nodeName: string, node: Element): boolean {\n  const requiredAttrs = requiredAttributes[nodeName]\n  if (!requiredAttrs) return true\n\n  return !requiredAttrs.some((name: string) => !node.getAttribute(name))\n}\n\nfunction shouldKeepNode (nodeName: string, node: Element, options: FilterOptions): boolean {\n  return !!options.allowedElements[nodeName] && hasRequiredAttributes(nodeName, node)\n}\n\nfunction cleanWhitespace (str: string): string {\n  return str\n    .replace(/\\n/g, ' ')\n    .replace(/ {2,}/g, ' ')\n    .replace(/(.)\\u00A0/g, (match: string, group: string) => group + (/[\\u0020]/.test(group)\n      ? '\\u00A0'\n      : ' '\n    ))\n}\n\nfunction replaceAllQuotes (str: string): string {\n  if (replaceQuotes.quotes || replaceQuotes.singleQuotes || replaceQuotes.apostrophe) {\n    return quotes.replaceAllQuotes(str, replaceQuotes)\n  }\n\n  return str\n}\n","/**\n* Check for contenteditable support\n*\n* (from Modernizr)\n* this is known to false positive in some mobile browsers\n* here is a whitelist of verified working browsers:\n* https://github.com/NielsLeenheer/html5test/blob/549f6eac866aa861d9649a0707ff2c0157895706/scripts/engine.js#L2083\n*/\nexport const contenteditable = typeof document.documentElement.contentEditable !== 'undefined'\n\n// Detect webkit browser engine\n// That way we can detect the contenteditable span bug on safari, but exclude chrome\n// Regex taken from: https://github.com/lancedikson/bowser/blob/f09411489ced05811c91cc6670a8e4ca9cbe39a7/src/parser-engines.js#L93-L106\n// Attention, this might be error prone as any engine version change breaks this.\nconst isBlink = /(apple)?webkit\\/537\\.36/i.test(window.navigator.userAgent)\nconst isWebkit = /(apple)?webkit/i.test(window.navigator.userAgent)\nconst webKit = !isBlink && isWebkit\n\n/**\n * Check selectionchange event (supported in IE, Chrome, Firefox and Safari)\n * Firefox supports it since version 52 (2017).\n * Opera has no support as of 2021.\n */\nconst hasNativeSelectionchangeSupport = (document: Document): boolean => {\n  const doc = document\n  const osc = (doc as any).onselectionchange\n  if (osc !== undefined) {\n    try {\n      (doc as any).onselectionchange = 0\n      return (doc as any).onselectionchange === null\n    } catch (e) {\n      // ignore\n    } finally {\n      (doc as any).onselectionchange = osc\n    }\n  }\n  return false\n}\n\nexport const selectionchange = hasNativeSelectionchangeSupport(document)\n\n// See Keyboard.prototype.preventContenteditableBug for more information.\nexport const contenteditableSpanBug = !!webKit\n\n","// Eventable Mixin.\n//\n// Simple mixin to add event emitter methods to an object (Publish/Subscribe).\n//\n// Add on, off and notify methods to an object:\n// eventable(obj)\n//\n// publish an event:\n// obj.notify(context, 'action', param1, param2)\n//\n// Optionally pass a context that will be applied to every event:\n// eventable(obj, context)\n//\n// With this publishing can omit the context argument:\n// obj.notify('action', param1, param2)\n//\n// Subscribe to a 'channel'\n// obj.on('action', funtion(param1, param2){ ... })\n//\n// Unsubscribe an individual listener:\n// obj.off('action', method)\n//\n// Unsubscribe all listeners of a channel:\n// obj.off('action')\n//\n// Unsubscribe all listeners of all channels:\n// obj.off()\n\ninterface EventableObject {\n  on(event: string, listener: (...args: any[]) => any): this\n  on(events: Record<string, (...args: any[]) => any>): this\n  off(event?: string, listener?: (...args: any[]) => any): void\n  notify(context: any, event: string, ...args: any[]): void\n  notify(event: string, ...args: any[]): void\n  switchContext?: {\n    events: string[]\n    positionX?: number\n  }\n}\n\nexport default function eventable(obj: any, notifyContext?: any): void {\n  const events = getEventableModule(notifyContext)\n  obj.on = events.on\n  obj.off = events.off\n  obj.notify = events.notify\n}\n\nfunction getEventableModule(notifyContext?: any) {\n  const listeners: Record<string, Array<(...args: any[]) => any>> = {}\n\n  function addListener(events: string, listener: (...args: any[]) => any): void {\n    events.split(' ').forEach(event => {\n      listeners[event] = listeners[event] || []\n      listeners[event].unshift(listener)\n    })\n  }\n\n  function removeListener(event: string, listener: (...args: any[]) => any): void {\n    const eventListeners = listeners[event]\n    if (!eventListeners) return\n\n    const index = eventListeners.indexOf(listener)\n    if (index < 0) return\n\n    eventListeners.splice(index, 1)\n  }\n\n  // Public Methods\n  const result: any = {\n    on(eventOrEvents: string | Record<string, (...args: any[]) => any>, listener?: (...args: any[]) => any): any {\n      if (arguments.length === 2 && typeof eventOrEvents === 'string') {\n        addListener(eventOrEvents, listener!)\n      } else if (arguments.length === 1 && typeof eventOrEvents === 'object') {\n        for (const eventType in eventOrEvents) addListener(eventType, eventOrEvents[eventType])\n      }\n      return result\n    },\n\n    off(event?: string, listener?: (...args: any[]) => any): void {\n      if (arguments.length === 2) {\n        removeListener(event!, listener!)\n      } else if (arguments.length === 1) {\n        listeners[event!] = []\n      } else {\n        Object.keys(listeners).forEach(key => delete listeners[key])\n      }\n    },\n\n    notify(context: any, event: string, ...args: any[]): void {\n      const allArgs = Array.from(arguments)\n\n      let actualContext: any\n      let actualEvent: string\n      let actualArgs: any[]\n\n      if (notifyContext) {\n        actualEvent = context\n        actualContext = notifyContext\n        actualArgs = allArgs.slice(1)\n      } else {\n        actualContext = context\n        actualEvent = event\n        actualArgs = allArgs.slice(2)\n      }\n\n      if (result.switchContext) {\n        const nextEvent = result.switchContext.events.shift()\n        if (actualEvent !== nextEvent) result.switchContext = undefined\n      }\n\n      const eventListeners = listeners[actualEvent]\n      if (!eventListeners) return\n\n      // Execute the newest listeners first.\n      // Stop if a listener returns false.\n      eventListeners.every((listener) => listener.apply(actualContext, actualArgs) !== false)\n    }\n  }\n\n  return result\n}\n\n","// code from mdn: https://developer.mozilla.org/en-US/docs/Web/API/window.scrollX\nfunction getScrollPosition(win: Window): {x: number, y: number} {\n  const x = (win.pageXOffset !== undefined) ? win.pageXOffset : (win.document.documentElement || win.document.body.parentNode || win.document.body).scrollLeft\n  const y = (win.pageYOffset !== undefined) ? win.pageYOffset : (win.document.documentElement || win.document.body.parentNode || win.document.body).scrollTop\n  return {x, y}\n}\n\nexport {getScrollPosition}\n\n","import * as viewport from './util/viewport.js'\n\nimport * as content from './content.js'\nimport * as parser from './parser.js'\nimport * as string from './util/string.js'\nimport {elementNode, documentFragmentNode} from './node-type.js'\nimport error from './util/error.js'\nimport * as rangeSaveRestore from './range-save-restore.js'\nimport type {RangeInfo} from './range-save-restore.js'\nimport {closest, getSelection, rangesAreEqual} from './util/dom.js'\n\n/**\n * The Cursor module provides a cross-browser abstraction layer for cursor.\n *\n * @module core\n * @submodule cursor\n */\n\nexport default class Cursor {\n  public host!: HTMLElement\n  public range!: Range\n  public win!: Window\n  public isCursor?: boolean\n  public isSelection?: boolean\n  private savedRangeInfo?: RangeInfo & {host?: HTMLElement}\n\n  static findHost (elem: Node, selector: string): HTMLElement | undefined {\n    return closest(elem, selector)\n  }\n\n  /**\n  * Class for the Cursor module.\n  *\n  * @class Cursor\n  * @constructor\n  */\n  constructor (editableHost: HTMLElement, range: Range) {\n    this.setHost(editableHost)\n    this.range = range\n    this.isCursor = true\n  }\n\n  // Get all tags that affect the current selection. Optionally pass a\n  // method to filter the returned elements.\n  //\n  // @param {Function filter(node)} [Optional] Method to filter the returned\n  //   DOM Nodes.\n  // @return {Array of DOM Nodes}\n  getTags (filterFunc?: ((node: Node) => boolean) | null): Node[] {\n    return content.getTags(this.host, this.range, filterFunc)\n  }\n\n  // Get the names of all tags that affect the current selection. Optionally\n  // pass a method to filter the returned elements.\n  //\n  // @param {Function filter(node)} [Optional] Method to filter the DOM\n  //   Nodes whose names are returned.\n  // @return {Array<String> of tag names}\n  getTagNames (filterFunc?: ((node: Node) => boolean) | null): string[] {\n    const tags: Node[] = this.getTags(filterFunc)\n    return (content.getTagNames as (elements: Node[]) => string[])(tags)\n  }\n\n  // Get all tags of the specified type that affect the current selection.\n  //\n  // @method getTagsByName\n  // @param {String} tagName. E.g. 'a' to get all links.\n  // @return {Array of DOM Nodes}\n  getTagsByName (tagName: string): Node[] {\n    return content.getTagsByName(this.host, this.range, tagName) as Node[]\n  }\n\n  // Get all tags that are completely within the current selection.\n  getInnerTags (filterFunc?: ((node: Node) => boolean) | null): Node[] {\n    return content.getInnerTags(this.range, filterFunc)\n  }\n\n  // Get all tags whose text is completely within the current selection.\n  getContainedTags (filterFunc?: (node: Node) => boolean) {\n    return content.getContainedTags(this.range, filterFunc)\n  }\n\n  // Get all tags that surround the current selection.\n  getAncestorTags (filterFunc?: (node: Node) => boolean) {\n    return content.getAncestorTags(this.host, this.range, filterFunc)\n  }\n\n  isAtEnd () {\n    return parser.isEndOfHost(\n      this.host,\n      this.range.endContainer,\n      this.range.endOffset\n    )\n  }\n\n  isAtTextEnd () {\n    return parser.isTextEndOfHost(\n      this.host,\n      this.range.endContainer,\n      this.range.endOffset\n    )\n  }\n\n  isAtLastLine () {\n    const hostRange = this.win.document.createRange()\n    hostRange.selectNodeContents(this.host)\n    hostRange.collapse(false)\n    const hostCoords = getRangeBoundingClientRect(hostRange, this.win)\n    const cursorCoords = getRangeBoundingClientRect(this.range, this.win)\n    return isCloseTo(hostCoords.bottom, cursorCoords.bottom)\n  }\n\n  isAtFirstLine () {\n    const hostRange = this.win.document.createRange()\n    hostRange.selectNodeContents(this.host)\n    hostRange.collapse(true)\n    const hostCoords = getRangeBoundingClientRect(hostRange, this.win)\n    const cursorCoords = getRangeBoundingClientRect(this.range, this.win)\n    return isCloseTo(hostCoords.top, cursorCoords.top)\n  }\n\n  isAtBeginning () {\n    return parser.isBeginningOfHost(\n      this.host,\n      this.range.startContainer,\n      this.range.startOffset\n    )\n  }\n\n  // Insert content before the cursor\n  //\n  // @param {String, DOM node or document fragment}\n  insertBefore (element: Node | string): void {\n    if (string.isString(element)) element = content.createFragmentFromString(element)\n    if (parser.isDocumentFragmentWithoutChildren(element)) return\n\n    element = this.adoptElement(element)\n\n    let preceedingElement = element\n    if (element.nodeType === documentFragmentNode) {\n      const lastIndex = element.childNodes.length - 1\n      preceedingElement = element.childNodes[lastIndex]\n    }\n\n    this.range.insertNode(element)\n    this.range.setStartAfter(preceedingElement)\n    this.range.setEndAfter(preceedingElement)\n    this.host.normalize() // mend text nodes\n  }\n\n  // Insert content after the cursor\n  //\n  // @param {String, DOM node or document fragment}\n  insertAfter (element: Node): void {\n    if (string.isString(element)) element = content.createFragmentFromString(element)\n    if (parser.isDocumentFragmentWithoutChildren(element)) return\n\n    element = this.adoptElement(element)\n\n    const after = this.range.cloneRange()\n    after.setStart(after.endContainer, after.endOffset)\n    after.collapse(true)\n    after.insertNode(element)\n    this.host.normalize() // mend text nodes\n  }\n\n  // Alias for #setVisibleSelection()\n  setSelection () {\n    this.setVisibleSelection()\n  }\n\n  setVisibleSelection () {\n    if (this.win.document.activeElement !== this.host) {\n      const {x, y} = viewport.getScrollPosition(this.win)\n      this.win.scrollTo(x, y)\n    }\n\n    const selection = getSelection(this.win)\n    if (!selection) return\n    selection.removeAllRanges()\n    selection.addRange(this.range)\n  }\n\n  // Take the following example:\n  // (The character '|' represents the cursor position)\n  //\n  // <div contenteditable=\"true\">fo|o</div>\n  // before() will return a document fragment containing a text node 'fo'.\n  //\n  // @returns {Document Fragment} content before the cursor or selection.\n  before () {\n    const range = this.range.cloneRange()\n    range.collapse(true)\n    range.setStartBefore(this.host)\n    return content.cloneRangeContents(range)\n  }\n\n  textBefore () {\n    const range = this.range.cloneRange()\n    range.collapse(true)\n    range.setStartBefore(this.host)\n    return range.toString()\n  }\n\n  // Same as before() but returns a string.\n  beforeHtml () {\n    return content.getInnerHtmlOfFragment(this.before())\n  }\n\n  // Take the following example:\n  // (The character '|' represents the cursor position)\n  //\n  // <div contenteditable=\"true\">fo|o</div>\n  // after() will return a document fragment containing a text node 'o'.\n  //\n  // @returns {Document Fragment} content after the cursor or selection.\n  after () {\n    const range = this.range.cloneRange()\n    range.collapse(false)\n    range.setEndAfter(this.host)\n    return content.cloneRangeContents(range)\n  }\n\n  textAfter () {\n    const range = this.range.cloneRange()\n    range.collapse(false)\n    range.setEndAfter(this.host)\n    return range.toString()\n  }\n\n  // Same as after() but returns a string.\n  afterHtml () {\n    return content.getInnerHtmlOfFragment(this.after())\n  }\n\n  getBoundingClientRect () {\n    return this.range.getBoundingClientRect()\n  }\n\n  // Get the BoundingClientRect of the cursor.\n  // The returned values are transformed to be absolute\n  // (relative to the document).\n  getCoordinates (positioning = 'absolute') {\n    const coords = this.range.getBoundingClientRect()\n    if (positioning === 'fixed') return coords\n\n    // translate into absolute positions\n    const {x, y} = viewport.getScrollPosition(this.win)\n    return {\n      top: coords.top + y,\n      bottom: coords.bottom + y,\n      left: coords.left + x,\n      right: coords.right + x,\n      height: coords.height,\n      width: coords.width\n    }\n  }\n\n  moveBefore (element: Node): Cursor | void {\n    this.updateHost(element)\n    this.range.setStartBefore(element)\n    this.range.setEndBefore(element)\n    if (this.isSelection) return new Cursor(this.host, this.range)\n  }\n\n  moveAfter (element: Node): Cursor | void {\n    this.updateHost(element)\n    this.range.setEndAfter(element)\n    this.range.setStartAfter(element)\n    if (this.isSelection) return new Cursor(this.host, this.range)\n  }\n\n  // Move the cursor to the beginning of the host.\n  moveAtBeginning (element: HTMLElement = this.host): Cursor | void {\n    this.updateHost(element)\n    this.range.selectNodeContents(element)\n    this.range.collapse(true)\n    if (this.isSelection) return new Cursor(this.host, this.range)\n  }\n\n  // Move the cursor to the end of the host.\n  moveAtEnd (element: HTMLElement = this.host): Cursor | void {\n    this.updateHost(element)\n    this.range.selectNodeContents(element)\n    this.range.collapse(false)\n    if (this.isSelection) return new Cursor(this.host, this.range)\n  }\n\n  // Move the cursor after the last visible character of the host.\n  moveAtTextEnd (element: HTMLElement): Cursor | void {\n    const lastChild = parser.lastChild(element)\n    if (lastChild && lastChild.nodeType === elementNode) {\n      return this.moveAtEnd(lastChild as HTMLElement)\n    }\n  }\n\n  setHost (element: HTMLElement | any): void {\n    if ((element as any).jquery) element = (element as any)[0]\n    this.host = element\n    const doc = element.ownerDocument\n    this.win = (element === undefined || element === null || !doc) ? window : (doc.defaultView || window)\n  }\n\n  updateHost (element: Node): void {\n    const host = parser.getHost(element)\n    if (!host) error('Can not set cursor outside of an editable block')\n    this.setHost(host)\n  }\n\n  retainVisibleSelection (callback: () => void): void {\n    this.save()\n    callback() // eslint-disable-line callback-return\n    this.restore()\n    this.setVisibleSelection()\n  }\n\n  save () {\n    this.savedRangeInfo = rangeSaveRestore.save(this.range)\n    this.savedRangeInfo.host = this.host\n  }\n\n  restore (): void {\n    if (!this.savedRangeInfo) {\n      error('Could not restore selection')\n      return\n    }\n\n    if (this.savedRangeInfo.host) {\n      this.host = this.savedRangeInfo.host\n    }\n    const restoredRange = rangeSaveRestore.restore(this.host, this.savedRangeInfo)\n    if (!restoredRange) {\n      error('Could not restore selection range')\n      return\n    }\n    this.range = restoredRange\n    this.savedRangeInfo = undefined\n  }\n\n  equals (cursor: Cursor | null | undefined): boolean {\n    if (!cursor) return false\n\n    if (!cursor.host) return false\n    if (!cursor.host.isEqualNode(this.host)) return false\n\n    if (!cursor.range) return false\n    if (!rangesAreEqual(cursor.range, this.range)) return false\n\n    return true\n  }\n\n  // Create an element with the correct ownerWindow\n  // (see: http://www.w3.org/DOM/faq.html#ownerdoc)\n  createElement (tagName: string, attributes: Record<string, string> = {}): HTMLElement {\n    const element = this.win.document.createElement(tagName)\n    for (const attributeName in attributes) {\n      const attributeValue = attributes[attributeName]\n      element.setAttribute(attributeName, attributeValue)\n    }\n    return element\n  }\n\n  createTextNode (text: string): Text {\n    return this.win.document.createTextNode(text)\n  }\n\n  // Make sure a node has the correct ownerWindow\n  // (see: https://developer.mozilla.org/en-US/docs/Web/API/Document/importNode)\n  adoptElement (node: Node): Node {\n    return content.adoptElement(node, this.win.document)\n  }\n\n  // Currently we call triggerChange manually after format changes.\n  // This is to prevent excessive triggering of the change event during\n  // merge or split operations or other manipulations by scripts.\n  triggerChange () {\n    const event = new Event('formatEditable', {bubbles: true, cancelable: false})\n    this.host.dispatchEvent(event)\n  }\n}\n\n\n/**\n* Get position of the range or cursor\n*\n* Can be used to reliably get the boundingClientRect without\n* some any of the drawbacks that the native range has.\n*\n* With the native range.getClientBoundingRect(), newlines are\n* not considered when calculating the position\n*\n* @param {Range} range\n* @param {Window} win\n*/\nfunction getRangeBoundingClientRect (range: Range, win: Window): DOMRect {\n  if (range.startContainer.nodeType !== elementNode) return range.getBoundingClientRect()\n  const el = win.document.createElement('span')\n  el.setAttribute('doc-editable', 'unwrap')\n  range.insertNode(el)\n  const coords = el.getBoundingClientRect()\n  el.remove()\n  return coords\n}\n\nfunction isCloseTo (a: number, b: number): boolean {\n  if (a === b) return true\n  if (Math.abs(a - b) <= 2) return true\n  return false\n}\n","import NodeIterator from './node-iterator.js'\nimport * as nodeType from './node-type.js'\nimport {createRange} from './util/dom.js'\nimport type {Match} from './plugins/highlighting/text-search.js'\n\ninterface ExtendedMatch extends Match {\n  id?: string | number\n  title?: string\n}\n\ninterface Portion {\n  element: Text\n  text: string\n  offset: number\n  length: number\n  isLastPortion: boolean\n  wordId: string | number\n}\n\nexport default {\n\n  // Get the text from an editable block with a NodeIterator.\n  // This must work the same as when later iterating over the text\n  // in highlightMatches().\n  extractText (element: HTMLElement, convertBRs: boolean = true): string {\n    let text = ''\n    getText(element, convertBRs, (part: string) => { text += part })\n    return text\n  },\n\n  // Go through the element to highlight the matches while keeping the\n  // existing html valid (highlighting a match may require inserting multiple\n  // elements).\n  //\n  // @params\n  // - matches\n  //   Array of positions in the string to highlight:\n  //   e.g [{\n  //         startIndex: 0,\n  //         endIndex: 1,\n  //         match: 'The', // not used, only the indexes are used for highlighting)\n  //         marker: DOMNode, // A clone of this element will be inserted\n  //         id: 'a7382', // used in word-id attribute\n  //         title: 'The World' // used in title attribute (optional)\n  //       }]\n  highlightMatches (element: HTMLElement, matches: ExtendedMatch[], countBRs: boolean = true): void {\n    if (!matches || matches.length === 0) {\n      return\n    }\n\n    element.normalize() // mend text nodes\n\n    const iterator = new NodeIterator(element)\n    let currentMatchIndex = 0\n    let totalOffset = 0\n    let currentMatch = matches[currentMatchIndex]\n    let portions: Portion[] = []\n    let next: Node | undefined\n    let wordId: string | number = currentMatch.id || currentMatch.startIndex\n    let textNode: Text | undefined\n    while ((next = iterator.getNext())) {\n      // Account for <br> elements\n      if (next.nodeType === nodeType.textNode && (next as Text).data !== '') {\n        textNode = next as Text\n      } else if (countBRs && next.nodeType === nodeType.elementNode && (next as Element).nodeName === 'BR') {\n        totalOffset += 1\n        continue\n      } else {\n        continue\n      }\n\n      if (!textNode) continue\n\n      const nodeText = textNode.data\n      let nodeEndOffset = totalOffset + nodeText.length\n      if (currentMatch.startIndex < nodeEndOffset && totalOffset < currentMatch.endIndex) {\n        // get portion position (fist, last or in the middle)\n        const isFirstPortion = totalOffset <= currentMatch.startIndex\n        const isLastPortion = nodeEndOffset >= currentMatch.endIndex\n\n        if (isFirstPortion) {\n          wordId = currentMatch.id || currentMatch.startIndex\n        }\n\n        // calculate offset and length\n        let offset: number\n        if (isFirstPortion) {\n          offset = currentMatch.startIndex - totalOffset\n        } else {\n          offset = 0\n        }\n\n        let length: number\n        if (isLastPortion) {\n          length = (currentMatch.endIndex - totalOffset) - offset\n        } else {\n          length = nodeText.length - offset\n        }\n\n        // create portion object\n        const portion: Portion = {\n          element: textNode,\n          text: nodeText.substring(offset, offset + length),\n          offset,\n          length,\n          isLastPortion,\n          wordId\n        }\n\n        portions.push(portion)\n\n        if (isLastPortion) {\n          const lastNode = this.wrapMatch(portions, currentMatch.marker!, currentMatch.title)\n          if (lastNode) {\n            iterator.replaceCurrent(lastNode)\n\n            // recalculate nodeEndOffset if we have to replace the current node.\n            nodeEndOffset = totalOffset + portion.length + portion.offset\n\n            portions = []\n            currentMatchIndex += 1\n            if (currentMatchIndex < matches.length) {\n              currentMatch = matches[currentMatchIndex]\n            }\n          }\n        }\n      }\n\n      totalOffset = nodeEndOffset\n    }\n  },\n\n  // @return the last wrapped element\n  wrapMatch (portions: Portion[], stencilElement: HTMLElement, title?: string): HTMLElement | undefined {\n    return portions.map((portion) => this.wrapPortion(portion, stencilElement, title)).pop()\n  },\n\n  wrapPortion (portion: Portion, stencilElement: HTMLElement, title?: string): HTMLElement {\n    const range = createRange()\n    range.setStart(portion.element, portion.offset)\n    range.setEnd(portion.element, portion.offset + portion.length)\n    const node = stencilElement.cloneNode(true) as HTMLElement\n    node.setAttribute('data-word-id', String(portion.wordId))\n    if (title) node.setAttribute('title', title)\n    range.surroundContents(node)\n\n    // Fix a weird behaviour where an empty text node is inserted after the range\n    if (node.nextSibling) {\n      const next = node.nextSibling\n      if (next.nodeType === nodeType.textNode && (next as Text).data === '') {\n        next.remove()\n      }\n    }\n\n    return node\n  }\n\n}\n\n// Extract the text of an element.\n// This has two notable behaviours:\n// - It uses a NodeIterator which will skip elements\n//   with data-editable=\"remove\"\n// - It returns a \\n for <br> elements\n//   (The only block level element allowed inside of editables)\nfunction getText (element: HTMLElement, convertBRs: boolean, func: (text: string) => void): void {\n  const iterator = new NodeIterator(element)\n  let next: Node | undefined\n  while ((next = iterator.getNext())) {\n    if (next.nodeType === nodeType.textNode && (next as Text).data !== '') {\n      func((next as Text).data)\n    } else if (convertBRs && next.nodeType === nodeType.elementNode && (next as Element).nodeName === 'BR') {\n      func('\\n')\n    }\n  }\n}\n","export interface Match {\n  startIndex: number\n  endIndex: number\n  match: string\n  marker?: HTMLElement\n}\n\nexport function searchText (text: string, searchTerm: string, marker?: HTMLElement): Match[] {\n  const matchMode = 'text'\n  return findMatches(text, [searchTerm], matchMode, marker)\n}\n\nexport function searchWord (text: string, word: string, marker?: HTMLElement): Match[] {\n  const matchMode = 'word'\n  return findMatches(text, [word], matchMode, marker)\n}\n\nexport function searchAllWords (text: string, words: string[], marker?: HTMLElement): Match[] {\n  const matchMode = 'word'\n  return findMatches(text, words, matchMode, marker)\n}\n\nfunction findMatches (text: string, searchTexts: string[], matchMode: 'text' | 'word', marker?: HTMLElement): Match[] {\n  if (!text || text === '') return []\n  if (marker && !isElement(marker)) return []\n  if (!searchTexts?.length) return []\n\n  const createRegex = matchMode === 'word'\n    ? createWordRegex\n    : createHighlightRegex\n\n  const regex = createRegex(searchTexts)\n  const matches = [...text.matchAll(regex)]\n\n  return matches.map((match) => {\n    let startIndex\n    let matchedText\n    if (matchMode === 'word') {\n      startIndex = match.index + match[1].length\n      matchedText = match[2]\n    } else {\n      startIndex = match.index\n      matchedText = match[0]\n    }\n\n    return {\n      startIndex,\n      endIndex: startIndex + matchedText.length,\n      match: matchedText,\n      marker\n    }\n  })\n}\n\nfunction isElement (obj: any): obj is HTMLElement {\n  try {\n    if (!obj) return false\n    return obj instanceof obj.ownerDocument?.defaultView.HTMLElement\n  } catch (e) {\n    // Browsers not supporting W3 DOM2 don't have HTMLElement and\n    // an exception is thrown and we end up here. Testing some\n    // properties that all elements have (works on IE7)\n    return (typeof obj === 'object') &&\n      (obj.nodeType === 1) && (typeof obj.style === 'object') &&\n      (typeof obj.ownerDocument === 'object')\n  }\n}\n\nfunction createHighlightRegex (words: string[] = []): RegExp {\n  const escapedWords = words.map((word) => escapeRegEx(word))\n\n  const regex = `(${escapedWords.join('|')})`\n  return new RegExp(regex, 'g')\n}\n\n// Regex to find whole words within a string\n//\n// Unicode character blocks for letters.\n// See: http://jrgraphix.net/research/unicode_blocks.php\n//\n// \\\\u0041-\\\\u005A    A-Z (Basic Latin)\n// \\\\u0061-\\\\u007A    a-z (Basic Latin)\n// \\\\u0030-\\\\u0039    0-9 (Basic Latin)\n// \\\\u00AA            ª   (Latin-1 Supplement)\n// \\\\u00B5            µ   (Latin-1 Supplement)\n// \\\\u00BA            º   (Latin-1 Supplement)\n// \\\\u00C0-\\\\u00D6    À-Ö (Latin-1 Supplement)\n// \\\\u00D8-\\\\u00F6    Ø-ö (Latin-1 Supplement)\n// \\\\u00F8-\\\\u00FF    ø-ÿ (Latin-1 Supplement)\n// \\\\u0100-\\\\u017F    Ā-ſ (Latin Extended-A)\n// \\\\u0180-\\\\u024F    ƀ-ɏ (Latin Extended-B)\nconst letterChars = '\\\\u0041-\\\\u005A\\\\u0061-\\\\u007A\\\\u0030-\\\\u0039\\\\u00AA\\\\u00B5\\\\u00BA\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u00FF\\\\u0100-\\\\u017F\\\\u0180-\\\\u024F'\n\nfunction createWordRegex (words: string[] = []): RegExp {\n  const escapedWords = words.map((word) => escapeRegEx(word))\n\n  // (notLetter|^)(words)(?=notLetter|$)\n  const regex = `([^${letterChars}]|^)` +\n    `(${escapedWords.join('|')})` +\n    `(?=[^${letterChars}]|$)`\n\n  return new RegExp(regex, 'g')\n}\n\nfunction escapeRegEx (s: string): string {\n  return String(s).replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1')\n}\n","import * as content from './content.js'\nimport highlightText from './highlight-text.js'\nimport {searchText, type Match} from './plugins/highlighting/text-search.js'\nimport {createElement, createRange, toCharacterRange} from './util/dom.js'\nimport type Dispatcher from './dispatcher.js'\n\ninterface ExtendedMatch extends Match {\n  id?: string\n}\n\nconst highlightSupport = {\n\n  // Used to highlight arbitrary text in an editable. All occurrences\n  // will be highlighted.\n  highlightText (editableHost: HTMLElement, text: string, highlightId: string, type: string, dispatcher: Dispatcher | undefined, win?: Window): number | undefined {\n    if (this.hasHighlight(editableHost, highlightId)) return\n    const blockText = highlightText.extractText(editableHost)\n\n    const marker = `<span class=\"highlight-${type}\"></span>`\n    let winWindow: Window | undefined = win\n    if (!winWindow) {\n      const doc = editableHost.ownerDocument || (typeof document !== 'undefined' ? document : null)\n      winWindow = doc?.defaultView || undefined\n    }\n    if (!winWindow) {\n      winWindow = (typeof window !== 'undefined' && window.document ? window : undefined)\n    }\n    if (!winWindow) {\n      throw new Error('Could not determine window object for highlightText')\n    }\n    const markerNode = highlightSupport.createMarkerNode(marker, type, winWindow)\n\n    if (!markerNode) return undefined\n\n    const matches = searchText(blockText, text, markerNode)\n\n    if (matches && matches.length) {\n      const match = matches[0] as ExtendedMatch\n      if (highlightId) match.id = highlightId\n      highlightText.highlightMatches(editableHost, matches)\n      if (dispatcher) dispatcher.notify('change', editableHost)\n      return match.startIndex\n    }\n    return undefined\n  },\n\n  // Used to highlight comments.\n  // This function was changed to track matches when text is added to the start\n  // of a component, but multiple white spaces break it in a strict sense\n  // The function works in the editor and in browsers, but tests with\n  // multiple white spaces will fail.\n  // Browsers change the white spaces to &nbsp and the function works,\n  // and the tests in highlight.spec.js have been updated to represent this.\n  highlightRange (editableHost: HTMLElement, text: string, highlightId: string, startIndex: number, endIndex: number, dispatcher: Dispatcher | undefined, win?: Window, type: string = 'comment'): number {\n    if (this.hasHighlight(editableHost, highlightId)) {\n      this.removeHighlight(editableHost, highlightId, dispatcher)\n    }\n\n    const blockText = highlightText.extractText(editableHost, false)\n    if (blockText === '') return -1 // the text was deleted so we can't highlight anything\n\n    let winWindow: Window | undefined = win\n    if (!winWindow) {\n      const doc = editableHost.ownerDocument || (typeof document !== 'undefined' ? document : null)\n      winWindow = doc?.defaultView || undefined\n    }\n    if (!winWindow) {\n      winWindow = (typeof window !== 'undefined' && window.document ? window : undefined)\n    }\n    if (!winWindow) {\n      throw new Error('Could not determine window object for highlightRange')\n    }\n    const marker = this.createMarkerNode(\n      `<span class=\"highlight-${type}\"></span>`,\n      type,\n      winWindow as Window\n    )\n\n    if (!marker) return -1\n\n    const actualStartIndex = startIndex\n    const actualEndIndex = endIndex\n\n    highlightText.highlightMatches(editableHost, [{\n      startIndex: actualStartIndex,\n      endIndex: actualEndIndex,\n      match: text.substring(actualStartIndex, actualEndIndex),\n      id: highlightId,\n      marker\n    }], false)\n\n    if (dispatcher) dispatcher.notify('change', editableHost)\n\n    return actualStartIndex\n  },\n\n  updateHighlight (editableHost: HTMLElement, highlightId: string, addCssClass?: string, removeCssClass?: string): void {\n    if (!document.documentElement.classList) return\n\n    const elems = editableHost.querySelectorAll(`[data-word-id=\"${highlightId}\"]`)\n    for (const elem of Array.from(elems)) {\n      if (removeCssClass) elem.classList.remove(removeCssClass)\n      if (addCssClass) elem.classList.add(addCssClass)\n    }\n  },\n\n  removeHighlight (editableHost: HTMLElement, highlightId: string, dispatcher?: Dispatcher): void {\n    const elems = editableHost.querySelectorAll(`[data-word-id=\"${highlightId}\"]`)\n    for (const elem of Array.from(elems)) {\n      content.unwrap(elem)\n    }\n\n    // remove empty text nodes, combine adjacent text nodes\n    editableHost.normalize()\n\n    if (dispatcher) dispatcher.notify('change', editableHost)\n  },\n\n  hasHighlight (editableHost: HTMLElement, highlightId: string): boolean {\n    const matches = editableHost.querySelectorAll(`[data-word-id=\"${highlightId}\"]`)\n    return !!matches.length\n  },\n\n  extractHighlightedRanges (editableHost: HTMLElement, type?: string): Record<string, {start: number, end: number, text: string, nativeRange: Range}> | undefined {\n    let findMarkersQuery = '[data-word-id]'\n    if (type) findMarkersQuery += `[data-highlight=\"${type}\"]`\n    const markers = editableHost.querySelectorAll(findMarkersQuery)\n    if (!markers.length) return undefined\n\n    const groups: Record<string, NodeListOf<Element>> = {}\n    for (const marker of Array.from(markers)) {\n      const highlightId = marker.getAttribute('data-word-id')\n      if (highlightId && !groups[highlightId]) {\n        groups[highlightId] = editableHost.querySelectorAll(`[data-word-id=\"${highlightId}\"]`)\n      }\n    }\n\n    const res: Record<string, {start: number, end: number, text: string, nativeRange: Range}> = {}\n    for (const highlightId in groups) {\n      const position = this.extractMarkerNodePosition(editableHost, groups[highlightId])\n      if (position) res[highlightId] = position\n    }\n\n    return res\n  },\n\n  extractMarkerNodePosition (editableHost: HTMLElement, markers: NodeListOf<Element>): {start: number, end: number, text: string, nativeRange: Range} | undefined {\n    if (markers.length === 0) return undefined\n\n    const range = createRange()\n    if (markers.length > 1) {\n      range.setStartBefore(markers[0])\n      range.setEndAfter(markers[markers.length - 1])\n    } else {\n      range.selectNode(markers[0])\n    }\n\n    const textRange = toCharacterRange(range, editableHost)\n    return {\n      start: textRange.start,\n      end: textRange.end,\n      text: textRange.text, // browser range result (does whitespace normalization)\n      nativeRange: range\n    }\n  },\n\n  cleanupStaleMarkerNodes (editableHost: HTMLElement, highlightType: string): void {\n    const nodes = editableHost.querySelectorAll(`span[data-highlight=\"${highlightType}\"]`)\n    for (const node of Array.from(nodes)) {\n      if (!node.textContent || !node.textContent.length) {\n        node.remove()\n      }\n    }\n  },\n\n  createMarkerNode (markerMarkup: string, highlightType: string, win?: Window): HTMLElement | null {\n    let winWindow: Window | null = win || null\n    if (!winWindow) {\n      // Try to get window from global scope\n      winWindow = (typeof window !== 'undefined' && window.document ? window : null) as Window | null\n    }\n    if (!winWindow || !winWindow.document) {\n      throw new Error(`Window object with document is required. win: ${typeof win}, window: ${typeof window}`)\n    }\n    const marker = createElement(markerMarkup, winWindow)\n    if (!marker) return null\n    marker.setAttribute('data-editable', 'ui-unwrap')\n    marker.setAttribute('data-highlight', highlightType)\n    return marker\n  }\n}\n\nexport default highlightSupport\n","import Cursor from './cursor.js'\nimport * as content from './content.js'\nimport * as parser from './parser.js'\nimport * as block from './block.js'\nimport config from './config.js'\nimport highlightSupport from './highlight-support.js'\nimport highlightText from './highlight-text.js'\nimport {\n  toCharacterRange,\n  rangeToHtml,\n  findStartExcludingWhitespace,\n  findEndExcludingWhitespace\n} from './util/dom.js'\n\n/**\n * The Selection module provides a cross-browser abstraction layer for range\n * and selection.\n *\n * @module core\n * @submodule selection\n */\n/**\n * Class that represents a selection and provides functionality to access or\n * modify the selection.\n *\n * @class Selection\n * @constructor\n */\n\nexport default class Selection extends Cursor {\n  constructor (editableHost: HTMLElement, range: Range) {\n    super(editableHost, range)\n    delete this.isCursor\n    this.isSelection = true\n  }\n\n  // Get the text inside the selection.\n  text () {\n    return this.range.toString()\n  }\n\n  // Get the html inside the selection.\n  html () {\n    return rangeToHtml(this.range)\n  }\n\n  isAllSelected () {\n    return parser.isBeginningOfHost(\n      this.host,\n      this.range.startContainer,\n      this.range.startOffset\n    ) && parser.isTextEndOfHost(\n      this.host,\n      this.range.endContainer,\n      this.range.endOffset\n    )\n  }\n\n  getTextRange () {\n    return toCharacterRange(this.range, this.host)\n  }\n\n  // Return a plain string of the current selection content.\n  toString () {\n    return this.range.toString()\n  }\n\n  // Return true if the selection can be wrapped, i.e. all open nodes\n  // are closed within this selection.\n  isWrappable () {\n    return content.isWrappable(this.range)\n  }\n\n  // Get the ClientRects of this selection.\n  // Use this if you want more precision than getBoundingClientRect can give.\n  getRects () {\n    // consider: translate into absolute positions\n    // just like Cursor#getCoordinates()\n    return this.range.getClientRects()\n  }\n\n  link (href: string, attrs: Record<string, string | null | undefined> = {}): void {\n    if (href) attrs.href = href\n    const link = this.createElement(config.linkMarkup.name, config.linkMarkup.attribs)\n    for (const key in attrs) {\n      const value = attrs[key]\n      if (value === undefined) continue\n      if (value === null) {\n        link.removeAttribute(key)\n      } else {\n        link.setAttribute(key, value)\n      }\n    }\n    if (config.linkMarkup.trim) this.trimRange()\n\n    this.forceWrap(link)\n  }\n\n  // trims whitespaces on the left and right of a selection, i.e. what you want in case of links\n  trimRange () {\n    const textToTrim = this.range.toString()\n    const whitespacesOnTheLeft = textToTrim.search(/\\S|$/)\n    const lastNonWhitespace = textToTrim.search(/\\S[\\s]+$/)\n    const whitespacesOnTheRight = lastNonWhitespace === -1\n      ? 0\n      : textToTrim.length - (lastNonWhitespace + 1)\n\n    const [startContainer, startOffset] = findStartExcludingWhitespace({\n      root: this.range.commonAncestorContainer,\n      startContainer: this.range.startContainer,\n      startOffset: this.range.startOffset,\n      whitespacesOnTheLeft\n    })\n    this.range.setStart(startContainer, startOffset)\n\n    const [endContainer, endOffset] = findEndExcludingWhitespace({\n      root: this.range.commonAncestorContainer,\n      endContainer: this.range.endContainer,\n      endOffset: this.range.endOffset,\n      whitespacesOnTheRight\n    })\n    this.range.setEnd(endContainer, endOffset)\n  }\n\n  unlink () {\n    this.removeFormatting(config.linkMarkup.name)\n  }\n\n  toggleLink (href: string, attrs: Record<string, string | null | undefined> = {}): void {\n    const links = this.getTagsByName(config.linkMarkup.name)\n    if (links.length >= 1) {\n      const firstLink = links[0]\n      if (this.isExactSelection(firstLink, 'visible')) {\n        this.unlink()\n      } else {\n        this.expandTo(firstLink)\n      }\n    } else {\n      this.link(href, attrs)\n    }\n  }\n\n  highlightComment ({highlightId, textRange}: {highlightId: string, textRange: {text: string, start: number, end: number}}): void {\n    highlightSupport.highlightRange(\n      this.host,\n      textRange.text,\n      highlightId,\n      textRange.start,\n      textRange.end,\n      undefined, // dispatcher\n      this.win,\n      'comment'\n    )\n  }\n\n  // Manually add a highlight\n  // Note: the current code does not work with newlines (LP)\n  highlight ({highlightId}: {highlightId: string}): void {\n    const textBefore = this.textBefore()\n    const currentTextContent = this.text()\n\n    const marker = '<span class=\"highlight-comment\"></span>'\n    const markerNode = highlightSupport.createMarkerNode(marker, 'comment', this.win)\n    if (!markerNode) return\n\n    markerNode.setAttribute('data-match', currentTextContent)\n\n    const match = {\n      startIndex: textBefore.length,\n      endIndex: textBefore.length + currentTextContent.length,\n      match: currentTextContent,\n      marker: markerNode\n    }\n\n    // Note: highlighting won't retain the selection\n    highlightText.highlightMatches(this.host, [match])\n  }\n\n  // e.g. toggle('<em>')\n  toggle (elem: Node): void {\n    if (block.isPlainTextBlock(this.host)) return\n    if (this.range.collapsed) return\n    elem = this.adoptElement(elem)\n    const newRange = content.toggleTag(this.host, this.range, elem as HTMLElement)\n    if (newRange) {\n      this.range = newRange\n      this.setVisibleSelection()\n    }\n  }\n\n  toggleCustom ({tagName, attributes, trim = false}: {tagName: string, attributes: Record<string, any>, trim?: boolean}): void {\n    const customElem = this.createElement(tagName, attributes)\n    if (trim) this.trimRange()\n    this.toggle(customElem)\n  }\n\n  makeCustom ({tagName, attributes, trim = false}: {tagName: string, attributes: Record<string, any>, trim?: boolean}): void {\n    const customElem = this.createElement(tagName, attributes)\n    if (trim) this.trimRange()\n    this.forceWrap(customElem)\n  }\n\n  makeBold () {\n    const bold = this.createElement(config.boldMarkup.name, config.boldMarkup.attribs)\n    if (config.boldMarkup.trim) this.trimRange()\n    this.forceWrap(bold)\n  }\n\n  toggleBold () {\n    const bold = this.createElement(config.boldMarkup.name, config.boldMarkup.attribs)\n    if (config.boldMarkup.trim) this.trimRange()\n    this.toggle(bold)\n  }\n\n  giveEmphasis () {\n    const em = this.createElement(config.italicMarkup.name, config.italicMarkup.attribs)\n    if (config.italicMarkup.trim) this.trimRange()\n    this.forceWrap(em)\n  }\n\n  toggleEmphasis () {\n    const em = this.createElement(config.italicMarkup.name, config.italicMarkup.attribs)\n    if (config.italicMarkup.trim) this.trimRange()\n    this.toggle(em)\n  }\n\n  makeUnderline () {\n    const u = this.createElement(config.underlineMarkup.name, config.underlineMarkup.attribs)\n    if (config.underlineMarkup.trim) this.trimRange()\n    this.forceWrap(u)\n  }\n\n  toggleUnderline () {\n    const u = this.createElement(config.underlineMarkup.name, config.underlineMarkup.attribs)\n    if (config.underlineMarkup.trim) this.trimRange()\n    this.toggle(u)\n  }\n\n  insertCharacter (character: string): Cursor {\n    const cursor = this.deleteContent()\n    const textNode = cursor.createTextNode(character)\n    cursor.insertBefore(textNode)\n    cursor.setVisibleSelection()\n    return cursor\n  }\n\n  // Surround the selection with characters like quotes.\n  //\n  // @param {String} E.g. '«'\n  // @param {String} E.g. '»'\n  surround (startCharacter: string, endCharacter: string): void {\n    this.range = content.surround(this.host, this.range, startCharacter, endCharacter)\n    this.setVisibleSelection()\n  }\n\n  removeSurround (startCharacter: string, endCharacter: string): void {\n    this.range = content.deleteCharacter(this.host, this.range, startCharacter)\n    this.range = content.deleteCharacter(this.host, this.range, endCharacter)\n    this.setVisibleSelection()\n  }\n\n  removeChars (chars: string[] = []): void {\n    for (let i = 0; i < chars.length; i++) {\n      const char = chars[i]\n      this.range = content.deleteCharacter(this.host, this.range, char)\n    }\n    this.setVisibleSelection()\n  }\n\n  toggleSurround (startCharacter: string, endCharacter: string): void {\n    if (this.containsString(startCharacter) &&\n    this.containsString(endCharacter)) {\n      this.removeSurround(startCharacter, endCharacter)\n    } else {\n      this.surround(startCharacter, endCharacter)\n    }\n  }\n\n  // @param {String} selector. An element selector, e.g. 'a' or 'span.some-class'\n  //                           that represents elements to be removed; if undefined,\n  //                           remove all.\n  removeFormatting (selector?: string): void {\n    const newRange = content.removeFormatting(this.host, this.range, selector || null)\n    if (newRange) {\n      this.range = newRange\n      this.setVisibleSelection()\n    }\n  }\n\n  // Delete the farest ancestor that is an exact selection\n  //\n  // @return Selection instance\n  deleteExactSurroundingTags (): Selection {\n    const ancestorTags = this.getAncestorTags().reverse()\n    for (const ancestorTag of ancestorTags) {\n      if (this.isExactSelection(ancestorTag, undefined)) {\n        (ancestorTag as Element).remove()\n        break\n      }\n    }\n    return new Selection(this.host, this.range)\n  }\n\n  // Delete all the tags whose text is completely within the current selection.\n  //\n  // @return Selection instance\n  deleteContainedTags (): Selection {\n    const containedTags = this.getContainedTags()\n    containedTags.forEach(containedTag => (containedTag as Element).remove())\n    return new Selection(this.host, this.range)\n  }\n\n  // Delete the contents inside the range and exact surrounding markups.\n  // After that the selection will be a cursor.\n  //\n  // @return Cursor instance\n  deleteContent () {\n    this.range.deleteContents()\n    return new Cursor(this.host, this.range)\n  }\n\n  // Expand the current selection.\n  //\n  // @param {DOM Node}\n  expandTo (elem: Node): void {\n    this.range = content.expandTo(this.host, this.range, elem as HTMLElement)\n    this.setVisibleSelection()\n  }\n\n  //  Collapse the selection at the beginning of the selection\n  //\n  //  @return Cursor instance\n  collapseAtBeginning (elem?: Node): Cursor {\n    this.range.collapse(true)\n    this.setVisibleSelection()\n    return new Cursor(this.host, this.range)\n  }\n\n  //  Collapse the selection at the end of the selection\n  //\n  //  @return Cursor instance\n  collapseAtEnd (elem?: Node): Cursor {\n    this.range.collapse(false)\n    this.setVisibleSelection()\n    return new Cursor(this.host, this.range)\n  }\n\n  // Wrap the selection with the specified tag. If any other tag with\n  // the same tagName is affecting the selection this tag will be\n  // remove first.\n  forceWrap (elem: Node): void {\n    if (block.isPlainTextBlock(this.host)) return\n    if (this.range.collapsed) return\n    elem = this.adoptElement(elem)\n    const newRange = content.forceWrap(this.host, this.range, elem as HTMLElement)\n    if (newRange) {\n      this.range = newRange\n      this.setVisibleSelection()\n    }\n  }\n\n  // Check if the selection is the same as the elements contents.\n  //\n  // @method isExactSelection\n  // @param {DOM Node}\n  // @param {flag:  undefined or 'visible'} if 'visible' is passed\n  //   whitespaces at the beginning or end of the selection will\n  //   be ignored.\n  // @return {Boolean}\n  isExactSelection (elem: Node, onlyVisible?: string | undefined): boolean {\n    return content.isExactSelection(this.range, elem, onlyVisible === 'visible')\n  }\n\n  // Check if the selection contains the passed string.\n  //\n  // @method containsString\n  // @return {Boolean}\n  containsString (str: string): boolean {\n    return content.containsString(this.range, str)\n  }\n\n  // Delete all occurrences of the specified character from the\n  // selection.\n  deleteCharacter (character: string): void {\n    this.range = content.deleteCharacter(this.host, this.range, character)\n    this.setVisibleSelection()\n  }\n}\n","import Cursor from './cursor.js'\nimport Selection from './selection.js'\nimport {rangesAreEqual} from './util/dom.js'\n\n/** RangeContainer\n *\n * primarily used to compare ranges\n * its designed to work with undefined ranges as well\n * so we can easily compare them without checking for undefined\n * all the time\n */\n\nexport default class RangeContainer {\n  public host: HTMLElement | undefined\n  public range: Range | undefined\n  public isAnythingSelected: boolean\n  public isCursor: boolean\n  public isSelection: boolean\n\n  constructor (editableHost?: HTMLElement | any, range?: Range) {\n    this.host = editableHost && (editableHost as any).jquery\n      ? (editableHost as any)[0]\n      : editableHost\n    // Safari 17 seems to modify the range instance on the fly which breaks later comparisons.\n    // We clone the range at the time of the RangeContainer creation.\n    // https://developer.apple.com/documentation/safari-release-notes/safari-17-release-notes#New-Features\n    this.range = range?.cloneRange()\n    this.isAnythingSelected = (range !== undefined)\n    this.isCursor = (this.isAnythingSelected && range!.collapsed)\n    this.isSelection = (this.isAnythingSelected && !this.isCursor)\n  }\n\n  getCursor (): Cursor | undefined {\n    if (this.isCursor && this.host && this.range) return new Cursor(this.host, this.range)\n    return undefined\n  }\n\n  getSelection (): Selection | undefined {\n    if (this.isSelection && this.host && this.range) return new Selection(this.host, this.range)\n    return undefined\n  }\n\n  forceCursor (): Cursor | undefined {\n    if (!this.isSelection) return this.getCursor()\n    const selection = this.getSelection()\n    if (selection) return selection.deleteContent()\n    return undefined\n  }\n\n  isDifferentFrom (otherRangeContainer: RangeContainer = new RangeContainer()): boolean {\n    const self = this.range\n    const other = otherRangeContainer.range\n    if (self && other) return !rangesAreEqual(self, other)\n    if (!self && other) return false\n    return true\n  }\n}\n","import * as parser from './parser.js'\nimport RangeContainer from './range-container.js'\nimport Cursor from './cursor.js'\nimport Selection from './selection.js'\nimport {getSelection} from './util/dom.js'\nimport type Dispatcher from './dispatcher.js'\n\n/**\n * The SelectionWatcher module watches for selection changes inside\n * of editable blocks.\n *\n * @module core\n * @submodule selectionWatcher\n */\n\nexport default class SelectionWatcher {\n  public dispatcher: Dispatcher\n  public win: Window\n  public selection: globalThis.Selection | null | undefined\n  public currentSelection: Cursor | Selection | undefined\n  public currentRange: RangeContainer | undefined\n\n  constructor (dispatcher: Dispatcher, win?: Window) {\n    this.dispatcher = dispatcher\n    this.win = win || window\n    this.selection = undefined\n    this.currentSelection = undefined\n    this.currentRange = undefined\n  }\n\n  /**\n   * Updates the internal selection pointer to the current selection.\n   * Returns true if no exception occurred.\n   */\n  syncSelection () {\n    // Note: the try catch was introduced because of rangy exceptions with nativeSelections\n    try {\n      this.selection = getSelection(this.win)\n    } catch (err) {\n      return false\n    }\n\n    return true\n  }\n\n  /**\n  * Return a RangeContainer if the current selection is within an editable\n  * otherwise return an empty RangeContainer\n  */\n  getRangeContainer () {\n    const successfulSync = this.syncSelection()\n\n    // rangeCount is 0 or 1 in all browsers except firefox\n    // firefox can work with multiple ranges\n    // (on a mac hold down the command key to select multiple ranges)\n    if (this.selection?.rangeCount && successfulSync) {\n      try {\n        const range = this.selection.getRangeAt(0)\n        // Check if range is still valid (not detached)\n        if (range && range.commonAncestorContainer) {\n          const hostNode = parser.getHost(range.commonAncestorContainer)\n          if (hostNode) return new RangeContainer(hostNode, range)\n        }\n      } catch (err) {\n        // Range might be detached, return empty container\n      }\n    }\n\n    // return an empty range container\n    return new RangeContainer()\n  }\n\n  /**\n  * Gets a fresh RangeContainer with the current selection or cursor.\n  *\n  * @return RangeContainer instance\n  */\n  getFreshRange () {\n    return this.getRangeContainer()\n  }\n\n  /**\n  * Gets a fresh RangeContainer with the current selection or cursor.\n  *\n  * @return Either a Cursor or Selection instance or undefined if\n  * there is neither a selection or cursor.\n  */\n  getFreshSelection (): Cursor | Selection | undefined {\n    const rangeContainer = this.getRangeContainer()\n\n    return rangeContainer.isCursor\n      ? rangeContainer.getCursor()\n      : rangeContainer.getSelection()\n  }\n\n  /**\n  * Get the selection set by the last selectionChanged event.\n  * Sometimes the event does not fire fast enough and the selection\n  * you get is not the one the user sees.\n  * In those cases use #getFreshSelection()\n  *\n  * @return Either a Cursor or Selection instance or undefined if\n  * there is neither a selection or cursor.\n  */\n  getSelection () {\n    return this.currentSelection\n  }\n\n  forceCursor () {\n    const rangeContainer = this.getRangeContainer()\n    return rangeContainer.forceCursor()\n  }\n\n  selectionChanged () {\n    const newRangeContainer = this.getRangeContainer()\n    if (newRangeContainer.isDifferentFrom(this.currentRange)) {\n      const lastSelection = this.currentSelection\n      this.currentRange = newRangeContainer\n\n      // empty selection or cursor\n      if (lastSelection) {\n        if (lastSelection.isCursor && !this.currentRange.isCursor) {\n          this.dispatcher.notify('cursor', lastSelection.host)\n        } else if (lastSelection.isSelection && !this.currentRange.isSelection) {\n          this.dispatcher.notify('selection', lastSelection.host)\n        }\n      }\n\n      // set new selection or cursor and fire event\n      if (this.currentRange.isCursor && this.currentRange.host && this.currentRange.range) {\n        this.currentSelection = new Cursor(this.currentRange.host, this.currentRange.range)\n        this.dispatcher.notify('cursor', this.currentSelection.host, this.currentSelection)\n      } else if (this.currentRange.isSelection && this.currentRange.host && this.currentRange.range) {\n        this.currentSelection = new Selection(this.currentRange.host, this.currentRange.range)\n        this.dispatcher.notify('selection', this.currentSelection.host, this.currentSelection)\n      } else {\n        this.currentSelection = undefined\n      }\n    }\n  }\n}\n","import {createRange, containsRange} from './util/dom.js'\nimport {contenteditableSpanBug} from './feature-detection.js'\nimport * as nodeType from './node-type.js'\nimport eventable from './eventable.js'\nimport type SelectionWatcher from './selection-watcher.js'\n\ninterface KeyCodes {\n  left: number\n  up: number\n  right: number\n  down: number\n  tab: number\n  esc: number\n  backspace: number\n  delete: number\n  enter: number\n  shift: number\n  ctrl: number\n  alt: number\n  b: number\n  i: number\n}\n\n/**\n * The Keyboard module defines an event API for key events.\n */\n\nexport default class Keyboard {\n  public key: KeyCodes\n  public notify!: (event: string, ...args: any[]) => void\n  public on!: ((event: string, handler: (...args: any[]) => any) => this) & ((events: Record<string, (...args: any[]) => any>) => this)\n  public off!: (...args: any[]) => void\n  public selectionWatcher: SelectionWatcher\n\n  constructor (selectionWatcher: SelectionWatcher) {\n    eventable(this)\n    this.selectionWatcher = selectionWatcher\n    this.key = (Keyboard as any).key\n  }\n\n  dispatchKeyEvent (event: KeyboardEvent, target: any, notifyCharacterEvent?: boolean): void {\n    switch (event.keyCode) {\n      case this.key.left:\n        return this.notify(target, 'left', event)\n\n      case this.key.right:\n        return this.notify(target, 'right', event)\n\n      case this.key.up:\n        return this.notify(target, 'up', event)\n\n      case this.key.down:\n        return this.notify(target, 'down', event)\n\n      case this.key.tab:\n        if (event.shiftKey) return this.notify(target, 'shiftTab', event)\n        return this.notify(target, 'tab', event)\n\n      case this.key.esc:\n        return this.notify(target, 'esc', event)\n\n      case this.key.backspace:\n        this.preventContenteditableBug(target, event)\n        return this.notify(target, 'backspace', event)\n\n      case this.key.delete:\n        this.preventContenteditableBug(target, event)\n        return this.notify(target, 'delete', event)\n\n      case this.key.enter:\n        if (event.shiftKey) return this.notify(target, 'shiftEnter', event)\n        return this.notify(target, 'enter', event)\n\n      case this.key.ctrl:\n      case this.key.shift:\n      case this.key.alt:\n        return\n\n      // Metakey\n      case 224: // Firefox: 224\n      case 17: // Opera: 17\n      case 91: // Chrome/Safari: 91 (Left)\n      case 93: // Chrome/Safari: 93 (Right)\n        return\n\n      default:\n        // Added here to avoid using fall-through in the switch\n        // when b or i are pressed without ctrlKey or metaKey\n        if (event.keyCode === this.key.b && (event.ctrlKey || event.metaKey)) {\n          return this.notify(target, 'bold', event)\n        }\n        if (event.keyCode === this.key.i && (event.ctrlKey || event.metaKey)) {\n          return this.notify(target, 'italic', event)\n        }\n\n        this.preventContenteditableBug(target, event)\n        if (!notifyCharacterEvent) return\n        // Don't notify character events as long as either the ctrl or\n        // meta key are pressed.\n        // see: https://github.com/livingdocsIO/editable.js/pull/125\n        if (!event.ctrlKey && !event.metaKey) return this.notify(target, 'character', event)\n    }\n  }\n\n  preventContenteditableBug (target: HTMLElement, event: KeyboardEvent): void {\n    if (!contenteditableSpanBug) return\n    if (event.ctrlKey || event.metaKey) return\n\n    // This fixes a strange webkit bug that can be reproduced as follows:\n    //\n    // 1. A node used within a contenteditable has some style, e.g through the\n    //    following CSS:\n    //\n    //      strong {\n    //        color: red\n    //      }\n    //\n    // 2. A selection starts with the first character of a styled node and ends\n    //    outside of that node, e.g: \"big beautiful\" is selected in the following\n    //    html:\n    //\n    //      <p contenteditable=\"true\">\n    //        Hello <strong>big</strong> beautiful world\n    //      </p>\n    //\n    // 3. The user types a letter character to replace \"big beautiful\", e.g. \"x\"\n    //\n    // Result: Webkits adds <font> and <b> tags:\n    //\n    //    <p contenteditable=\"true\">\n    //      Hello\n    //      <font color=\"#ff0000\">\n    //        <b>f</b>\n    //      </font>\n    //      world\n    //    </p>\n    //\n    // This bug ONLY happens, if the first character of the node is selected and\n    // the selection goes further than the node.\n    //\n    // Solution:\n    //\n    // Manually remove the element that would be removed anyway before inserting\n    // the new letter.\n    const rangeContainer = this.selectionWatcher.getFreshRange()\n    if (!rangeContainer.isSelection || !rangeContainer.range) return\n\n    const nodeToRemove = Keyboard.getNodeToRemove(rangeContainer.range, target)\n    if (nodeToRemove) nodeToRemove.remove()\n  }\n\n  static getNodeToRemove (selectionRange: Range, target: HTMLElement): Element | undefined {\n    // This function is only used by preventContenteditableBug. It is exposed on\n    // the Keyboard constructor for testing purpose only.\n\n    // Let's make sure we are in the edge-case, in which the bug happens.\n    // The selection does not start at the beginning of a node. We have\n    // nothing to do.\n    if (selectionRange.startOffset !== 0) return undefined\n\n    let startNodeElement: Element = selectionRange.startContainer as Element\n\n    // If the node is a textNode, we select its parent.\n    if (startNodeElement.nodeType === nodeType.textNode) {\n      const parent = startNodeElement.parentNode\n      if (!parent || parent.nodeType !== nodeType.elementNode) return undefined\n      startNodeElement = parent as Element\n    }\n\n    // The target is the contenteditable element, which we do not want to replace\n    if (startNodeElement === target) return undefined\n\n    // We get a range that contains everything within the sartNodeElement to test\n    // if the selectionRange is within the startNode, we have nothing to do.\n    const firstChild = startNodeElement.firstChild\n    const lastChild = startNodeElement.lastChild\n    if (!firstChild || !lastChild) return undefined\n    \n    const startNodeRange = createRange()\n    startNodeRange.setStartBefore(firstChild)\n    startNodeRange.setEndAfter(lastChild)\n    if (containsRange(startNodeRange, selectionRange)) return undefined\n\n    // If the selectionRange.startContainer was a textNode, we have to make sure\n    // that its parent's content starts with this node. Content is either a\n    // text node or an element. This is done to avoid false positives like the\n    // following one:\n    // <strong>foo<em>bar</em>|baz</strong>quux|\n    if (selectionRange.startContainer.nodeType === nodeType.textNode) {\n      const contentNodeTypes = [nodeType.textNode, nodeType.elementNode]\n      let firstContentNode: Node | null = startNodeElement.firstChild\n\n      do {\n        if (firstContentNode && contentNodeTypes.indexOf(firstContentNode.nodeType) !== -1) break\n        firstContentNode = firstContentNode ? firstContentNode.nextSibling : null\n      } while (firstContentNode)\n\n      if (firstContentNode !== selectionRange.startContainer) return undefined\n    }\n\n    // Now we know, that we have to return at least the startNodeElement for\n    // removal. But it could be, that we also need to remove its parent, e.g.\n    // we need to remove <strong> in the following example:\n    // <strong><em>|foo</em>bar</strong>baz|\n    const rangeStartingBeforeCurrentElement = selectionRange.cloneRange()\n    rangeStartingBeforeCurrentElement.setStartBefore(startNodeElement)\n\n    const parentResult = Keyboard.getNodeToRemove(\n      rangeStartingBeforeCurrentElement,\n      target\n    )\n    return parentResult || startNodeElement\n  }\n}\n\n(Keyboard as any).key = Keyboard.prototype.key = {\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  tab: 9,\n  esc: 27,\n  backspace: 8,\n  delete: 46,\n  enter: 13,\n  shift: 16,\n  ctrl: 17,\n  alt: 18,\n  b: 66,\n  i: 73\n}\n","const isValidQuotePairConfig = (quotePair: any): boolean => Array.isArray(quotePair) && quotePair.length === 2\n\nexport const shouldApplySmartQuotes = (config: {smartQuotes?: boolean, quotes?: any, singleQuotes?: any}, target: HTMLElement): boolean => {\n  const {smartQuotes, quotes, singleQuotes} = config\n  return !!smartQuotes && isValidQuotePairConfig(quotes) && isValidQuotePairConfig(singleQuotes) && target.isContentEditable\n}\n\nexport const isDoubleQuote = (char: string): boolean => /^[\\u00AB\\u00BB\\u201C\\u201D\\u201E\\u0022]$/.test(char)\nexport const isSingleQuote = (char: string): boolean => /^[\\u2018\\u2019\\u2039\\u203A\\u201A\\u0027]$/.test(char)\nexport const isApostrophe = (char: string): boolean => /^[\\u2019\\u0027]$/.test(char)\nexport const isWhitespace = (char: string): boolean => /^\\s$/.test(char)\nexport const isSeparatorOrWhitespace = (char: string): boolean => /\\s|[>\\-–—]/.test(char)\n\nconst shouldBeOpeningQuote = (text: string[], indexCharBefore: number): boolean => indexCharBefore < 0 || isSeparatorOrWhitespace(text[indexCharBefore])\nconst shouldBeClosingQuote = (text: string[], indexCharBefore: number): boolean => !!text[indexCharBefore] && !isSeparatorOrWhitespace(text[indexCharBefore])\nconst hasCharAfter = (textArr: string[], indexCharAfter: number): boolean => !!textArr[indexCharAfter] && !isWhitespace(textArr[indexCharAfter])\nconst shouldBeSingleOpeningQuote = (text: string[], indexCharBefore: number): boolean => !!text[indexCharBefore] && isDoubleQuote(text[indexCharBefore])\n\nexport const replaceQuote = (range: Range, index: number, quoteType: string): Text | null => {\n  const startContainer = range?.startContainer\n  if (!startContainer || startContainer.nodeType !== 3) { // Node.TEXT_NODE\n    return null\n  }\n  const textNode = startContainer as Text\n  const nodeValue = textNode.nodeValue\n  if (!nodeValue) {\n    return null\n  }\n  const newText = `${nodeValue.substring(0, index)}${quoteType}${nodeValue.substring(index + 1)}`\n  const newTextNode = document.createTextNode(newText)\n  textNode.replaceWith(newTextNode)\n  return newTextNode\n}\n\nconst hasSingleOpeningQuote = (textArr: string[], offset: number, singleOpeningQuote: string): boolean => {\n  if (offset <= 0) {\n    return false\n  }\n  for (let i = offset - 1; i >= 0; i--) {\n    if (isSingleQuote(textArr[i]) && (!isApostrophe(singleOpeningQuote) && !isApostrophe(textArr[i]))) {\n      return textArr[i] === singleOpeningQuote\n    }\n  }\n  return false\n}\n\nexport const applySmartQuotes = (range: Range, config: {quotes: string[], singleQuotes: string[]}, char: string, target: HTMLElement, cursorOffset?: number): void => {\n  const isCharSingleQuote = isSingleQuote(char)\n  const isCharDoubleQuote = isDoubleQuote(char)\n\n  if (!isCharDoubleQuote && !isCharSingleQuote) {\n    return\n  }\n\n  const {quotes, singleQuotes} = config\n  if (char === quotes[0] || char === quotes[1] || char === singleQuotes[0] || char === singleQuotes[1]) {\n    return\n  }\n\n  const offset = range.startOffset\n  const textContent = range.startContainer.textContent\n  if (!textContent) return\n  const textArr = [...textContent]\n  let newTextNode: Text | null = null\n\n  // Special case for a single quote following a double quote,\n  // which should be transformed into a single opening quote\n  if (isCharSingleQuote && shouldBeSingleOpeningQuote(textArr, offset - 2)) {\n    newTextNode = replaceQuote(range, offset - 1, singleQuotes[0])\n  } else if (shouldBeClosingQuote(textArr, offset - 2)) {\n    if (isCharSingleQuote) {\n      // Don't transform apostrophes\n      if (hasCharAfter(textArr, offset)) {\n        return\n      }\n      // Don't transform single-quote if there is no respective single-opening-quote\n      if (!hasSingleOpeningQuote(textArr, offset, singleQuotes[0])) {\n        return\n      }\n    }\n    const closingQuote = isCharSingleQuote ? singleQuotes[1] : quotes[1]\n    newTextNode = replaceQuote(range, offset - 1, closingQuote)\n  } else if (shouldBeOpeningQuote(textArr, offset - 2)) {\n    const openingQuote = isCharSingleQuote ? singleQuotes[0] : quotes[0]\n    newTextNode = replaceQuote(range, offset - 1, openingQuote)\n  }\n\n  if (!newTextNode) {\n    return\n  }\n\n  // Resets the cursor to the currentPosition after applying the smart-quote\n  const window = target.ownerDocument.defaultView\n  if (!window) return\n  const selection = window.getSelection()\n  if (!selection) return\n  selection.collapse(newTextNode, cursorOffset ?? offset)\n}\n\n","import {selectionchange} from './feature-detection.js'\nimport * as clipboard from './clipboard.js'\nimport * as content from './content.js'\nimport eventable from './eventable.js'\nimport SelectionWatcher from './selection-watcher.js'\nimport config from './config.js'\nimport Keyboard from './keyboard.js'\nimport {closest} from './util/dom.js'\nimport {replaceLast, endsWithSingleSpace} from './util/string.js'\nimport {applySmartQuotes, shouldApplySmartQuotes} from './smartQuotes.js'\nimport type {Editable} from './core.js'\n\n/**\n * The Dispatcher module is responsible for dealing with events and their handlers.\n *\n * @module core\n * @submodule dispatcher\n */\nexport default class Dispatcher {\n  public document: Document\n  public config: any\n  public editable: Editable\n  public editableSelector: string\n  public selectionWatcher: SelectionWatcher\n  public keyboard: Keyboard\n  public activeListeners: Array<{event: string, listener: EventListener, capture: boolean}>\n  public suspended?: boolean\n  public switchContext?: {\n    events: string[]\n    positionX?: number\n  }\n  public getEditableBlockByEvent: (evt: Event) => HTMLElement | undefined\n  public notify!: (event: string, ...args: any[]) => void\n  public off!: (...args: any[]) => void\n  public on!: (event: string, handler: (...args: any[]) => any) => this | ((events: Record<string, (...args: any[]) => any>) => this)\n\n  constructor (editable: Editable) {\n    const win = editable.win\n    eventable(this, editable)\n    this.document = win.document\n    this.config = editable.config\n    this.editable = editable\n    this.editableSelector = editable.editableSelector\n    this.selectionWatcher = new SelectionWatcher(this, win)\n    this.keyboard = new Keyboard(this.selectionWatcher)\n    this.activeListeners = []\n    this.setup()\n    this.getEditableBlockByEvent = (evt: Event) => {\n      const target = evt.target as Node\n      return target ? closest(target, editable.editableSelector) : undefined\n    }\n  }\n\n  setupDocumentListener (event: string, func: (evt: Event) => void, capture: boolean = false): this {\n    const listener = {event, listener: func.bind(this) as EventListener, capture}\n    this.activeListeners.push(listener)\n\n    this.document.addEventListener(event, listener.listener, capture)\n    return this\n  }\n\n  /**\n  * Sets up all events that Editable.JS is catching.\n  *\n  * @method setup\n  */\n  setup () {\n    // setup all events listeners and keyboard handlers\n    this.setupKeyboardEvents()\n    this.setupEventListeners()\n  }\n\n  unload () {\n    this.off()\n    for (const l of this.activeListeners) {\n      this.document.removeEventListener(l.event, l.listener, l.capture)\n    }\n    this.activeListeners.length = 0\n  }\n\n  suspend () {\n    if (this.suspended) return\n    this.suspended = true\n    for (const l of this.activeListeners) {\n      this.document.removeEventListener(l.event, l.listener, l.capture)\n    }\n    this.activeListeners.length = 0\n  }\n\n  continue () {\n    if (!this.suspended) return\n    this.suspended = false\n    this.setupEventListeners()\n  }\n\n  setupEventListeners () {\n    this.setupElementListeners()\n    this.setupKeydownListener()\n\n    if (selectionchange) {\n      this.setupSelectionChangeListeners()\n    } else {\n      this.setupSelectionChangeFallbackListeners()\n    }\n  }\n\n  /**\n  * Sets up events that are triggered on modifying an element.\n  *\n  * @method setupElementListeners\n  */\n  setupElementListeners () {\n    const currentInput: {offset?: number} = {offset: undefined}\n    this\n      .setupDocumentListener('focus', function focusListener (this: Dispatcher, evt: Event) {\n        const block = this.getEditableBlockByEvent(evt)\n        if (!block) return\n        const target = evt.target as HTMLElement\n        if (target && target.getAttribute(config.pastingAttribute)) return\n        this.selectionWatcher.syncSelection()\n        this.notify('focus', block)\n      }, true)\n      .setupDocumentListener('blur', function blurListener (this: Dispatcher, evt: Event) {\n        const block = this.getEditableBlockByEvent(evt)\n        if (!block) return\n        if (block.getAttribute(config.pastingAttribute)) return\n        this.notify('blur', block)\n      }, true)\n      .setupDocumentListener('copy', function copyListener (this: Dispatcher, evt: Event) {\n        const block = this.getEditableBlockByEvent(evt)\n        if (!block) return\n        const selection = this.selectionWatcher.getFreshSelection()\n        if (selection && selection.isSelection) {\n          this.notify('clipboard', block, 'copy', selection)\n        }\n      })\n      .setupDocumentListener('cut', function cutListener (this: Dispatcher, evt: Event) {\n        const block = this.getEditableBlockByEvent(evt)\n        if (!block) return\n        const selection = this.selectionWatcher.getFreshSelection()\n        if (selection && selection.isSelection) {\n          this.notify('clipboard', block, 'cut', selection)\n        }\n      })\n      .setupDocumentListener('paste', function pasteListener (this: Dispatcher, evt: Event) {\n        const block = this.getEditableBlockByEvent(evt)\n        if (!block) return\n\n        const clipEvent = evt as ClipboardEvent\n        clipEvent.preventDefault()\n        const selection = this.selectionWatcher.getFreshSelection()\n        if (!selection || !clipEvent.clipboardData) return\n        const clipboardContent = clipEvent.clipboardData.getData('text/html') || clipEvent.clipboardData.getData('text/plain')\n\n        const {blocks, cursor} = clipboard.paste(block, selection, clipboardContent)\n        if (blocks.length) {\n          const target = clipEvent.target as HTMLElement\n          if (target && endsWithSingleSpace(target.innerText)) {\n            cursor.retainVisibleSelection(() => {\n              block.innerHTML = replaceLast(block.innerHTML, '&nbsp;', ' ')\n            })\n          }\n          this.notify('paste', block, blocks, cursor)\n          // The input event does not fire when we process the content manually\n          // and insert it via script\n          this.notify('change', block)\n        } else {\n          cursor.setVisibleSelection()\n        }\n      })\n      .setupDocumentListener('input', function inputListener (this: Dispatcher, evt: Event) {\n        const block = this.getEditableBlockByEvent(evt)\n        if (!block) return\n\n        const target = evt.target as HTMLElement\n        if (target && shouldApplySmartQuotes(this.config, target)) {\n          const selection = this.selectionWatcher.getFreshSelection()\n          if (!selection || !selection.range) return\n          // Save offset of new input, to reset cursor correctly after timeout delay\n          currentInput.offset = selection.range.startOffset\n          const inputEvent = evt as InputEvent\n          const quotesConfig = this.config.quotes || {quotes: [], singleQuotes: []}\n          setTimeout(() => {\n            if (inputEvent.data) {\n              applySmartQuotes(selection.range!, quotesConfig, inputEvent.data, target, currentInput.offset)\n            }\n          }, 300\n          )\n        }\n\n        this.notify('change', block)\n      })\n\n      .setupDocumentListener('formatEditable', function formatEditableListener (this: Dispatcher, evt: Event) {\n        const block = this.getEditableBlockByEvent(evt)\n        if (!block) return\n        this.notify('change', block)\n      })\n  }\n\n  dispatchSwitchEvent (event: KeyboardEvent, element: HTMLElement, direction: 'up' | 'down'): void {\n    if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) return\n    const cursor = this.selectionWatcher.getFreshSelection()\n    if (!cursor || cursor.isSelection) return\n\n    // store position\n    if (!this.switchContext) {\n      this.switchContext = {\n        positionX: cursor.getBoundingClientRect().left,\n        events: ['cursor']\n      }\n    } else {\n      this.switchContext.events = ['cursor']\n    }\n\n    if (direction === 'up' && cursor.isAtFirstLine()) {\n      event.preventDefault()\n      event.stopPropagation()\n      this.switchContext.events = ['switch', 'blur', 'focus', 'cursor']\n      this.notify('switch', element, direction, cursor)\n    }\n\n    if (direction === 'down' && cursor.isAtLastLine()) {\n      event.preventDefault()\n      event.stopPropagation()\n      this.switchContext.events = ['switch', 'blur', 'focus', 'cursor']\n      this.notify('switch', element, direction, cursor)\n    }\n  }\n\n  /**\n  * Sets up listener for keydown event which forwards events to\n  * the Keyboard instance.\n  *\n  * @method setupKeydownListener\n  */\n  setupKeydownListener () {\n    this.setupDocumentListener('keydown', function (this: Dispatcher, evt: Event) {\n      const block = this.getEditableBlockByEvent(evt)\n      if (!block) return\n      const keyEvent = evt as KeyboardEvent\n      this.keyboard.dispatchKeyEvent(keyEvent, block, false)\n    }, true)\n  }\n\n  /**\n  * Sets up handlers for the keyboard events.\n  * Keyboard definitions are in {{#crossLink \"Keyboard\"}}{{/crossLink}}.\n  *\n  * @method setupKeyboardEvents\n  */\n  setupKeyboardEvents () {\n    const self = this\n\n    this.keyboard\n      .on('up', function (this: HTMLElement, event: KeyboardEvent) {\n        self.dispatchSwitchEvent(event, this, 'up')\n      })\n\n      .on('down', function (this: HTMLElement, event: KeyboardEvent) {\n        self.dispatchSwitchEvent(event, this, 'down')\n      })\n\n      .on('backspace', function (this: HTMLElement, event: KeyboardEvent) {\n        const editableBlock = this as HTMLElement\n        const rangeContainer = self.selectionWatcher.getFreshRange()\n        if (!rangeContainer.isCursor) return\n\n        const cursor = rangeContainer.getCursor()\n        if (!cursor || !cursor.isAtBeginning()) return\n\n        event.preventDefault()\n        event.stopPropagation()\n        self.notify('merge', editableBlock, 'before', cursor)\n      })\n\n      .on('delete', function (this: HTMLElement, event: KeyboardEvent) {\n        const editableBlock = this as HTMLElement\n        const rangeContainer = self.selectionWatcher.getFreshRange()\n        if (!rangeContainer.isCursor) return\n\n        const cursor = rangeContainer.getCursor()\n        if (!cursor || !cursor.isAtTextEnd()) return\n\n        event.preventDefault()\n        event.stopPropagation()\n        self.notify('merge', editableBlock, 'after', cursor)\n      })\n\n      .on('enter', function (this: HTMLElement, event: KeyboardEvent) {\n        const editableBlock = this as HTMLElement\n        event.preventDefault()\n        event.stopPropagation()\n        const rangeContainer = self.selectionWatcher.getFreshRange()\n        const cursor = rangeContainer.forceCursor()\n\n        if (!cursor) return\n\n        if (cursor.isAtTextEnd()) {\n          self.notify('insert', editableBlock, 'after', cursor)\n        } else if (cursor.isAtBeginning()) {\n          self.notify('insert', editableBlock, 'before', cursor)\n        } else {\n          const beforeFragment = cursor.before()\n          const afterFragment = cursor.after()\n          self.notify('split', editableBlock, content.getInnerHtmlOfFragment(beforeFragment), content.getInnerHtmlOfFragment(afterFragment), cursor)\n        }\n      })\n\n      .on('shiftEnter', function (this: HTMLElement, event: KeyboardEvent) {\n        const editableBlock = this as HTMLElement\n        event.preventDefault()\n        event.stopPropagation()\n        const cursor = self.selectionWatcher.forceCursor()\n        if (cursor) {\n          self.notify('newline', editableBlock, cursor)\n        }\n      })\n\n      .on('bold', function (this: HTMLElement, event: KeyboardEvent) {\n        event.preventDefault()\n        event.stopPropagation()\n        const selection = self.selectionWatcher.getFreshSelection()\n        if (selection && selection.isSelection) {\n          self.notify('toggleBold', selection)\n        }\n      })\n\n      .on('italic', function (this: HTMLElement, event: KeyboardEvent) {\n        event.preventDefault()\n        event.stopPropagation()\n        const selection = self.selectionWatcher.getFreshSelection()\n        if (selection && selection.isSelection) {\n          self.notify('toggleEmphasis', selection)\n        }\n      })\n\n      .on('character', function (this: HTMLElement, event: KeyboardEvent) {\n        const editableBlock = this as HTMLElement\n        self.notify('change', editableBlock)\n      })\n  }\n\n  /**\n  * Sets up events that are triggered on a selection change.\n  *\n  * @method setupSelectionChangeListeners\n  */\n  setupSelectionChangeListeners () {\n    let selectionDirty = false\n    let suppressSelectionChanges = false\n    const selectionWatcher = this.selectionWatcher\n\n    // fires on mousemove (thats probably a bit too much)\n    // catches changes like 'select all' from context menu\n    this.setupDocumentListener('selectionchange', (evt: Event) => {\n      let didSyncSelection = false\n      let cursor = this.selectionWatcher.getFreshSelection()\n      if (!cursor) {\n        selectionWatcher.selectionChanged()\n        didSyncSelection = true\n        cursor = this.selectionWatcher.getSelection()\n      }\n\n      if (cursor && cursor.isSelection && cursor.isAtBeginning() && cursor.isAtEnd()) {\n        this.notify('selectToBoundary', cursor.host, evt, 'both')\n      } else if (cursor && cursor.isSelection && cursor.isAtBeginning()) {\n        this.notify('selectToBoundary', cursor.host, evt, 'start')\n      } else if (cursor && cursor.isSelection && cursor.isAtEnd()) {\n        this.notify('selectToBoundary', cursor.host, evt, 'end')\n      }\n\n      if (suppressSelectionChanges) {\n        selectionDirty = true\n      } else if (!didSyncSelection) {\n        selectionWatcher.selectionChanged()\n      }\n    })\n\n    // listen for selection changes by mouse so we can\n    // suppress the selectionchange event and only fire the\n    // change event on mouseup\n    this.setupDocumentListener('mousedown', function (this: Dispatcher, evt: Event) {\n      const mouseEvent = evt as MouseEvent\n      if (!this.getEditableBlockByEvent(evt)) return\n      if (this.config.mouseMoveSelectionChanges === false) {\n        suppressSelectionChanges = true\n\n        // Without this timeout the previous selection is active\n        // until the mouseup event (no. not good).\n        setTimeout(() => selectionWatcher.selectionChanged(), 0)\n      }\n\n      const self = this\n      this.document.addEventListener('mouseup', () => {\n        suppressSelectionChanges = false\n\n        if (selectionDirty) {\n          selectionDirty = false\n          selectionWatcher.selectionChanged()\n        }\n      }, {\n        capture: true,\n        once: true\n      } as AddEventListenerOptions)\n    })\n  }\n\n  /**\n  * Fallback solution to support selection change events on browsers that don't\n  * support selectionChange.\n  *\n  * @method setupSelectionChangeFallbackListeners\n  */\n  setupSelectionChangeFallbackListeners () {\n    const notifySelectionBoundary = (evt: Event) => {\n      const cursor = this.selectionWatcher.getFreshSelection()\n      if (cursor && cursor.isSelection && cursor.isAtBeginning() && cursor.isAtEnd()) {\n        this.notify('selectToBoundary', cursor.host, evt, 'both')\n      } else if (cursor && cursor.isSelection && cursor.isAtBeginning()) {\n        this.notify('selectToBoundary', cursor.host, evt, 'start')\n      } else if (cursor && cursor.isSelection && cursor.isAtEnd()) {\n        this.notify('selectToBoundary', cursor.host, evt, 'end')\n      }\n    }\n\n    // listen for selection changes by mouse\n    this.setupDocumentListener('mouseup', (evt: Event) => {\n      // In Opera when clicking outside of a block\n      // it does not update the selection as it should\n      // without the timeout\n      setTimeout(() => {\n        this.selectionWatcher.selectionChanged()\n        notifySelectionBoundary(evt)\n      }, 0)\n    })\n\n    // listen for selection changes by keys\n    this.setupDocumentListener('keyup', (evt: Event) => {\n      if (!this.getEditableBlockByEvent(evt)) return\n      // when pressing Command + Shift + Left for example the keyup is only triggered\n      // after at least two keys are released. Strange. The culprit seems to be the\n      // Command key. Do we need a workaround?\n      this.selectionWatcher.selectionChanged()\n      notifySelectionBoundary(evt)\n    })\n  }\n}\n","/**\n * Deep merge objects, creating a new object with merged properties.\n * Arrays are replaced (not merged).\n */\nexport function deepMerge<T extends Record<string, any>>(target: T, ...sources: Partial<T>[]): T {\n  const result = {...target} as any\n  \n  for (const source of sources) {\n    if (!source || typeof source !== 'object') continue\n    \n    for (const key in source) {\n      if (!Object.prototype.hasOwnProperty.call(source, key)) continue\n      \n      const sourceValue = source[key]\n      const targetValue = result[key]\n      \n      // Deep merge if both are plain objects\n      if (\n        sourceValue &&\n        typeof sourceValue === 'object' &&\n        !Array.isArray(sourceValue) &&\n        targetValue &&\n        typeof targetValue === 'object' &&\n        !Array.isArray(targetValue)\n      ) {\n        result[key] = deepMerge({}, targetValue, sourceValue)\n      } else {\n        result[key] = sourceValue\n      }\n    }\n  }\n  \n  return result as T\n}\n\n","import * as content from '../../content.js'\n\n/**\n* Spellcheck class.\n*\n* @class Spellcheck\n* @constructor\n*/\nexport default class SpellcheckService {\n  private spellcheckService: (text: string, callback: (misspelledWords: string[] | null) => void) => void\n\n  constructor (spellcheckService: (text: string, callback: (misspelledWords: string[] | null) => void) => void) {\n    this.spellcheckService = spellcheckService\n  }\n\n  check (text: string, callback: (error: null, misspelledWords?: string[] | null) => void): void {\n    if (!text) return callback(null)\n\n    const condensedText = content.normalizeWhitespace(text)\n\n    this.spellcheckService(condensedText, (misspelledWords) => {\n      if (misspelledWords && misspelledWords.length > 0) {\n        return callback(null, misspelledWords)\n      }\n      return callback(null)\n    })\n  }\n\n}\n","// See: https://en.wikipedia.org/wiki/Whitespace_character\n\nconst characters = {\n  'A0': 'no-break space', // \\\\u00A0\n  '2000': 'en quad', // \\\\u2000\n  '2001': 'em quad', // \\\\u2001\n  '2002': 'en space', // \\\\u2002\n  '2003': 'em space', // \\\\u2003\n  '2004': 'three-per-em space', // \\\\u2004\n  '2005': 'four-per-em space', // \\\\u2005\n  '2006': 'six-per-em space', // \\\\u2006\n  '2007': 'figure space', // \\\\u2007\n  '2008': 'punctuation space', // \\\\u2008\n  '2009': 'thin space', // \\\\u2009\n  '200A': 'hair space', // \\\\u200A\n  '202F': 'narrow no-break space', // \\\\u202F\n  '205F': 'medium mathematical space', // \\\\u205F\n  '3000': 'ideographic space' // \\\\u3000\n}\n\n// The no-break space is not highlighted as this can cause problems.\n// Browser can insert no-break spaces when typing at the end of\n// a paragraph and the highlighting prevents browsers from converting\n// the no-break space back to a normal space when the user keeps typing.\nconst specialWhitespaceChars = '\\\\u2000-\\\\u200A\\\\u202F\\\\u205F\\\\u3000'\nconst specialWhitespaceCharsRegex = new RegExp(`[${specialWhitespaceChars}]`, 'g')\n\nexport interface WhitespaceMatch {\n  startIndex: number | undefined\n  endIndex: number\n  match: string\n  title: string\n  marker: HTMLElement\n}\n\nexport default class WhitespaceHighlighting {\n  public marker: HTMLElement\n\n  constructor (markerNode: HTMLElement) {\n    this.marker = markerNode\n  }\n\n  findMatches (text: string): WhitespaceMatch[] | undefined {\n    if (!text) return\n\n    const matches = [...text.matchAll(specialWhitespaceCharsRegex)]\n    return matches.map((entry) => this.prepareMatch(entry))\n  }\n\n  prepareMatch (match: RegExpMatchArray): WhitespaceMatch {\n    const startIndex = match.index!\n    const unicode = getUnicode(match[0])\n    const description = characters[unicode as keyof typeof characters] || 'unknown whitespace'\n    return {\n      startIndex,\n      endIndex: startIndex + match.length,\n      match: match[0],\n      title: `${description} (\\\\u${unicode})`,\n      marker: this.marker\n    }\n  }\n}\n\nfunction getUnicode (character: string): string {\n  const code = character.charCodeAt(0)\n  return `${code.toString(16).toUpperCase()}`\n}\n","import type {Match} from './text-search.js'\n\nexport default class MatchCollection {\n  public matches: Match[]\n\n  constructor () {\n    this.matches = []\n  }\n\n  addMatches (matches: Match[]): void {\n    if (!matches?.length) return\n    this.matches = mergeMatches(this.matches, matches)\n  }\n\n}\n\n// Private Helpers\n// ---------------\n\nfunction mergeMatches (matches1: Match[], matches2: Match[]): Match[] {\n  let next: Match | undefined\n  const length1 = matches1.length\n  const length2 = matches2.length\n  let lastEndIndex = -1\n  const output: Match[] = []\n\n  const state = {\n    a1: matches1,\n    i1: 0,\n    a2: matches2,\n    i2: 0\n  }\n\n  while (state.i1 < length1 || state.i2 < length2) {\n    next = pickNext(state)\n    if (next && next.startIndex >= lastEndIndex) {\n      output.push(next)\n      lastEndIndex = next.endIndex\n    } else if (next) {\n      lastEndIndex = next.endIndex\n    }\n  }\n\n  return output\n}\n\ninterface MergeState {\n  a1: Match[]\n  i1: number\n  a2: Match[]\n  i2: number\n}\n\nfunction pickNext (state: MergeState): Match | undefined {\n  const i1 = state.i1\n  const i2 = state.i2\n  const item1 = state.a1[i1]\n  const item2 = state.a2[i2]\n\n  if (item1 && item2 && item1.startIndex < item2.startIndex) {\n    state.i1 = i1 + 1\n    return item1\n  } else if (item1 && item2) {\n    state.i2 = i2 + 1\n    return item2\n  } else if (item1) {\n    state.i1 = i1 + 1\n    return item1\n  } else if (item2) {\n    state.i2 = i2 + 1\n    return item2\n  } else {\n    return undefined\n  }\n}\n","import * as nodeType from './node-type.js'\nimport {deepMerge} from './util/merge.js'\nimport * as content from './content.js'\nimport highlightText from './highlight-text.js'\nimport SpellcheckService from './plugins/highlighting/spellcheck-service.js'\nimport WhitespaceHighlighting from './plugins/highlighting/whitespace-highlighting.js'\nimport {searchAllWords} from './plugins/highlighting/text-search.js'\nimport MatchCollection from './plugins/highlighting/match-collection.js'\nimport highlightSupport from './highlight-support.js'\nimport {domArray, domSelector} from './util/dom.js'\nimport type {Editable} from './core.js'\n\n// Spellcheck and Whitespace Highlighting\n// --------------------------------------\n//\n// This instance monitors an editable block for changes and\n// updates highlights accordingly. It also calls the spellcheck\n// service after the content has changed.\nimport type {Match} from './plugins/highlighting/text-search.js'\n\nexport default class MonitoredHighlighting {\n  public editable: Editable\n  public win: Window\n  public focusedEditableHost: HTMLElement | undefined\n  public currentlyCheckedEditableHost: HTMLElement | undefined\n  public timeout: Record<string, any>\n  public config: any\n  public spellcheckMarkerNode: HTMLElement\n  public spellcheckService: SpellcheckService\n  public whitespace: typeof WhitespaceHighlighting.prototype\n\n  constructor (editable: Editable, configuration: any, spellcheckConfig: any) {\n    this.editable = editable\n    this.win = editable.win\n    this.focusedEditableHost = undefined\n    this.currentlyCheckedEditableHost = undefined\n    this.timeout = {}\n\n    const defaultConfig = {\n      checkOnInit: false,\n      checkOnFocus: false,\n      checkOnChange: true,\n      // unbounce rate in ms before calling the spellcheck service after changes\n      throttle: 1000,\n      // remove highlights after a change if the cursor is inside a highlight\n      removeOnCorrection: true,\n      spellcheck: {\n        marker: '<span class=\"highlight-spellcheck\"></span>',\n        throttle: 1000,\n        spellcheckService: function () {}\n      },\n      whitespace: {\n        marker: '<span class=\"highlight-whitespace\"></span>'\n      }\n    }\n\n    this.config = deepMerge({}, defaultConfig, configuration)\n\n    const spellcheckService = this.config.spellcheck.spellcheckService\n    const spellcheckMarker = this.config.spellcheck.marker\n    const whitespaceMarker = this.config.whitespace.marker\n    const whitespaceMarkerNode = highlightSupport\n      .createMarkerNode(whitespaceMarker, 'whitespace', this.win)\n    const spellcheckMarkerNode = highlightSupport\n      .createMarkerNode(spellcheckMarker, 'spellcheck', this.win)\n    \n    if (!whitespaceMarkerNode || !spellcheckMarkerNode) {\n      throw new Error('Failed to create marker nodes')\n    }\n\n    this.spellcheckMarkerNode = spellcheckMarkerNode\n    this.spellcheckService = new SpellcheckService(spellcheckService)\n    this.whitespace = new WhitespaceHighlighting(whitespaceMarkerNode)\n\n    this.setupListeners()\n  }\n\n  // Events\n  // ------\n\n  setupListeners (): void {\n    if (this.config.checkOnFocus) {\n      this.editable.on('focus', (editableHost: HTMLElement) => this.onFocus(editableHost))\n      this.editable.on('blur', (editableHost: HTMLElement) => this.onBlur(editableHost))\n    }\n    if (this.config.checkOnChange || this.config.removeOnCorrection) {\n      this.editable.on('change', (editableHost: HTMLElement) => this.onChange(editableHost))\n    }\n    if (this.config.checkOnInit) {\n      this.editable.on('init', (editableHost: HTMLElement) => this.onInit(editableHost))\n    }\n  }\n\n  onInit (editableHost: HTMLElement): void {\n    this.highlight(editableHost)\n  }\n\n  onFocus (editableHost: HTMLElement): void {\n    if (this.focusedEditableHost !== editableHost) {\n      this.focusedEditableHost = editableHost\n      this.editableHasChanged(editableHost, undefined)\n    }\n  }\n\n  onBlur (editableHost: HTMLElement): void {\n    if (this.focusedEditableHost === editableHost) {\n      this.focusedEditableHost = undefined\n    }\n  }\n\n  onChange (editableHost: HTMLElement): void {\n    if (this.config.checkOnChange) {\n      this.editableHasChanged(editableHost, this.config.throttle)\n    }\n    if (this.config.removeOnCorrection) {\n      this.removeHighlightsAtCursor(editableHost)\n    }\n  }\n\n  // Manage Highlights\n  // -----------------\n\n  editableHasChanged (editableHost: HTMLElement, throttle?: number): void {\n    if (this.timeout.id && this.timeout.editableHost === editableHost) {\n      clearTimeout(this.timeout.id)\n    }\n\n    const timeoutId = setTimeout(() => {\n      this.highlight(editableHost)\n\n      this.timeout = {}\n    }, throttle || 0)\n\n    this.timeout = {\n      id: timeoutId,\n      editableHost: editableHost\n    }\n  }\n\n  highlight (editableHost: HTMLElement): void {\n    const textBefore = highlightText.extractText(editableHost)\n\n    // getSpellcheck\n    this.spellcheckService.check(textBefore, (err: null, misspelledWords?: string[] | null) => {\n      if (err || !editableHost.isConnected) { return } // return in case the host was removed from the dom\n\n      // refresh the text\n      const text = highlightText.extractText(editableHost)\n\n      const matchCollection = new MatchCollection()\n\n      if (misspelledWords && misspelledWords.length > 0) {\n        const matches = searchAllWords(text, misspelledWords, this.spellcheckMarkerNode)\n        matchCollection.addMatches(matches)\n      }\n\n      const whitespaceMatches = this.whitespace.findMatches(text)\n      if (whitespaceMatches) {\n        // Convert WhitespaceMatch[] to Match[]\n        const matches: Match[] = whitespaceMatches.map(m => ({\n          startIndex: m.startIndex || 0,\n          endIndex: m.endIndex,\n          match: m.match,\n          marker: m.marker\n        }))\n        matchCollection.addMatches(matches)\n      }\n\n      this.safeHighlightMatches(editableHost, matchCollection.matches)\n    })\n  }\n\n  // Calls highlightMatches internally but ensures\n  // that the selection stays the same\n  safeHighlightMatches (editableHost: HTMLElement, matches: Match[]): void {\n    const selection = this.editable.getSelection(editableHost)\n    if (selection) {\n      selection.retainVisibleSelection(() => {\n        this.highlightMatches(editableHost, matches)\n      })\n    } else {\n      this.highlightMatches(editableHost, matches)\n    }\n    if (this.editable.dispatcher) {\n      this.editable.dispatcher.notify('spellcheckUpdated', editableHost)\n    }\n  }\n\n  highlightMatches (editableHost: HTMLElement, matches: Match[]): void {\n    // Remove old highlights\n    this.removeHighlights(editableHost)\n\n    // Create new highlights\n    if (matches && matches.length > 0) {\n      // const span = this.createMarkerNode()\n      highlightText.highlightMatches(editableHost, matches)\n    }\n  }\n\n  removeHighlights (editableHost: HTMLElement | string): void {\n    const host = domSelector(editableHost, this.win.document)\n    if (!host) return\n    for (const elem of domArray('[data-highlight=\"spellcheck\"], [data-highlight=\"whitespace\"]', this.win.document, host)) {\n      content.unwrap(elem)\n    }\n  }\n\n  removeHighlightsAtCursor (editableHost: HTMLElement | string): void {\n    const host = domSelector(editableHost, this.win.document)\n    if (!host) return\n    editableHost = host\n    const selection = this.editable.getSelection(editableHost)\n    if (selection && selection.isCursor) {\n      let elementAtCursor = selection.range.startContainer\n      if (elementAtCursor.nodeType === nodeType.textNode) {\n        elementAtCursor = elementAtCursor.parentNode\n      }\n\n      let wordId\n      do {\n        if (elementAtCursor === editableHost) return\n        const highlightType = elementAtCursor.getAttribute('data-highlight')\n        if (highlightType === 'spellcheck' || highlightType === 'whitespace') {\n          wordId = elementAtCursor.getAttribute('data-word-id')\n          break\n        }\n      } while ((elementAtCursor = elementAtCursor.parentNode))\n\n      if (wordId) {\n        selection.retainVisibleSelection(() => {\n          for (const elem of domArray(`[data-word-id=\"${wordId}\"]`, this.win.document, host)) {\n            content.unwrap(elem)\n          }\n        })\n      }\n    }\n  }\n\n}\n","import config from '../config.js'\n\n// Allows for safe console logging\n// If the last param is the string \"trace\" console.trace will be called\n// configuration: disable with config.log = false\nexport default function log(...args: any[]): void {\n  if (config.log === false) return\n\n  if (!global.console) return\n\n  const logArgs = args.length === 1 ? args[0] : args\n\n  if (args.length !== 1 && logArgs[logArgs.length - 1] === 'trace') {\n    logArgs.pop()\n    if (console.trace) console.trace()\n  }\n\n  console.log(logArgs)\n}\n\n","import * as parser from './parser.js'\nimport * as content from './content.js'\nimport log from './util/log.js'\nimport * as block from './block.js'\nimport * as nodeType from './node-type.js'\nimport type {Editable} from './core.js'\nimport type Cursor from './cursor.js'\nimport type Selection from './selection.js'\n\n/**\n * The Behavior module defines the behavior triggered in response to the Editable.JS\n * events (see {{#crossLink \"Editable\"}}{{/crossLink}}).\n * The behavior can be overwritten by a user with Editable.init() or on\n * Editable.add() per element.\n *\n * @module core\n * @submodule behavior\n */\n\nexport default function createDefaultBehavior (editable: Editable) {\n  const document = editable.win.document\n  /**\n  * Factory for the default behavior.\n  * Provides default behavior of the Editable.JS API.\n  *\n  * @static\n  */\n\n  return {\n    /** @param {HTMLElement} element */\n    focus (element: HTMLElement): void {\n      if (!parser.isVoid(element)) return\n\n      // Add an zero width space if the editable is empty to force it to have a height\n      // E.g. Firefox does not render empty block elements\n      //   and most browsers do not render empty inline elements.\n      element.appendChild(document.createTextNode('\\uFEFF'))\n    },\n\n    blur (element: HTMLElement): void {\n      // Note: there is a special case when the tab is changed where\n      // we can get a blur event even if the cursor is still in the editable.\n      // This blur would cause us to loose the cursor position (cause of cleanInternals()).\n      // To prevent this we check if the activeElement is still the editable.\n      // (Note: document.getSelection() did not work reliably in this case.)\n      if (document.activeElement === element) return\n\n      content.cleanInternals(element)\n    },\n\n    selection (element: HTMLElement, selection: Selection): void {\n      log(selection ? 'Default selection behavior' : 'Default selection empty behavior')\n    },\n\n    cursor (element: HTMLElement, cursor: Cursor): void {\n      log('Default cursor behavior')\n    },\n\n    newline (element: HTMLElement, cursor: Cursor): void {\n      // When the cursor is at the text end, we'll need to add an empty text node\n      // after the br tag to ensure that the cursor shows up on the next line\n      if (cursor.isAtTextEnd()) {\n        const br = document.createElement('br')\n        cursor.insertBefore(br)\n\n        // Only append a zero width space if there's none after the br tag\n        // We don't need to remove them as they get cleaned up on blur\n        const nextSibling = br.nextSibling\n        if (\n          nextSibling?.nodeType !== nodeType.textNode ||\n          (nextSibling as Text).textContent?.[0] !== '\\uFEFF'\n        ) {\n          cursor.insertAfter(document.createTextNode('\\uFEFF'))\n        }\n      } else {\n        cursor.insertBefore(document.createElement('br'))\n      }\n\n      cursor.setVisibleSelection()\n    },\n\n    insert (element: HTMLElement, direction: string, cursor: Cursor): void {\n      const newElement = element.cloneNode(false) as HTMLElement\n      if (newElement.id) newElement.removeAttribute('id')\n\n      if (direction === 'before') {\n        element.parentNode?.insertBefore(newElement, element)\n      } else {\n        element.parentNode?.insertBefore(newElement, element.nextSibling)\n      }\n\n      editable.createCursorAtEnd(newElement)?.setVisibleSelection()\n    },\n\n    split (element: HTMLElement, before: string, after: string, cursor: Cursor): void {\n      const fragment = content.createFragmentFromString(before)\n      const newNode = element.cloneNode(false) as HTMLElement\n      newNode.appendChild(fragment)\n\n      const parent = element.parentNode\n      if (parent) {\n        parent.insertBefore(newNode, element)\n      }\n\n      element.innerHTML = after\n      content.tidyHtml(newNode)\n      content.tidyHtml(element)\n\n      cursor.setVisibleSelection()\n    },\n\n    merge (element: HTMLElement, direction: string, cursor: Cursor): void {\n      const target = direction === 'before'\n        ? element.previousElementSibling\n        : element.nextElementSibling\n\n      if (!target) return\n\n      const targetContent = content.extractContent(target as HTMLElement, false)\n      const elementContent = content.extractContent(element, false)\n\n      // Calculate text lengths before merging to position cursor correctly\n      const tempDiv = document.createElement('div')\n      tempDiv.innerHTML = targetContent\n      const targetTextLength = tempDiv.textContent?.length || 0\n      tempDiv.innerHTML = elementContent\n      const elementTextLength = tempDiv.textContent?.length || 0\n\n      const mergedContent = direction === 'before'\n        ? targetContent + elementContent\n        : elementContent + targetContent\n\n      element.innerHTML = mergedContent\n      target.remove()\n\n      // Position cursor at the merge boundary\n      const cursorOffset = direction === 'before'\n        ? targetTextLength\n        : elementTextLength\n\n      editable.createCursorAtCharacterOffset({element, offset: cursorOffset})\n    },\n\n    empty (element: HTMLElement): void {\n      log('Default empty behavior')\n    },\n\n    switch (element: HTMLElement, direction: string, cursor: Cursor): void {\n      switch (direction) {\n        case 'before':\n          const prevSibling = element.previousElementSibling\n          if (prevSibling) {\n            const prevCursor = editable.createCursorAtEnd(prevSibling as HTMLElement)\n            if (prevCursor) prevCursor.setVisibleSelection()\n          }\n          break\n        case 'after':\n          const nextSibling = element.nextElementSibling\n          if (nextSibling) {\n            const nextCursor = editable.createCursorAtBeginning(nextSibling as HTMLElement)\n            if (nextCursor) nextCursor.setVisibleSelection()\n          }\n          break\n      }\n    },\n\n    move (element: HTMLElement, selection: Selection, direction: string): void {\n      log('Default move behavior')\n    },\n\n    paste (element: HTMLElement, blocks: string[], cursor: Cursor): void {\n      cursor.insertBefore(blocks[0])\n\n      if (blocks.length <= 1) {\n        cursor.setVisibleSelection()\n        return\n      }\n\n      const parent = element.parentNode\n      if (!parent) return\n      let currentElement = element\n\n      blocks.slice(1).forEach((str: string) => {\n        const newElement = element.cloneNode(false) as HTMLElement\n        if (newElement.id) newElement.removeAttribute('id')\n        const fragment = content.createFragmentFromString(str)\n        newElement.appendChild(fragment)\n        parent.insertBefore(newElement, currentElement.nextSibling)\n        currentElement = newElement\n      })\n\n      // focus last element\n      const lastCursor = editable.createCursorAtEnd(currentElement)\n      if (lastCursor) lastCursor.setVisibleSelection()\n    },\n\n    clipboard (element: HTMLElement, action: string, cursor: Cursor): void {\n      log('Default clipboard behavior')\n    },\n\n    toggleBold (selection: Selection): void {\n      selection.toggleBold()\n    },\n\n    toggleEmphasis (selection: Selection): void {\n      selection.toggleEmphasis()\n    }\n  }\n}\n","import createDefaultBehavior from './create-default-behavior.js'\nimport type {Editable} from './core.js'\nimport type Cursor from './cursor.js'\nimport type Selection from './selection.js'\n\nexport default function createDefaultEvents (editable: Editable) {\n  const behavior = createDefaultBehavior(editable)\n\n  return {\n    /**\n     * The focus event is triggered when an element gains focus.\n     * The default behavior is to... TODO\n     *\n     * @event focus\n     * @param {HTMLElement} element The element triggering the event.\n     */\n    focus (element: HTMLElement): void {\n      behavior.focus(element)\n    },\n\n    /**\n     * The blur event is triggered when an element looses focus.\n     * The default behavior is to... TODO\n     *\n     * @event blur\n     * @param {HTMLElement} element The element triggering the event.\n     */\n    blur (element: HTMLElement): void {\n      behavior.blur(element)\n    },\n\n    /**\n     * The selection event is triggered after the user has selected some\n     * content.\n     * The default behavior is to... TODO\n     *\n     * @event selection\n     * @param {HTMLElement} element The element triggering the event.\n     * @param {Selection} selection The actual Selection object.\n     */\n    selection (element: HTMLElement, selection: Selection): void {\n      behavior.selection(element, selection)\n    },\n\n    /**\n     * The cursor event is triggered after cursor position has changed.\n     * The default behavior is to... TODO\n     *\n     * @event cursor\n     * @param {HTMLElement} element The element triggering the event.\n     * @param {Cursor} cursor The actual Cursor object.\n     */\n    cursor (element: HTMLElement, cursor: Cursor): void {\n      behavior.cursor(element, cursor)\n    },\n\n    /**\n     * The newline event is triggered when a newline should be inserted. This\n     * happens when SHIFT+ENTER key is pressed.\n     * The default behavior is to add a <br />\n     *\n     * @event newline\n     * @param {HTMLElement} element The element triggering the event.\n     * @param {Cursor} cursor The actual cursor object.\n     */\n    newline (element: HTMLElement, cursor: Cursor): void {\n      behavior.newline(element, cursor)\n    },\n\n    /**\n     * The split event is triggered when a block should be split into two\n     * blocks. This happens when ENTER is pressed within a non-empty block.\n     * The default behavior is to... TODO\n     *\n     * @event split\n     * @param {HTMLElement} element The element triggering the event.\n     * @param {String} before The HTML string before the split.\n     * @param {String} after The HTML string after the split.\n     * @param {Cursor} cursor The actual cursor object.\n     */\n    split (element: HTMLElement, before: string, after: string, cursor: Cursor): void {\n      behavior.split(element, before, after, cursor)\n    },\n\n    /**\n     * The insert event is triggered when a new block should be inserted. This\n     * happens when ENTER key is pressed at the beginning of a block (should\n     * insert before) or at the end of a block (should insert after).\n     * The default behavior is to... TODO\n     *\n     * @event insert\n     * @param {HTMLElement} element The element triggering the event.\n     * @param {String} direction The insert direction: \"before\" or \"after\".\n     * @param {Cursor} cursor The actual cursor object.\n     */\n    insert (element: HTMLElement, direction: string, cursor: Cursor): void {\n      behavior.insert(element, direction, cursor)\n    },\n\n    /**\n     * The merge event is triggered when two needs to be merged. This happens\n     * when BACKSPACE is pressed at the beginning of a block (should merge with\n     * the preceding block) or DEL is pressed at the end of a block (should\n     * merge with the following block).\n     * The default behavior is to... TODO\n     *\n     * @event merge\n     * @param {HTMLElement} element The element triggering the event.\n     * @param {String} direction The merge direction: \"before\" or \"after\".\n     * @param {Cursor} cursor The actual cursor object.\n     */\n    merge (element: HTMLElement, direction: string, cursor: Cursor): void {\n      behavior.merge(element, direction, cursor)\n    },\n\n    /**\n     * The empty event is triggered when a block is emptied.\n     * The default behavior is to... TODO\n     *\n     * @event empty\n     * @param {HTMLElement} element The element triggering the event.\n     */\n    empty (element: HTMLElement): void {\n      behavior.empty(element)\n    },\n\n    /**\n     * The switch event is triggered when the user switches to another block.\n     * This happens when an ARROW key is pressed near the boundaries of a block.\n     * The default behavior is to... TODO\n     *\n     * @event switch\n     * @param {HTMLElement} element The element triggering the event.\n     * @param {String} direction The switch direction: \"before\" or \"after\".\n     * @param {Cursor} cursor The actual cursor object.*\n     */\n    switch (element: HTMLElement, direction: string, cursor: Cursor): void {\n      behavior.switch(element, direction, cursor)\n    },\n\n    /**\n     * The move event is triggered when the user moves a selection in a block.\n     * This happens when the user selects some (or all) content in a block and\n     * an ARROW key is pressed (up: drag before, down: drag after).\n     * The default behavior is to... TODO\n     *\n     * @event move\n     * @param {HTMLElement} element The element triggering the event.\n     * @param {Selection} selection The actual Selection object.\n     * @param {String} direction The move direction: \"before\" or \"after\".\n     */\n    move (element: HTMLElement, selection: Selection, direction: string): void {\n      behavior.move(element, selection, direction)\n    },\n\n    /**\n     * The clipboard event is triggered when the user copies or cuts\n     * a selection within a block.\n     *\n     * @event clipboard\n     * @param {HTMLElement} element The element triggering the event.\n     * @param {String} action The clipboard action: \"copy\" or \"cut\".\n     * @param {Selection} selection A selection object around the copied content.\n     */\n    clipboard (element: HTMLElement, action: string, selection: Selection): void {\n      behavior.clipboard(element, action, selection)\n    },\n\n    /**\n     * The paste event is triggered when the user pastes text\n     *\n     * @event paste\n     * @param {HTMLElement} The element triggering the event.\n     * @param {Array of String} The pasted blocks\n     * @param {Cursor} The cursor object.\n     */\n    paste (element: HTMLElement, blocks: string[], cursor: Cursor): void {\n      behavior.paste(element, blocks, cursor)\n    },\n\n    /**\n     * The toggleBold event is triggered when the bold keyboard shortcut is used\n     *\n     * @event toggleBold\n     * @param {Selection} The selection object.\n     */\n    toggleBold (selection: Selection): void {\n      behavior.toggleBold(selection)\n    },\n\n    /**\n     * The toggleEmphasis event is triggered when the italic keyboard shortcut is used\n     *\n     * @event toggleEmphasis\n     * @param {Selection} The selection object.\n     */\n    toggleEmphasis (selection: Selection): void {\n      behavior.toggleEmphasis(selection)\n    }\n  }\n}\n","import NodeIterator from '../node-iterator.js'\n\nexport function textNodesUnder(node: Node): Text[] {\n  const iterator = new NodeIterator(node, 'getNextTextNode')\n  return [...iterator] as Text[]\n}\n\n// NOTE: if there is only one text node, then just that node and\n// the abs offset are returned\nexport function getTextNodeAndRelativeOffset({textNodes, absOffset}: {\n  textNodes: Text[]\n  absOffset: number\n}): {node: Text | undefined, relativeOffset: number} {\n  let cumulativeOffset = 0\n  let relativeOffset = 0\n  let targetNode: Text | undefined\n  for (let i = 0; i < textNodes.length; i++) {\n    const node = textNodes[i]\n    const nodeLength = node.textContent?.length || 0\n    if (absOffset <= cumulativeOffset + nodeLength) {\n      targetNode = node\n      relativeOffset = absOffset - cumulativeOffset\n      break\n    }\n    cumulativeOffset += nodeLength\n  }\n  return {node: targetNode, relativeOffset}\n}\n\nexport function getTotalCharCount(element: Node): number {\n  const textNodes = textNodesUnder(element)\n  const reducer = (acc: number, node: Text) => acc + (node.textContent?.length || 0)\n  return textNodes.reduce(reducer, 0)\n}\n\n","import {getTotalCharCount, textNodesUnder, getTextNodeAndRelativeOffset} from './element.js'\nimport {createRange} from './dom.js'\n\ninterface BinarySearchData {\n  currentOffset: number\n  leftLimit: number\n  rightLimit: number\n}\n\nexport interface BinaryCursorSearchResult {\n  wasFound: boolean\n  distance?: number\n  offset?: number\n}\n\n/**\n * This is a binary search algorithm implementation aimed at finding\n * a character offset position in a consecutive strings of characters\n * over several lines.\n *\n * Refer to this page in order to learn more about binary search:\n * https://en.wikipedia.org/wiki/Binary_search_algorithm\n *\n * @returns {object}\n *  - object with boolean `wasFound` indicating if the binary search found an offset and `offset` to indicate the actual character offset\n */\nexport function binaryCursorSearch({\n  host,\n  requiredOnFirstLine,\n  requiredOnLastLine,\n  positionX // coordinates relative to viewport (e.g. from getBoundingClientRect())\n}: {\n  host: HTMLElement\n  requiredOnFirstLine: boolean\n  requiredOnLastLine: boolean\n  positionX: number\n}): BinaryCursorSearchResult {\n  const hostRange = host.ownerDocument.createRange()\n  hostRange.selectNodeContents(host)\n  // JSDOM doesn't support getBoundingClientRect on Range, use element instead\n  let hostCoords: DOMRect\n  try {\n    hostCoords = hostRange.getBoundingClientRect()\n  } catch (e) {\n    // Fallback for JSDOM\n    hostCoords = host.getBoundingClientRect() || {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0,\n      toJSON: () => ({})\n    } as DOMRect\n  }\n  const totalCharCount = getTotalCharCount(host)\n  const textNodes = textNodesUnder(host)\n\n  // early terminate on empty editables\n  if (totalCharCount === 0) return {wasFound: false}\n\n  const data: BinarySearchData = {\n    currentOffset: Math.floor(totalCharCount / 2),\n    leftLimit: 0,\n    rightLimit: totalCharCount\n  }\n\n  let offset = data.currentOffset\n  let distance = 0\n  let safety = 20\n  while (data.leftLimit < data.rightLimit && safety > 0) {\n    safety = safety - 1\n    offset = data.currentOffset\n    const range = createRangeAtCharacterOffset({textNodes, offset: data.currentOffset})\n    // JSDOM doesn't support getBoundingClientRect on Range\n    let coords: DOMRect\n    try {\n      coords = range.getBoundingClientRect()\n    } catch (e) {\n      // Fallback for JSDOM - use a mock DOMRect\n      coords = {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0,\n        toJSON: () => ({})\n      } as DOMRect\n    }\n    distance = Math.abs(coords.left - positionX)\n\n    // up / down axis\n    if (requiredOnFirstLine && hostCoords.top !== coords.top) {\n      moveLeft(data)\n      continue\n    } else if (requiredOnLastLine && hostCoords.bottom !== coords.bottom) {\n      moveRight(data)\n      continue\n    }\n\n    // left / right axis\n    if (positionX < coords.left) {\n      moveLeft(data)\n    } else {\n      moveRight(data)\n    }\n  }\n\n  const range = createRangeAtCharacterOffset({textNodes, offset: data.currentOffset})\n  // JSDOM doesn't support getBoundingClientRect on Range\n  let coords: DOMRect\n  try {\n    coords = range.getBoundingClientRect()\n  } catch (e) {\n    // Fallback for JSDOM\n    coords = {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0,\n      toJSON: () => ({})\n    } as DOMRect\n  }\n  const finalDistance = Math.abs(coords.left - positionX)\n\n  // Decide if last or second last offset is closest\n  if (finalDistance < distance) {\n    distance = finalDistance\n    offset = data.currentOffset\n  }\n\n  return {distance, offset, wasFound: true}\n}\n\n// move the binary search index in between the current position and the left limit\nfunction moveLeft(data: BinarySearchData): void {\n  data.rightLimit = data.currentOffset\n  data.currentOffset = Math.floor((data.currentOffset + data.leftLimit) / 2)\n}\n\n// move the binary search index in between the current position and the right limit\nfunction moveRight(data: BinarySearchData): void {\n  data.leftLimit = data.currentOffset\n  data.currentOffset = Math.ceil((data.currentOffset + data.rightLimit) / 2)\n}\n\nfunction createRangeAtCharacterOffset({textNodes, offset}: {\n  textNodes: Text[]\n  offset: number\n}): Range {\n  const {node, relativeOffset} = getTextNodeAndRelativeOffset({textNodes, absOffset: offset})\n  if (!node) throw new Error('Could not find text node for offset')\n\n  const newRange = node.ownerDocument.createRange()\n  newRange.setStart(node, relativeOffset)\n  newRange.collapse(true)\n\n  return newRange\n}\n\n","import config from './config.js'\nimport error from './util/error.js'\nimport * as parser from './parser.js'\nimport * as block from './block.js'\nimport * as content from './content.js'\nimport * as clipboard from './clipboard.js'\nimport Dispatcher from './dispatcher.js'\nimport Cursor from './cursor.js'\nimport highlightSupport from './highlight-support.js'\nimport MonitoredHighlighting from './monitored-highlighting.js'\nimport createDefaultEvents from './create-default-events.js'\nimport {textNodesUnder, getTextNodeAndRelativeOffset} from './util/element.js'\nimport {binaryCursorSearch, BinaryCursorSearchResult} from './util/binary_search.js'\nimport {domArray, createRange, nodeContainsRange} from './util/dom.js'\nimport type {Config} from './config.js'\n\nexport interface EditableConfig {\n  window?: Window\n  defaultBehavior?: boolean\n  mouseMoveSelectionChanges?: boolean\n  browserSpellcheck?: boolean\n}\n\nexport interface EnableOptions {\n  normalize?: boolean\n  plainText?: boolean\n}\n\nexport type CursorPosition = 'beginning' | 'end' | 'before' | 'after'\n\nexport interface HighlightOptions {\n  editableHost: HTMLElement\n  text: string\n  highlightId: string\n  textRange?: {\n    start: number\n    end: number\n  }\n  raiseEvents?: boolean\n  type?: string\n}\n\nexport interface TextRange {\n  start: number\n  end: number\n  text?: string\n}\n\nexport type EditableEvent = \n  | 'focus' \n  | 'blur' \n  | 'flow' \n  | 'selection' \n  | 'cursor' \n  | 'newline'\n  | 'insert' \n  | 'split' \n  | 'merge' \n  | 'empty' \n  | 'change' \n  | 'switch'\n  | 'move' \n  | 'clipboard' \n  | 'paste' \n  | 'spellcheckUpdated' \n  | 'selectToBoundary'\n  | 'init'\n\nexport class Editable {\n  public config: Required<EditableConfig>\n  public win: Window\n  public editableSelector: string\n  public dispatcher: Dispatcher\n  public highlighting?: MonitoredHighlighting\n  public spellcheck?: {\n    checkSpelling: (elem: HTMLElement) => void\n  }\n  static parser: typeof parser\n  static content: typeof content\n\n  constructor(instanceConfig?: EditableConfig) {\n    const defaultInstanceConfig: Required<EditableConfig> = {\n      window: window,\n      defaultBehavior: true,\n      mouseMoveSelectionChanges: false,\n      browserSpellcheck: true\n    }\n\n    this.config = Object.assign(defaultInstanceConfig, instanceConfig)\n    this.win = this.config.window\n    this.editableSelector = `.${config.editableClass}`\n\n    this.dispatcher = new Dispatcher(this)\n    if (this.config.defaultBehavior === true) {\n      (this.dispatcher.on as any)(createDefaultEvents(this))\n    }\n  }\n\n  static getGlobalConfig(): Config {\n    return config\n  }\n\n  static globalConfig(globalConfig: Partial<Config>): void {\n    Object.assign(config, globalConfig)\n    clipboard.updateConfig(config)\n  }\n\n  add(target: HTMLElement | HTMLElement[] | string, options?: EnableOptions | boolean): this {\n    this.enable(target, options)\n    return this\n  }\n\n  remove(target: HTMLElement | HTMLElement[] | string): this {\n    const targets = domArray(target, this.win.document)\n\n    this.disable(targets)\n\n    for (const element of targets) {\n      element.classList.remove(config.editableDisabledClass)\n    }\n\n    return this\n  }\n\n  disable(target?: HTMLElement | HTMLElement[] | string): this {\n    const targets = domArray(target || `.${config.editableClass}`, this.win.document)\n\n    for (const element of targets) {\n      block.disable(element)\n    }\n\n    return this\n  }\n\n  enable(target?: HTMLElement | HTMLElement[] | string, options?: EnableOptions | boolean): this {\n    const opts = typeof options === 'boolean' ? {normalize: options} : (options ?? {})\n    const {\n      normalize = false,\n      plainText = false\n    } = opts\n    const shouldSpellcheck = this.config.browserSpellcheck\n    const targets = domArray(target || `.${config.editableDisabledClass}`, this.win.document)\n\n    for (const element of targets) {\n      block.init(element, {normalize, plainText, shouldSpellcheck})\n      this.dispatcher.notify('init', element)\n    }\n\n    return this\n  }\n\n  suspend(target?: HTMLElement | HTMLElement[] | string): this {\n    const targets = domArray(target || `.${config.editableClass}`, this.win.document)\n\n    for (const element of targets) {\n      element.removeAttribute('contenteditable')\n    }\n\n    this.dispatcher.suspend()\n    return this\n  }\n\n  continue(target?: HTMLElement | HTMLElement[] | string): this {\n    const targets = domArray(target || `.${config.editableClass}`, this.win.document)\n\n    for (const element of targets) {\n      element.setAttribute('contenteditable', 'true')\n    }\n\n    this.dispatcher.continue()\n    return this\n  }\n\n  createCursor(element: HTMLElement, position: CursorPosition = 'beginning'): Cursor | undefined {\n    const host = Cursor.findHost(element, this.editableSelector)\n    if (!host) return undefined\n\n    const range = createRange(this.win)\n\n    if (position === 'beginning' || position === 'end') {\n      range.selectNodeContents(element)\n      range.collapse(position === 'beginning')\n    } else if (element !== host) {\n      if (position === 'before') {\n        range.setStartBefore(element)\n        range.setEndBefore(element)\n      } else if (position === 'after') {\n        range.setStartAfter(element)\n        range.setEndAfter(element)\n      }\n    } else {\n      error('EditableJS: cannot create cursor outside of an editable block.')\n    }\n\n    return new Cursor(host, range)\n  }\n\n  createCursorAtCharacterOffset({element, offset}: {element: HTMLElement, offset: number}): Cursor {\n    const textNodes = textNodesUnder(element)\n    const {node, relativeOffset} = getTextNodeAndRelativeOffset({textNodes, absOffset: offset})\n    if (!node) throw new Error('Could not find text node for offset')\n    const newRange = createRange(this.win)\n    newRange.setStart(node, relativeOffset)\n    newRange.collapse(true)\n\n    const host = Cursor.findHost(element, this.editableSelector)\n    if (!host) throw new Error('No editable host found')\n    const nextCursor = new Cursor(host, newRange)\n\n    nextCursor.setVisibleSelection()\n    return nextCursor\n  }\n\n  createCursorAtBeginning(element: HTMLElement): Cursor | undefined {\n    return this.createCursor(element, 'beginning')\n  }\n\n  createCursorAtEnd(element: HTMLElement): Cursor | undefined {\n    return this.createCursor(element, 'end')\n  }\n\n  createCursorBefore(element: HTMLElement): Cursor | undefined {\n    return this.createCursor(element, 'before')\n  }\n\n  createCursorAfter(element: HTMLElement): Cursor | undefined {\n    return this.createCursor(element, 'after')\n  }\n\n  getContent(element: HTMLElement | DocumentFragment): string {\n    return content.extractContent(element)\n  }\n\n  appendTo(inputElement: HTMLElement | string, contentToAppend: string | DocumentFragment): Cursor {\n    const element = content.adoptElement(inputElement, this.win.document)\n\n    const cursor = this.createCursor(element, 'end')\n    if (!cursor) throw new Error('Could not create cursor')\n    cursor.insertAfter(typeof contentToAppend === 'string'\n      ? content.createFragmentFromString(contentToAppend)\n      : contentToAppend\n    )\n    return cursor\n  }\n\n  prependTo(inputElement: HTMLElement | string, contentToPrepend: string | DocumentFragment): Cursor {\n    const element = content.adoptElement(inputElement, this.win.document)\n\n    const cursor = this.createCursor(element, 'beginning')\n    if (!cursor) throw new Error('Could not create cursor')\n    cursor.insertBefore(typeof contentToPrepend === 'string'\n      ? content.createFragmentFromString(contentToPrepend)\n      : contentToPrepend\n    )\n    return cursor\n  }\n\n  getSelection(editableHost?: HTMLElement): Cursor | any | undefined {\n    const selection = this.dispatcher.selectionWatcher.getFreshSelection()\n    if (!editableHost || !selection) return selection\n\n    const range = selection.range\n\n    if (editableHost?.isConnected && nodeContainsRange(editableHost, range)) {\n      return selection\n    }\n    return undefined\n  }\n\n  setupHighlighting(hightlightingConfig: any): this {\n    this.highlighting = new MonitoredHighlighting(this, hightlightingConfig, undefined)\n    return this\n  }\n\n  setupSpellcheck(conf: any): this {\n    let marker: string | undefined\n\n    if (conf.markerNode) {\n      marker = conf.markerNode.outerHTML\n    }\n\n    this.setupHighlighting({\n      throttle: conf.throttle,\n      spellcheck: {\n        marker: marker,\n        spellcheckService: conf.spellcheckService\n      }\n    })\n\n    this.spellcheck = {\n      checkSpelling: (elem: HTMLElement) => {\n        this.highlighting?.highlight(elem)\n      }\n    }\n    return this\n  }\n\n  highlight({editableHost, text, highlightId, textRange, raiseEvents, type = 'comment'}: HighlightOptions): number {\n    if (!textRange) {\n      const result = highlightSupport.highlightText(editableHost, text, highlightId, type, raiseEvents ? this.dispatcher : undefined, this.win)\n      return result || -1\n    }\n    if (typeof textRange.start !== 'number' || typeof textRange.end !== 'number') {\n      error(\n        'Error in Editable.highlight: You passed a textRange object with invalid keys. Expected shape: { start: Number, end: Number }'\n      )\n      return -1\n    }\n    if (textRange.start === textRange.end) {\n      error(\n        'Error in Editable.highlight: You passed a textRange object with equal start and end offsets, which is considered a cursor and therefore unfit to create a highlight.'\n      )\n      return -1\n    }\n    return highlightSupport.highlightRange(editableHost, text, highlightId, textRange.start, textRange.end, raiseEvents ? this.dispatcher : undefined, this.win, type)\n  }\n\n  getHighlightPositions({editableHost, type}: {editableHost: HTMLElement, type?: string}): Record<string, TextRange> {\n    const result = highlightSupport.extractHighlightedRanges(\n      editableHost,\n      type\n    )\n    if (!result) return {}\n    // Convert the result to TextRange format (without nativeRange)\n    const textRanges: Record<string, TextRange> = {}\n    for (const highlightId in result) {\n      const {start, end, text} = result[highlightId]\n      textRanges[highlightId] = {start, end, text}\n    }\n    return textRanges\n  }\n\n  removeHighlight({editableHost, highlightId, raiseEvents}: {editableHost: HTMLElement, highlightId: string, raiseEvents?: boolean}): void {\n    highlightSupport.removeHighlight(editableHost, highlightId, raiseEvents ? this.dispatcher : undefined)\n  }\n\n  decorateHighlight({editableHost, highlightId, addCssClass, removeCssClass}: {editableHost: HTMLElement, highlightId: string, addCssClass?: string, removeCssClass?: string}): void {\n    highlightSupport.updateHighlight(editableHost, highlightId, addCssClass, removeCssClass)\n  }\n\n  on(event: EditableEvent, handler: (...args: any[]) => any): this {\n    this.dispatcher.on(event, handler)\n    return this\n  }\n\n  off(...args: any[]): this {\n    this.dispatcher.off.apply(this.dispatcher, args)\n    return this\n  }\n\n  unload(): this {\n    this.dispatcher.unload()\n    return this\n  }\n\n  findClosestCursorOffset({\n    element,\n    origCoordinates,\n    requiredOnFirstLine = false,\n    requiredOnLastLine = false\n  }: {\n    element: HTMLElement\n    origCoordinates: DOMRect\n    requiredOnFirstLine?: boolean\n    requiredOnLastLine?: boolean\n  }): BinaryCursorSearchResult {\n    const positionX: number = this.dispatcher.switchContext && this.dispatcher.switchContext.positionX !== undefined\n      ? this.dispatcher.switchContext.positionX\n      : origCoordinates.left\n\n    return binaryCursorSearch({\n      host: element,\n      requiredOnFirstLine,\n      requiredOnLastLine,\n      positionX\n    })\n  }\n}\n\n// Expose modules and editable\nEditable.parser = parser\nEditable.content = content\n\n// Set up callback functions for several events.\nconst eventNames: EditableEvent[] = ['focus', 'blur', 'flow', 'selection', 'cursor', 'newline',\n  'insert', 'split', 'merge', 'empty', 'change', 'switch',\n  'move', 'clipboard', 'paste', 'spellcheckUpdated', 'selectToBoundary']\n\neventNames.forEach((name) => {\n  // Generate a callback function to subscribe to an event.\n  (Editable.prototype as any)[name] = function (handler: (...args: any[]) => any) {\n    return this.on(name, handler)\n  }\n})\n\n","var n,l,u,t,i,o,r,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,d=Array.isArray;function w(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,o,r,e={};for(r in u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:e[r]=u[r];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===e[r]&&(e[r]=l.defaultProps[r]);return m(l,e,i,o,null)}function m(n,t,i,o,r){var e={type:n,props:t,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++u:r,__i:-1,__u:0};return null==r&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||o!=l.debounceRendering)&&((o=l.debounceRendering)||r)($)}function $(){for(var n,u,t,o,r,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,o=void 0,r=(o=(u=n).__v).__e,f=[],c=[],u.__P&&((t=w({},o)).__v=o.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,o,u.__n,u.__P.namespaceURI,32&o.__u?[r]:null,f,null==r?S(o):r,!!(32&o.__u),c),t.__v=o.__v,t.__.__k[t.__i]=t,N(f,t,c),o.__e=o.__=null,t.__e!=r&&C(t)));$.__r=0}function I(n,l,u,t,i,o,r,e,f,c,s){var a,h,y,d,w,g,_,m=t&&t.__k||v,b=l.length;for(f=P(u,l,m,f,b),a=0;a<b;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:m[y.__i]||p,y.__i=a,g=O(n,y,h,i,o,r,e,f,c,s),d=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&B(h.ref,null,y),s.push(y.ref,y.__c||d,y)),null==w&&null!=d&&(w=d),(_=!!(4&y.__u))||h.__k===y.__k?f=A(y,f,n,_):\"function\"==typeof y.type&&void 0!==g?f=g:d&&(f=d.nextSibling),y.__u&=-7);return u.__e=w,f}function P(n,l,u,t,i){var o,r,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),o=0;o<i;o++)null!=(r=l[o])&&\"boolean\"!=typeof r&&\"function\"!=typeof r?(\"string\"==typeof r||\"number\"==typeof r||\"bigint\"==typeof r||r.constructor==String?r=n.__k[o]=m(null,r,null,null,null):d(r)?r=n.__k[o]=m(k,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?r=n.__k[o]=m(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):n.__k[o]=r,f=o+h,r.__=n,r.__b=n.__b+1,e=null,-1!=(c=r.__i=L(r,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),\"function\"!=typeof r.type&&(r.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,r.__u|=4))):n.__k[o]=null;if(a)for(o=0;o<s;o++)null!=(e=u[o])&&0==(2&e.__u)&&(e.__e==t&&(t=S(e)),D(e,e));return t}function A(n,l,u,t){var i,o;if(\"function\"==typeof n.type){for(i=n.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=n,l=A(i[o],l,u,t));return l}n.__e!=l&&(t&&(l&&n.type&&!l.parentNode&&(l=S(n)),u.insertBefore(n.__e,l||null)),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(d(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,o,r,e=n.key,f=n.type,c=l[u],s=null!=c&&0==(2&c.__u);if(null===c&&null==e||s&&e==c.key&&f==c.type)return u;if(t>(s?1:0))for(i=u-1,o=u+1;i>=0||o<l.length;)if(null!=(c=l[r=i>=0?i--:o++])&&0==(2&c.__u)&&e==c.key&&f==c.type)return r;return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function j(n,l,u,t,i){var o,r;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])o=l!=(l=l.replace(f,\"$1\")),r=l.toLowerCase(),l=r in n||\"onFocusOut\"==l||\"onFocusIn\"==l?r.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,o?a:s,o)):n.removeEventListener(l,o?a:s,o);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,o,r,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(void 0!==u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),r=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof j)try{if(b=u.props,S=\"prototype\"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=E),C&&C.sub(h),h.state||(h.state={}),h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=w({},h.__s)),w(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),u.__v==t.__v||!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=w(w({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=V(a.props.children)),f=I(n,d(L)?L:[L],u,t,i,o,r,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=r)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;r[r.indexOf(f)]=null,u.__e=f}else{for(T=r.length;T--;)g(r[T]);z(u)}else u.__e=t.__e,u.__k=t.__k,n.then||z(u);l.__e(n,u,t)}else null==r&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=q(t.__e,u,t,i,o,r,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(z)}function N(n,u,t){for(var i=0;i<t.length;i++)B(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function V(n){return\"object\"!=typeof n||null==n||n.__b&&n.__b>0?n:d(n)?n.map(V):w({},n)}function q(u,t,i,o,r,e,f,c,s){var a,h,v,y,w,_,m,b=i.props||p,k=t.props,x=t.type;if(\"svg\"==x?r=\"http://www.w3.org/2000/svg\":\"math\"==x?r=\"http://www.w3.org/1998/Math/MathML\":r||(r=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((w=e[a])&&\"setAttribute\"in w==!!x&&(x?w.localName==x:3==w.nodeType)){u=w,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(r,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(w=u.attributes[a]).name]=w.value;for(a in b)if(w=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=w;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;j(u,a,null,w,r)}for(a in k)w=k[a],\"children\"==a?y=w:\"dangerouslySetInnerHTML\"==a?h=w:\"value\"==a?_=w:\"checked\"==a?m=w:c&&\"function\"!=typeof w||b[a]===w||j(u,a,w,b[a],r);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),I(\"template\"==t.type?u.content:u,d(y)?y:[y],t,i,o,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":r,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a=\"value\",\"progress\"==x&&null==_?u.removeAttribute(\"value\"):null!=_&&(_!==u[a]||\"progress\"==x&&!_||\"option\"==x&&_!=b[a])&&j(u,a,_,b[a],r),a=\"checked\",null!=m&&m!=u[a]&&j(u,a,m,b[a],r))}return u}function B(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function D(n,u,t){var i,o;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||B(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&D(i[o],u,t||\"function\"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function E(n,l,u){return this.constructor(n,u)}function G(u,t,i){var o,r,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),r=(o=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!o&&i||t).__k=_(k,null,[u]),r||p,p,t.namespaceURI,!o&&i?[i]:r?null:t.firstChild?n.call(t.childNodes):null,e,!o&&i?i:r?r.__e:t.firstChild,o,f),N(e,u,f)}function J(n,l){G(n,l,J)}function K(l,u,t){var i,o,r,e,f=w({},l.props);for(r in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:f[r]=void 0===u[r]&&null!=e?e[r]:u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,o||l.ref,null)}function Q(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c=\"__cC\"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,o,r;l=l.__;)if((i=l.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(n)),r=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),r=i.__d),r)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&void 0===n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=w({},this.state),\"function\"==typeof n&&(n=n(w({},u),this.props)),n&&w(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],r=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0;export{x as Component,k as Fragment,K as cloneElement,Q as createContext,_ as createElement,b as createRef,_ as h,J as hydrate,t as isValidElement,l as options,G as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","import{options as r,Fragment as e}from\"preact\";export{Fragment}from\"preact\";var t=/[\"&<]/;function n(r){if(0===r.length||!1===t.test(r))return r;for(var e=0,n=0,o=\"\",f=\"\";n<r.length;n++){switch(r.charCodeAt(n)){case 34:f=\"&quot;\";break;case 38:f=\"&amp;\";break;case 60:f=\"&lt;\";break;default:continue}n!==e&&(o+=r.slice(e,n)),o+=f,e=n+1}return n!==e&&(o+=r.slice(e,n)),o}var o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f=0,i=Array.isArray;function u(e,t,n,o,i,u){t||(t={});var a,c,p=t;if(\"ref\"in p)for(c in p={},t)\"ref\"==c?a=t[c]:p[c]=t[c];var l={type:e,props:p,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f,__i:-1,__u:0,__source:i,__self:u};if(\"function\"==typeof e&&(a=e.defaultProps))for(c in a)void 0===p[c]&&(p[c]=a[c]);return r.vnode&&r.vnode(l),l}function a(r){var t=u(e,{tpl:r,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var c={},p=/[A-Z]/g;function l(e,t){if(r.attr){var f=r.attr(e,t);if(\"string\"==typeof f)return f}if(t=function(r){return null!==r&&\"object\"==typeof r&&\"function\"==typeof r.valueOf?r.valueOf():r}(t),\"ref\"===e||\"key\"===e)return\"\";if(\"style\"===e&&\"object\"==typeof t){var i=\"\";for(var u in t){var a=t[u];if(null!=a&&\"\"!==a){var l=\"-\"==u[0]?u:c[u]||(c[u]=u.replace(p,\"-$&\").toLowerCase()),s=\";\";\"number\"!=typeof a||l.startsWith(\"--\")||o.test(l)||(s=\"px;\"),i=i+l+\":\"+a+s}}return e+'=\"'+n(i)+'\"'}return null==t||!1===t||\"function\"==typeof t||\"object\"==typeof t?\"\":!0===t?e:e+'=\"'+n(\"\"+t)+'\"'}function s(r){if(null==r||\"boolean\"==typeof r||\"function\"==typeof r)return null;if(\"object\"==typeof r){if(void 0===r.constructor)return r;if(i(r)){for(var e=0;e<r.length;e++)r[e]=s(r[e]);return r}}return n(\"\"+r)}export{u as jsx,l as jsxAttr,u as jsxDEV,s as jsxEscape,a as jsxTemplate,u as jsxs};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import {Component, cloneElement, render} from 'preact'\nimport {PropTypes} from 'prop-types'\nimport {closest} from '../src/util/dom.ts'\n\n// Custom CSSTransition component to replace react-transition-group\nclass CSSTransition extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      isEntering: false,\n      isEntered: false\n    }\n    this.timeoutId = null\n  }\n\n  componentDidMount () {\n    if (this.props.in) {\n      // Trigger enter animation\n      this.setState({isEntering: true})\n      // Use requestAnimationFrame to ensure DOM is ready\n      requestAnimationFrame(() => {\n        this.setState({isEntered: true})\n      })\n      // Clear classes after timeout\n      const timeout = this.props.timeout || 0\n      if (timeout > 0) {\n        this.timeoutId = setTimeout(() => {\n          this.setState({isEntering: false})\n        }, timeout)\n      }\n    }\n  }\n\n  componentWillUnmount () {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId)\n    }\n  }\n\n  render () {\n    const {children, classNames} = this.props\n    const {isEntering, isEntered} = this.state\n    // Preact children can be an array or single element - get the first if array\n    const child = Array.isArray(children) ? children[0] : children\n\n    // Build class names for enter animation\n    let className = child.props.className || ''\n    if (isEntering) {\n      className += ` ${classNames}-enter`\n    }\n    if (isEntered) {\n      className += ` ${classNames}-enter-active`\n    }\n\n    return cloneElement(child, {\n      className: className.trim()\n    })\n  }\n}\n\n// Custom TransitionGroup component to replace react-transition-group\nclass TransitionGroup extends Component {\n  render () {\n    // Since exit is disabled, just render children directly\n    // TransitionGroup from react-transition-group manages keys and transitions\n    // For our simple use case, we can just wrap the children\n    return this.props.children || null\n  }\n}\n\nclass Events extends Component {\n  render () {\n    const transitionOptions = {\n      classNames: 'events',\n      in: true,\n      timeout: 500\n    }\n\n    const defaultContent = (<CSSTransition key='empty-entry' {...transitionOptions}>\n      <div>Nothing to see yet.</div>\n    </CSSTransition>)\n\n    const content = this.props.list.map(function (entry) {\n      return (<CSSTransition key={entry.id} {...transitionOptions}>\n        <div className='events-list-entry'>\n          <span className='event-name'>{entry.name}</span>\n          {entry.content}\n        </div>\n      </CSSTransition>)\n    })\n\n    return (<div className='events-list'>\n      <TransitionGroup\n        children={content.length ? content : defaultContent}\n        enter={true}\n        exit={false}\n      />\n    </div>)\n  }\n}\nEvents.propTypes = {\n  list: PropTypes.array\n}\n\nclass CursorPosition extends Component {\n  render () {\n    return (<span className='cursor-position'>\n      {this.props.before}\n      <i>&nbsp;</i>\n      {this.props.after}\n    </span>)\n  }\n}\nCursorPosition.propTypes = {\n  before: PropTypes.string,\n  after: PropTypes.string\n}\n\nclass Selection extends Component {\n  render () {\n    return <span className='selection'>{this.props.content}</span>\n  }\n}\nSelection.propTypes = {\n  content: PropTypes.string\n}\n\nclass Clipboard extends Component {\n  render () {\n    return (<span>\n      <span className='clipboard-action'>{this.props.action}</span> <span className='clipboard-content'>{this.props.content}</span>\n    </span>)\n  }\n}\nClipboard.propTypes = {\n  action: PropTypes.string,\n  content: PropTypes.string\n}\n\nlet guid = 0\nconst listLength = 7\nconst events = []\n\nfunction addToList (event) {\n  events.unshift(event)\n  if (events.length > listLength) removeFromList()\n}\n\nfunction removeFromList () {\n  events.pop()\n  draw()\n}\n\nfunction showEvent (event) {\n  event.id = ++guid\n  addToList(event)\n  draw()\n}\n\nfunction draw () {\n  const container = document.querySelector('.paragraph-example-events')\n  if (container) {\n    render(<Events list={events} />, container)\n  }\n}\n\nfunction isFromFirstExample (elem) {\n  return !!closest(elem, '.paragraph-example')\n}\n\nexport default function (editable) {\n  editable\n\n    .on('focus', (elem) => {\n      if (!isFromFirstExample(elem)) return\n      showEvent({\n        name: 'focus'\n      })\n    })\n\n    .on('blur', (elem) => {\n      if (!isFromFirstExample(elem)) return\n      showEvent({\n        name: 'blur'\n      })\n    })\n\n    .on('cursor', (elem, cursor) => {\n      if (!isFromFirstExample(elem)) return\n      if (!cursor) return\n      let before = cursor.before().textContent\n      let after = cursor.after().textContent\n      const beforeMatch = /[^ ]{0,10}[ ]?$/.exec(before)\n      const afterMatch = /^[ ]?[^ ]{0,10}/.exec(after)\n      if (beforeMatch) before = beforeMatch[0]\n      if (beforeMatch) after = afterMatch[0]\n      showEvent({\n        name: 'cursor',\n        content: <CursorPosition before={before} after={after} />\n      })\n    })\n\n    .on('selection', (elem, selection) => {\n      if (!isFromFirstExample(elem)) return\n      if (!selection) return\n      showEvent({\n        name: 'selection',\n        content: <Selection content={selection.text()} />\n      })\n    })\n\n    .on('change', (elem) => {\n      if (!isFromFirstExample(elem)) return\n      showEvent({\n        name: 'change'\n      })\n    })\n\n    .on('clipboard', (elem, action, selection) => {\n      if (!isFromFirstExample(elem)) return\n      showEvent({\n        name: 'clipboard',\n        content: <Clipboard action={action} content={selection.text()} />\n      })\n    })\n\n    .on('paste', (elem, blocks, cursor) => {\n      if (!isFromFirstExample(elem)) return\n\n      let text = blocks.join(' ')\n      if (text.length > 40) text = `${text.substring(0, 38)}...`\n\n      showEvent({\n        name: 'paste',\n        content: <Clipboard content={text} />\n      })\n    })\n\n    .on('insert', (elem, direction, cursor) => {\n      if (!isFromFirstExample(elem)) return\n      const content = direction === 'after'\n        ? 'Insert a new block after the current one'\n        : 'Insert a new block before the current one'\n\n      showEvent({\n        name: 'insert',\n        content\n      })\n    })\n\n    .on('split', (elem, fragmentA, fragmentB, cursor) => {\n      if (!isFromFirstExample(elem)) return\n      showEvent({\n        name: 'split',\n        content: <span>Split this block</span>\n      })\n    })\n\n    .on('merge', (elem, direction) => {\n      if (!isFromFirstExample(elem)) return\n      const content = direction === 'after'\n        ? 'Merge this block with the following block'\n        : 'Merge this block with the previous block'\n\n      showEvent({\n        name: 'merge',\n        content: <span>{content}</span>\n      })\n    })\n\n    .on('switch', (elem, direction, cursor) => {\n      if (!isFromFirstExample(elem)) return\n      const content = direction === 'down'\n        ? 'Set the focus to the following block'\n        : 'Set the focus to the previous block'\n\n      showEvent({\n        name: 'switch',\n        content: <span>{content}</span>\n      })\n    })\n\n    .on('newline', (elem) => {\n      if (!isFromFirstExample(elem)) return\n      showEvent({\n        name: 'newline'\n      })\n    })\n\n  draw()\n}\n","import Prism from 'prismjs'\n\nimport {Editable} from '../src/core.ts'\nimport eventList from './events.jsx'\nimport {getSelectionCoordinates} from '../src/util/dom.ts'\n\n// Paragraph Example\nconst editable = new Editable({browserSpellcheck: false})\n\n// Paragraph\n// ---------\neditable.enable('.paragraph-example p', {normalize: true})\neventList(editable)\n\n// Text formatting toolbar\neditable.enable('.formatting-example p', {normalize: true})\nsetupTooltip()\n\n// Plain Text\neditable.enable('.plain-text-example.example-sheet', {plainText: true})\n\neditable.enable('.styling-example p', {normalize: true})\nconst secondExample = document.querySelector('.formatting-example p')\nupdateCode(secondExample)\n\neditable.on('change', (elem) => {\n  if (elem === secondExample) updateCode(elem)\n})\n\n// Styling\n// -------\nconst styleSelect = document.querySelector('select[name=\"editable-styles\"]')\nif (styleSelect) {\n  styleSelect.addEventListener('change', (evt) => {\n    for (const el of document.querySelectorAll('.styling-example p')) {\n      el.classList.remove('example-style-default', 'example-style-dark')\n      el.classList.add(`example-style-${evt.target.value}`)\n    }\n  })\n}\n\n// Inline element\neditable.add('.inline-example span')\n\n// IFrame\n// ------\nconst iframeExample = document.querySelector('.iframe-example')\nif (iframeExample) {\n  iframeExample.addEventListener('load', function () {\n    const iframeWindow = this.contentWindow\n    const iframeEditable = new Editable({\n      window: iframeWindow\n    })\n\n    const iframeBody = this.contentDocument.body\n    iframeEditable.add(iframeBody.querySelectorAll('.is-editable'))\n  })\n}\n\n// Text Formatting\n// ---------------\n\nlet currentSelection\nfunction setupTooltip () {\n  const tooltipWrapper = document.createElement('div')\n  tooltipWrapper.innerHTML = '<div class=\"selection-tip\" style=\"display:none;\">' +\n    `<button class=\"js-format js-format-bold\"><img width=\"20\" height=20\" src=\"data:image/svg+xml;base64,${btoa(`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"fill: #eee\"><path d=\"M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z\" /></svg>`)}\"></button>` +\n    `<button class=\"js-format js-format-italic\"><img width=\"20\" height=20\" src=\"data:image/svg+xml;base64,${btoa(`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"fill: #eee\"><path d=\"M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z\" /></svg>`)}\"></button>` +\n    `<button class=\"js-format js-format-underline\"><img width=\"20\" height=20\" src=\"data:image/svg+xml;base64,${btoa(`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"fill: #eee\"><path d=\"M5,21H19V19H5V21M12,17A6,6 0 0,0 18,11V3H15.5V11A3.5,3.5 0 0,1 12,14.5A3.5,3.5 0 0,1 8.5,11V3H6V11A6,6 0 0,0 12,17Z\" /></svg>`)}\"></button>` +\n    `<button class=\"js-format js-format-link\"><img width=\"20\" height=20\" src=\"data:image/svg+xml;base64,${btoa(`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"fill: #eee\"><path d=\"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z\" /></svg>`)}\"></button>` +\n    `<button class=\"js-format js-format-quote\"><img width=\"20\" height=20\" src=\"data:image/svg+xml;base64,${btoa(`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"fill: #eee\"><path d=\"M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z\" /></svg>`)}\"></button>` +\n    `<button class=\"js-format js-format-comment\"><img width=\"20\" height=20\" src=\"data:image/svg+xml;base64,${btoa(`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" style=\"fill: #eee\"><path d=\"M240-400h122l200-200q9-9 13.5-20.5T580-643q0-11-5-21.5T562-684l-36-38q-9-9-20-13.5t-23-4.5q-11 0-22.5 4.5T440-722L240-522v122Zm280-243-37-37 37 37ZM300-460v-38l101-101 20 18 18 20-101 101h-38Zm121-121 18 20-38-38 20 18Zm26 181h273v-80H527l-80 80ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z\"/></svg>`)}\"></button>` +\n    `<button class=\"js-format js-format-emoji\"><img width=\"20\" height=20\" src=\"data:image/svg+xml;base64,${btoa(`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"fill: #eee\"><path d=\"M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M15.5,8A1.5,1.5 0 0,1 17,9.5A1.5,1.5 0 0,1 15.5,11A1.5,1.5 0 0,1 14,9.5A1.5,1.5 0 0,1 15.5,8M8.5,8A1.5,1.5 0 0,1 10,9.5A1.5,1.5 0 0,1 8.5,11A1.5,1.5 0 0,1 7,9.5A1.5,1.5 0 0,1 8.5,8M12,17.5C9.67,17.5 7.69,16.04 6.89,14H17.11C16.3,16.04 14.33,17.5 12,17.5Z\" /></svg>`)}\"></button>` +\n    `<button class=\"js-format js-format-whitespace\"><img width=\"20\" height=20\" src=\"data:image/svg+xml;base64,${btoa(`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"fill: #eee\"><path d=\"M3 15H5V19H19V15H21V19C21 20.1 20.1 21 19 21H5C3.9 21 3 20.1 3 19V15Z\" /></svg>`)}\"></button>` +\n    `<button class=\"js-format js-format-clear\"><img width=\"20\" height=20\" src=\"data:image/svg+xml;base64,${btoa(`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"fill: #eee\"><path d=\"M16.24,3.56L21.19,8.5C21.97,9.29 21.97,10.55 21.19,11.34L12,20.53C10.44,22.09 7.91,22.09 6.34,20.53L2.81,17C2.03,16.21 2.03,14.95 2.81,14.16L13.41,3.56C14.2,2.78 15.46,2.78 16.24,3.56M4.22,15.58L7.76,19.11C8.54,19.9 9.8,19.9 10.59,19.11L14.12,15.58L9.17,10.63L4.22,15.58Z\" /></svg>`)}\"></button>` +\n    '</div>'\n\n  const tooltip = tooltipWrapper.firstElementChild\n  document.body.appendChild(tooltip)\n\n  editable\n    .selection((el, selection) => {\n      currentSelection = selection\n      if (!selection) {\n        tooltip.style.display = 'none'\n        return\n      }\n\n      const coords = getSelectionCoordinates(window.getSelection())?.[0]\n      tooltip.style.display = 'block'\n      tooltip.style.position = 'fixed'\n\n      // position tooltip\n      const top = coords.top - tooltip.offsetHeight - 15\n      // eslint-disable-next-line\n      const left = coords.left + (coords.width / 2) - (tooltip.offsetWidth / 2)\n      tooltip.style.top = `${top}px`\n      tooltip.style.left = `${left}px`\n    })\n    .blur(() => {\n      tooltip.style.display = 'none'\n    })\n\n  setupTooltipListeners(tooltip)\n}\n\nfunction setupTooltipListeners (tooltip) {\n  // prevent editable from loosing focus\n  // document\n  //   .addEventListener('mousedown', (evt) => {})\n  const on = (type, selector, func) => {\n    for (const el of tooltip.querySelectorAll(selector)) {\n      el.addEventListener(type, func)\n    }\n  }\n\n  on('mousedown', '.js-format', (event) => event.preventDefault())\n\n  on('click', '.js-format-bold', (event) => {\n    if (!currentSelection.isSelection) return\n\n    currentSelection.toggleBold()\n    currentSelection.triggerChange()\n  })\n\n  on('click', '.js-format-italic', (event) => {\n    if (!currentSelection.isSelection) return\n\n    currentSelection.toggleEmphasis()\n    currentSelection.triggerChange()\n  })\n\n  on('click', '.js-format-underline', (event) => {\n    if (!currentSelection.isSelection) return\n\n    currentSelection.toggleUnderline()\n    currentSelection.triggerChange()\n  })\n\n  on('click', '.js-format-link', (event) => {\n    if (!currentSelection.isSelection) return\n\n    currentSelection.toggleLink('www.livingdocs.io')\n    currentSelection.triggerChange()\n  })\n\n  on('click', '.js-format-quote', (event) => {\n    if (!currentSelection.isSelection) return\n\n    currentSelection.toggleSurround('«', '»')\n    currentSelection.triggerChange()\n  })\n\n  on('click', '.js-format-comment', (event) => {\n    if (!currentSelection.isSelection) return\n\n    const textRange = currentSelection.getTextRange()\n\n    currentSelection.highlightComment({textRange})\n    currentSelection.triggerChange()\n  })\n\n  on('click', '.js-format-emoji', (event) => {\n    if (!currentSelection.isSelection) return\n\n    currentSelection.insertCharacter('😍')\n    currentSelection.triggerChange()\n  })\n\n  on('click', '.js-format-whitespace', (event) => {\n    if (!currentSelection.isSelection) return\n\n    // insert a special whitespace 'em-space'\n    currentSelection.insertCharacter(' ')\n    currentSelection.triggerChange()\n  })\n\n  on('click', '.js-format-clear', (event) => {\n    if (!currentSelection.isSelection) return\n\n    currentSelection.removeFormatting()\n    currentSelection.triggerChange()\n  })\n}\n\nfunction updateCode (elem) {\n  const content = editable.getContent(elem)\n  const codeBlock = document.querySelector('.formatting-code-js')\n  if (!codeBlock) return\n  codeBlock.textContent = content.trim()\n  Prism.highlightElement(codeBlock)\n}\n\n// Highlighting\n// ------------\n\nfunction highlightService (text, callback) {\n  callback(['happy'])\n}\n\neditable.setupHighlighting({\n  checkOnInit: true,\n  throttle: 0,\n  spellcheck: {\n    marker: '<span class=\"highlight-spellcheck\"></span>',\n    spellcheckService: highlightService\n  },\n  whitespace: {\n    marker: '<span class=\"highlight-whitespace\"></span>'\n  }\n})\n\nconst highlightExample = document.querySelector('.highlighting-example p')\neditable.add(highlightExample)\n\n\n// Whitespace Highlighting\n// -----------------------\n\nconst highlightExample2 = document.querySelector('.whitespace-highlighting-example p')\neditable.add(highlightExample2)\n\n\n// Pasting\n// -------\n\neditable.add('.pasting-example p')\n"],"names":["_self","Prism","lang","uniqueId","plainTextGrammar","_","encode","tokens","Token","o","obj","deepClone","visited","clone","id","key","v","i","element","m","language","err","src","scripts","className","defaultActivation","no","classList","redef","inside","before","insert","root","grammar","ret","token","newToken","old","value","DFS","callback","type","objId","property","propertyType","async","container","env","parent","code","insertHighlightedCode","highlightedCode","worker","evt","text","rest","tokenList","LinkedList","addAfter","matchGrammar","toArray","name","hooks","callbacks","content","alias","matchedStr","stringify","s","e","aliases","attributes","matchPattern","pattern","pos","lookbehind","match","lookbehindLength","startNode","startPos","rematch","patterns","j","patternObj","greedy","flags","currentNode","str","removeCount","from","to","p","k","matchStr","after","reach","removeFrom","removeRange","wrapped","nestedRematch","head","tail","list","node","next","newNode","count","array","message","immediateClose","script","highlightAutomaticallyCallback","readyState","module","global","tagName","includedCdataInside","def","attrName","string","markup","LOADING_MESSAGE","FAILURE_MESSAGE","status","FAILURE_EMPTY_MESSAGE","EXTENSIONS","STATUS_ATTR","STATUS_LOADING","STATUS_LOADED","STATUS_FAILED","SELECTOR","loadFile","success","error","xhr","parseRange","range","start","comma","end","pre","extension","autoloader","lines","elements","logged","config","args","errorArgs","toString","htmlCharacters","trimRight","trim","isString","escapeHtml","forAttribute","c","replaceLast","searchValue","replaceValue","lastOccurrenceIndex","endsWithSingleSpace","elementNode","textNode","documentFragmentNode","NodeIterator","method","prev","n","child","nextSibling","prevSibling","replacement","domArray","target","documentOrHost","host","doc","domSelector","document","createElement","html","win","el","closest","elem","selector","createRange","getSelection","docSelection","getNodes","nodeTypes","filterFunc","nodes","nodeIterator","normalizeBoundaries","containsRange","containerRange","testRange","containsNodeText","nodeRange","comparisonStart","comparisonEnd","nodeContainsRange","isCharacterDataNode","splitDataNode","offset","splitBoundaries","startContainer","startOffset","endContainer","endOffset","newStartContainer","toCharacterRange","startRange","rangeText","rangesAreEqual","range1","range2","rangeToHtml","div","getSelectionCoordinates","selection","rects","coordinates","rect","findStartExcludingWhitespace","whitespacesOnTheLeft","offsetAfterWhitespace","iterator","previousTextNode","findEndExcludingWhitespace","whitespacesOnTheRight","isFirstNode","offsetBeforeWhitespace","nextNode","getHost","result","getNodeIndex","index","isVoid","childNodes","nodeType.textNode","isVoidTextNode","nodeType.elementNode","isWhitespaceOnly","lastOffsetWithContent","isLinebreak","nodeValue","string.trimRight","lastOffset","isBeginningOfHost","isStartOffset","offsetInParent","parentNode","isEndOfHost","isEndOffset","firstChild","isTextEndOfHost","isTextEndOffset","isSameNode","source","len","attr","targetElem","sourceElem","lastChild","latestChild","isDocumentFragmentWithoutChildren","fragment","nodeType.documentFragmentNode","isInlineElement","window","boundaryMarkerId","markerTextChar","isSecondChildOfCommonAncestor","rangeContainer","insertRangeBoundaryMarker","atStart","ownerDoc","markerEl","directlyBeforeFormatTag","directlyAfterFormatTag","startParentElem","endParentElem","boundaryRange","setRangeBoundary","markerId","getMarker","save","rangeInfo","startEl","endEl","restore","previousNode","restoreRange","func","savedRange","rangeSaveRestore.save","rangeSaveRestore.restore","zeroWidthSpace","zeroWidthNonBreakingSpace","whitespaceExceptSpace","everythingWhitespace","leadingWhitespace","trailingWhitespace","tidyHtml","normalizeTags","removeWhitespaces","nodesToProcess","processedIndices","mergedNode","sibling","parser.isSameNode","siblingChild","normalizeWhitespace","cleanInternals","extractContent","keepUiElements","innerHtml","getInnerHtmlOfFragment","unwrapInternalNodes","documentFragment","children","createFragmentFromString","htmlString","wrapper","adoptElement","cloneRangeContents","firstCall","unwrap","getTags","innerTags","getInnerTags","ancestorTags","getAncestorTags","tags","getTagsByName","getTagsByNameAndAttributes","areSameAttributes","attrs1","attrs2","attr1","attr2","getContainedTags","getTagNames","isAffectedBy","selectNodeContents","intersectsRange","isExactSelection","visible","elemRange","elemText","string.trim","expandTo","toggleTag","elems","removeFormattingElem","forceWrap","isWrappable","canSurroundContents","restoredRange","nukeElem","nuke","wrap","removeFormatting","insertCharacter","character","insertEl","surround","startCharacter","endCharacter","deleteCharacter","containsString","nukeTag","createNodeIterator","filter","isNodeFullyContained","boundariesInvalid","nextBlockId","init","normalize","plainText","shouldSpellcheck","setBlockId","content.tidyHtml","disable","setState","isPlainTextBlock","data","doubleQuotePairs","singleQuotePairs","apostrophe","quotesRegex","beforeOpeningQuote","afterClosingQuote","replacements","replaceAllQuotes","replaceQuotesRules","matches","getAllQuotes","replaceMatchedQuotes","replaceExistingQuotes","position","closingTag","findClosingQuote","nestedMatches","replaceApostrophe","current","openingQuote","possibleClosingSingleQuotes","getPossibleClosingQuotes","possibleClosingDoubleQuotes","allPossibleDoubleClosers","allPossibleSingleClosers","hasStraightQuoteFallback","isStraightQuote","bestStraightQuoteMatch","candidateChar","candidateAfter","pairs","quotePair","quote","allowedElements","allowedPlainTextElements","requiredAttributes","transformElements","blockLevelElements","replaceQuotes","splitIntoBlocks","blacklistedElements","whitespaceOnly","blockPlaceholder","keepInternalRelativeLinks","updateConfig","conf","rules","paste","block","cursor","clipboardContent","pasteHolder","isPlainText","blocks","parseContent","filterHtmlElements","entry","cleanWhitespace","options","childElement","hrefAttr","stripInternalHost","childContent","conditionalNodeWrap","string.escapeHtml","nodeName","transformNodeName","shouldKeepNode","filterAttributes","hasRequiredAttributes","requiredAttrs","group","quotes.replaceAllQuotes","isBlink","isWebkit","webKit","selectionchange","osc","contenteditableSpanBug","eventable","notifyContext","events","getEventableModule","listeners","addListener","listener","event","removeListener","eventListeners","eventOrEvents","eventType","context","allArgs","actualContext","actualEvent","actualArgs","nextEvent","getScrollPosition","x","y","Cursor","editableHost","content.getTags","content.getTagNames","content.getTagsByName","content.getInnerTags","content.getContainedTags","content.getAncestorTags","parser.isEndOfHost","parser.isTextEndOfHost","hostRange","hostCoords","getRangeBoundingClientRect","cursorCoords","isCloseTo","parser.isBeginningOfHost","string.isString","content.createFragmentFromString","parser.isDocumentFragmentWithoutChildren","preceedingElement","lastIndex","viewport.getScrollPosition","content.cloneRangeContents","content.getInnerHtmlOfFragment","positioning","coords","parser.lastChild","parser.getHost","attributeName","attributeValue","content.adoptElement","a","b","highlightText","convertBRs","getText","part","countBRs","currentMatchIndex","totalOffset","currentMatch","portions","wordId","nodeText","nodeEndOffset","isFirstPortion","isLastPortion","length","portion","lastNode","stencilElement","title","searchText","searchTerm","marker","findMatches","searchAllWords","words","searchTexts","matchMode","isElement","regex","createWordRegex","createHighlightRegex","startIndex","matchedText","word","escapeRegEx","letterChars","escapedWords","highlightSupport","highlightId","dispatcher","blockText","winWindow","markerNode","endIndex","actualStartIndex","actualEndIndex","addCssClass","removeCssClass","content.unwrap","findMarkersQuery","markers","groups","res","textRange","highlightType","markerMarkup","Selection","content.isWrappable","href","attrs","link","textToTrim","lastNonWhitespace","links","firstLink","textBefore","currentTextContent","block.isPlainTextBlock","newRange","content.toggleTag","customElem","bold","em","u","content.surround","content.deleteCharacter","chars","char","content.removeFormatting","ancestorTag","containedTag","content.expandTo","content.forceWrap","onlyVisible","content.isExactSelection","content.containsString","RangeContainer","otherRangeContainer","self","other","SelectionWatcher","successfulSync","hostNode","newRangeContainer","lastSelection","Keyboard","selectionWatcher","notifyCharacterEvent","nodeToRemove","selectionRange","startNodeElement","startNodeRange","contentNodeTypes","firstContentNode","rangeStartingBeforeCurrentElement","isValidQuotePairConfig","shouldApplySmartQuotes","smartQuotes","quotes","singleQuotes","isDoubleQuote","isSingleQuote","isApostrophe","isWhitespace","isSeparatorOrWhitespace","shouldBeOpeningQuote","indexCharBefore","shouldBeClosingQuote","hasCharAfter","textArr","indexCharAfter","shouldBeSingleOpeningQuote","replaceQuote","quoteType","newText","newTextNode","hasSingleOpeningQuote","singleOpeningQuote","applySmartQuotes","cursorOffset","isCharSingleQuote","textContent","closingQuote","Dispatcher","editable","capture","l","currentInput","clipEvent","clipboard.paste","inputEvent","quotesConfig","direction","keyEvent","editableBlock","beforeFragment","afterFragment","selectionDirty","suppressSelectionChanges","didSyncSelection","notifySelectionBoundary","deepMerge","sources","sourceValue","targetValue","SpellcheckService","spellcheckService","condensedText","content.normalizeWhitespace","misspelledWords","characters","specialWhitespaceChars","specialWhitespaceCharsRegex","WhitespaceHighlighting","unicode","getUnicode","description","MatchCollection","mergeMatches","matches1","matches2","length1","length2","lastEndIndex","output","state","pickNext","i1","i2","item1","item2","MonitoredHighlighting","configuration","spellcheckConfig","defaultConfig","spellcheckMarker","whitespaceMarker","whitespaceMarkerNode","spellcheckMarkerNode","throttle","timeoutId","matchCollection","whitespaceMatches","elementAtCursor","log","logArgs","createDefaultBehavior","parser.isVoid","content.cleanInternals","br","newElement","targetContent","content.extractContent","elementContent","tempDiv","targetTextLength","elementTextLength","mergedContent","prevCursor","nextCursor","currentElement","lastCursor","action","createDefaultEvents","behavior","textNodesUnder","getTextNodeAndRelativeOffset","textNodes","absOffset","cumulativeOffset","relativeOffset","targetNode","nodeLength","getTotalCharCount","reducer","acc","binaryCursorSearch","requiredOnFirstLine","requiredOnLastLine","positionX","totalCharCount","distance","safety","createRangeAtCharacterOffset","moveLeft","moveRight","finalDistance","Editable","instanceConfig","defaultInstanceConfig","globalConfig","clipboard.updateConfig","targets","block.disable","opts","block.init","inputElement","contentToAppend","contentToPrepend","hightlightingConfig","raiseEvents","textRanges","handler","origCoordinates","parser","r","f","d","w","g","t","S","C","M","$","O","N","I","h","P","B","A","L","D","T","F","H","E","V","z","q","G","K","ReactPropTypesSecret","ReactPropTypesSecret_1","require$$0","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","props","propName","componentName","location","propFullName","secret","getShim","ReactPropTypes","propTypesModule","CSSTransition","Component","timeout","classNames","isEntering","isEntered","cloneElement","TransitionGroup","Events","transitionOptions","defaultContent","jsx","jsxs","PropTypes","CursorPosition","Clipboard","guid","listLength","addToList","removeFromList","draw","showEvent","render","isFromFirstExample","eventList","beforeMatch","afterMatch","fragmentA","fragmentB","setupTooltip","secondExample","updateCode","styleSelect","iframeExample","iframeWindow","iframeEditable","iframeBody","currentSelection","tooltipWrapper","tooltip","top","left","setupTooltipListeners","on","codeBlock","highlightService","highlightExample","highlightExample2"],"mappings":"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","x_google_ignoreList":[0,37,38,39,40,41]}